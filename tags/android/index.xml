<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Android on æ¸…æ°´æ± å¡˜</title><link>https://hanlyjiang.github.io/tags/android/</link><description>Recent content in Android on æ¸…æ°´æ± å¡˜</description><generator>Hugo -- 0.152.2</generator><language>zh-cn</language><lastBuildDate>Sat, 19 Mar 2022 22:29:12 +0000</lastBuildDate><atom:link href="https://hanlyjiang.github.io/tags/android/index.xml" rel="self" type="application/rss+xml"/><item><title>Android Jacocoè¦†ç›–ç‡ç»Ÿè®¡é…ç½®</title><link>https://hanlyjiang.github.io/posts/android-jacoco-gradle-config/</link><pubDate>Sat, 19 Mar 2022 22:29:12 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/android-jacoco-gradle-config/</guid><description>&lt;p&gt;Android Jacoco è¦†ç›–ç‡ç»Ÿè®¡Gradleé…ç½®ï¼ŒåŒ…æ‹¬ç”Ÿæˆæœ¬åœ°å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œä»ªå™¨å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œåˆå¹¶ä¸¤ç§æµ‹è¯•çš„æŠ¥å‘Šï¼Œåˆå¹¶ä¸¤ç§æµ‹è¯•çš„æ‰§è¡Œæ•°æ®å¹¶åœ¨AndroidStudioçš„ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹æ¯ä¸€è¡Œçš„è¦†ç›–ç‡æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id="å¦‚ä½•è®©æµ‹è¯•ä»»åŠ¡ç”Ÿæˆ-jacoco-è¦†ç›–ç‡ç»Ÿè®¡æ•°æ®"&gt;å¦‚ä½•è®©æµ‹è¯•ä»»åŠ¡ç”Ÿæˆ Jacoco è¦†ç›–ç‡ç»Ÿè®¡æ•°æ®ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä»…ä»…ä»Gradleä»»åŠ¡æ¥è¯´ï¼Œä¸è€ƒè™‘ AndroidStudio/IDEAã€‚&lt;/p&gt;
&lt;h3 id="æœ¬åœ°å•å…ƒæµ‹è¯•test"&gt;æœ¬åœ°å•å…ƒæµ‹è¯•ï¼ˆTestï¼‰&lt;/h3&gt;
&lt;p&gt;å¯¹äºæœ¬åœ°å•å…ƒæµ‹è¯•æ¥è¯´ï¼ŒåŸå…ˆæœ‰ä¸€ä¸ª &lt;code&gt;testDebugUnitTest&lt;/code&gt; çš„æµ‹è¯•ä»»åŠ¡ï¼Œå¦‚æœä¸åšé…ç½®ï¼Œè¯¥ä»»åŠ¡åªä¼šç”Ÿæˆæµ‹è¯•é€šè¿‡æƒ…å†µçš„æŠ¥å‘Šã€‚åªè¦åº”ç”¨ jacoco æ’ä»¶ï¼Œç„¶åè¿è¡Œ &lt;code&gt;testDebugUnitTest&lt;/code&gt; ä»»åŠ¡æ—¶ï¼Œå°±ä¼šåŒæ—¶ç”Ÿæˆjacocoè¦†ç›–ç‡ç»Ÿè®¡&lt;strong&gt;æ‰§è¡Œæ•°æ®æ–‡ä»¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// build.gradle
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;apply(plugin = &lt;span style="color:#e6db74"&gt;&amp;#34;jacoco&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹æ‰€ä»¥èƒ½è¿™æ ·æ˜¯å› ä¸º jacoco æ’ä»¶ä¼šç»™æ‰€æœ‰ Test ç±»å‹çš„ä»»åŠ¡æ·»åŠ  jacoco çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è¾“å‡ºå…¶æ‰§è¡Œæ•°æ®æ–‡ä»¶è·¯å¾„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;testDebugUnitTest&amp;#34;&lt;/span&gt;).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; doLast {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.extensions.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jacoco&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; JacocoTaskExtension).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logger.lifecycle(&lt;span style="color:#e6db74"&gt;&amp;#34;testDebugUnitTest dest: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${this.destinationFile?.absolutePath}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œæƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;testDebugUnitTest dest: /Users/hanlyjiang/Wksp/project/AndroidTestSample/app/build/outputs/unit_test_code_coverage/debugUnitTest/testDebugUnitTest.exec
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä»ªå™¨å•å…ƒæµ‹è¯•androidtest"&gt;ä»ªå™¨å•å…ƒæµ‹è¯•ï¼ˆAndroidTestï¼‰&lt;/h3&gt;
&lt;p&gt;ä»ªå™¨å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ•°æ®çš„ç»Ÿè®¡éœ€è¦æ‰“å¼€&lt;code&gt;testCoverageEnabled&lt;/code&gt;å¼€å…³ï¼Œç„¶åä¼šæœ‰ä¸€ä¸ª&lt;code&gt;createDebugCoverageReport&lt;/code&gt; çš„ä»»åŠ¡ç”Ÿæˆï¼ŒåŒæ—¶ä¹Ÿä¼šç”Ÿæˆhtmlçš„æŠ¥å‘Šã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// groovy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;android &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildTypes &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; debug &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; testCoverageEnabled &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// kotlin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;android &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildTypes &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; getByName&lt;span style="color:#f92672"&gt;(&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;debug&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;).&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apply&lt;/span&gt; &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isTestCoverageEnabled &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿æ¥è®¾å¤‡æ‰§è¡Œè¯¥ä»»åŠ¡å³å¯ç”Ÿæˆå¯¹åº”çš„æ‰§è¡Œæ•°æ®æ–‡ä»¶åŠå¯¹åº”çš„è¦†ç›–ç‡æŠ¥å‘Šã€‚&lt;/p&gt;</description></item><item><title> AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•</title><link>https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/</link><pubDate>Sun, 13 Mar 2022 23:18:16 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/</guid><description>&lt;p&gt;é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id="-æ˜¯ä»€ä¹ˆé—®é¢˜"&gt;ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/h2&gt;
&lt;h3 id="é”™è¯¯æ—¥å¿—"&gt;é”™è¯¯æ—¥å¿—&lt;/h3&gt;
&lt;p&gt;APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š &lt;code&gt;NoSuchMethodError&lt;/code&gt;, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ &lt;code&gt;Disposable.disposed()&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;E/AndroidRuntime: FATAL EXCEPTION: main
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Process: com.github.hanlyjiang.sample, PID: &lt;span style="color:#ae81ff"&gt;7357&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; java.lang.NoSuchMethodError: No static method disposed&lt;span style="color:#f92672"&gt;()&lt;/span&gt;Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes &lt;span style="color:#f92672"&gt;(&lt;/span&gt;declaration of &lt;span style="color:#e6db74"&gt;&amp;#39;io.reactivex.rxjava3.disposables.Disposable&amp;#39;&lt;/span&gt; appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw&lt;span style="color:#f92672"&gt;==&lt;/span&gt;/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg&lt;span style="color:#f92672"&gt;==&lt;/span&gt;/base.apk&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.github.hanlyjiang.lib_mod.ViewTest.disposable&lt;span style="color:#f92672"&gt;(&lt;/span&gt;ViewTest.java:8&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0&lt;span style="color:#f92672"&gt;(&lt;/span&gt;MainActivity.java:15&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Unknown Source:0&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View.performClick&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:7456&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.google.android.material.button.MaterialButton.performClick&lt;span style="color:#f92672"&gt;(&lt;/span&gt;MaterialButton.java:1119&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View.performClickInternal&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:7433&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View.access$3700&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:836&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View$PerformClick.run&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:28832&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Handler.handleCallback&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Handler.java:938&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Handler.dispatchMessage&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Handler.java:99&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Looper.loopOnce&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Looper.java:201&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Looper.loop&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Looper.java:288&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.app.ActivityThread.main&lt;span style="color:#f92672"&gt;(&lt;/span&gt;ActivityThread.java:7902&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at java.lang.reflect.Method.invoke&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Native Method&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run&lt;span style="color:#f92672"&gt;(&lt;/span&gt;RuntimeInit.java:548&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.android.internal.os.ZygoteInit.main&lt;span style="color:#f92672"&gt;(&lt;/span&gt;ZygoteInit.java:933&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;â° Tip&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>Dagger åœ¨Androidåº“(SDK)æ¨¡å—ä¸­çš„ä½¿ç”¨å®è·µ</title><link>https://hanlyjiang.github.io/posts/dagger-zai-android-ku-sdkmo-kuai-zhong-de-shi-yong-shi-jian/</link><pubDate>Sun, 06 Mar 2022 15:11:54 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/dagger-zai-android-ku-sdkmo-kuai-zhong-de-shi-yong-shi-jian/</guid><description>&lt;p&gt;æœ¬æ–‡ä¸»è¦æè¿°å¦‚ä½•ä½¿ç”¨Daggerè§£å†³å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚ä½•åœ¨åº“ï¼ˆSDKï¼‰æ¨¡å—ä¸­ä½¿ç”¨Daggerä¾èµ–æ³¨å…¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;MVPä¸­çš„Daggerä¾èµ–æ³¨å…¥å¦‚ä½•å®ç°æ— æ„Ÿæ³¨å…¥ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ¬æ–‡ä¸ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨Daggerï¼Œåªä¸“æ³¨äºæè¿°å¦‚ä¸Šä¸¤ä¸ªé—®é¢˜çš„è§£å†³çš„å‰å› åæœåŠè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id="èƒŒæ™¯"&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;æ¥æ‰‹å¼€å‘ä¸€ä¸ªSDKï¼Œå¤§è‡´æƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯¥SDKå†…éƒ¨æœ‰è‹¥å¹²ç•Œé¢ï¼ŒåŒ…æ‹¬Activityï¼ŒFragmentç­‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨MVPæ¶æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€æ¸å‘ç°å†…éƒ¨ä¾èµ–æ··ä¹±ï¼Œåœ¨å¾—ç©ºåï¼Œé‚å¯¹å…¶ä¾èµ–éƒ¨åˆ†è¿›è¡Œé‡æ„æ”¹é€ ã€‚&lt;/p&gt;
&lt;h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨ä¾èµ–æ³¨å…¥è¿›è¡Œæ”¹é€ "&gt;ä¸ºä»€ä¹ˆä½¿ç”¨ä¾èµ–æ³¨å…¥è¿›è¡Œæ”¹é€ ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æ˜¯ä¾èµ–æ··ä¹±ï¼Œå•ä¾‹çš„æ»¥ç”¨å¯¼è‡´ä¾èµ–å…³ç³»ä¸æ˜æ˜¾ï¼Œæ— æ³•ç®¡ç†ï¼Œæ— æ³•æµ‹è¯•&lt;/p&gt;
&lt;p&gt;æŸäº›å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šç±»ä¸­éƒ½éœ€è¦ä½¿ç”¨ï¼Œå¦‚ Retrofit çš„è¯·æ±‚å¯¹è±¡ï¼Œä»£è¡¨ä¿¡æ¯çš„æ ‡è¯†å­—æ®µç­‰ï¼Œæ­¤æ—¶ä¸ºäº†é¿å…é€šè¿‡æ„é€ å‡½æ•°æˆ–è€…setteræ–¹æ³•æ¥ä¼ é€’ï¼Œå°±ç›´æ¥èµ·äº†ä¸ªå•ä¾‹ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»ä¼¼çš„æƒ…å†µï¼Œæœ€ç»ˆå¯¼è‡´å•ä¾‹æœ‰10å¤šä¸ªï¼Œè°ƒç”¨å•ä¾‹ getInstance çš„åœ°æ–¹æ›´æ˜¯æ•°ä¸èƒœæ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¯¼è‡´æˆ‘ä»¬è¦å¯¹å¯¹åº”çš„ä»£ç è¿›è¡Œå•å…ƒæµ‹è¯•åšmockæ“ä½œå¼‚å¸¸å›°éš¾ï¼Œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å› ä¸ºä¾èµ–å…³ç³»å¤ªä¸æ˜æ˜¾ï¼Œå‡ ä¹å¾—ä¸€è¡Œè¡Œæ‰¾æ‰èƒ½æ‰¾åˆ°ç±»æˆ–æ–¹æ³•åˆ°åº•ä¾èµ–äº†å“ªäº›å¯¹è±¡&lt;/li&gt;
&lt;li&gt;åŒæ—¶mockçš„è¿‡ç¨‹ä¹Ÿå˜å¾—éº»çƒ¦ï¼Œç”±äºæ²¡æœ‰ä½œä¸ºç±»æˆå‘˜ï¼Œæ‰€ä»¥æ— æ³•ç®€å•é€šè¿‡mockæ›¿æ¢ å¯¹åº”æˆå‘˜ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä¾èµ–æ³¨å…¥æ”¹é€ çš„é—®é¢˜ç‚¹"&gt;ä¾èµ–æ³¨å…¥æ”¹é€ çš„é—®é¢˜ç‚¹&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æœ‰å¦‚ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä¹‹æ‰€ä»¥æç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºGoogle é’ˆå¯¹Androidï¼Œåœ¨Daggerçš„åŸºç¡€ä¸Šé’ˆå¯¹æ€§çš„æ„å»ºäº†ä¸€ä¸ªHilt çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œèƒ½å¤Ÿå‡å°‘Androidä¸­ç›´æ¥ä½¿ç”¨Daggerçš„æ¨¡æ¿ä»£ç ã€‚ä½†æ˜¯Hiltçš„ä½¿ä¸­æœ‰è¦æ±‚ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰ä½¿ç”¨ Hilt çš„åº”ç”¨éƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªå¸¦æœ‰ &lt;code&gt;@HiltAndroidApp&lt;/code&gt; æ³¨é‡Šçš„ &lt;code&gt;Application&lt;/code&gt; ç±»ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š &lt;a href="https://developer.android.google.cn/training/dependency-injection/hilt-android"&gt;ä½¿ç”¨ Hilt å®ç°ä¾èµ–é¡¹æ³¨å…¥ | Android å¼€å‘è€… | Android Developers (google.cn)&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯å¿…é¡»èƒ½æ§åˆ¶ä½Applicationï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ä½œä¸ºä¸€ä¸ªSDKçš„æä¾›æ–¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ˜¯æ²¡æœ‰æœºä¼šä¿®æ”¹Applicationçš„ä»£ç çš„&lt;/li&gt;
&lt;li&gt;è€Œä¸”ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½è¦æ±‚ä½¿ç”¨æ–¹å»åšè¿™ç§é™åˆ¶ï¼›åŒæ—¶ï¼Œå¦‚æœä½¿ç”¨æ–¹æœ‰ä½¿ç”¨ Hilt å‘¢ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯å¦ä¼šå¯¹å…¶äº§ç”Ÿå½±å“ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ•…ï¼Œæˆ‘ä»¬åªèƒ½ç›´æ¥ä½¿ç”¨Daggerã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è€Œå¦å¤–ä¸€ä¸ªé—®é¢˜åœ¨äºMVPçš„æ¶æ„é™åˆ¶ï¼ŒP å±‚éœ€è¦æŒæœ‰Vå±‚çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯Pä¾èµ–Vï¼Œè€ŒVé€šå¸¸æ˜¯Activityæˆ–è€…Fragmentï¼Œè€ŒActivityåŠFragmentçš„åˆ›å»ºè¿‡ç¨‹ç”±Androidç³»ç»Ÿæ§åˆ¶ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Daggeræ—¶æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›æ¨¡æ¿ä»£ç ï¼ˆä¸‹æ–¹ä¼šè¯´æ˜ï¼‰ï¼Œå°† ActivityåŠFragmentå¯¹è±¡æ³¨å…¥åˆ° Dagger çš„ä¾èµ–å›¾è°±ä¸­ã€‚&lt;/p&gt;
&lt;h2 id="æ²¡æœ‰-application-çš„é—®é¢˜è§£å†³"&gt;æ²¡æœ‰ Application çš„é—®é¢˜è§£å†³&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬è¦è§£å†³çš„æ˜¯æ²¡æœ‰Applicationçš„é—®é¢˜ï¼Œé‚£ä¹ˆæ²¡æœ‰Applicationä¼šç»™æˆ‘ä»¬å¸¦æ¥å“ªäº›é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ— æ³•ä½¿ç”¨ Hilt&lt;/li&gt;
&lt;li&gt;æ— æ³•ç›´æ¥ä½¿ç”¨ dagger-android&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªé—®é¢˜å®é™…ä¸Šæ˜¯ç±»ä¼¼çš„ï¼ŒHiltåŠDagger-Androidéƒ½æ˜¯ç”¨äºè§£å†³ Android ç»„ä»¶ï¼ˆActivityï¼ŒFragmentï¼ŒServiceï¼ŒBroadcastReceiver ç­‰ï¼‰çš„ä¾èµ–æ³¨å…¥çš„ã€‚ä½†æ˜¯ä»–ä»¬éƒ½è¦æ±‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ Applicationã€‚&lt;/p&gt;</description></item><item><title>Gradleå­¦ä¹ æŒ‡å—-å‰è¨€</title><link>https://hanlyjiang.github.io/posts/gradle-xue-xi-zhi-nan-qian-yan/</link><pubDate>Thu, 07 Oct 2021 22:07:09 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/gradle-xue-xi-zhi-nan-qian-yan/</guid><description>&lt;p&gt;è¿™ä¸ªå¯¹äºå®‰å“å¼€å‘æ¥è¯´ï¼ŒGradleå¯ä»¥ä¸äº†è§£ï¼Œä½†æ˜¯åˆå¿…é¡»äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;è¯´ä¸éœ€è¦äº†è§£ï¼Œæ˜¯å› ä¸ºï¼š é€šè¿‡AndroidStudioå»ºç«‹å·¥ç¨‹çš„æ—¶å€™ï¼Œé»˜è®¤å°±åˆ›å»ºå¥½äº†Gradleçš„é¡¹ç›®ç»“æ„åŠå¯¹åº”çš„ä»»åŠ¡ï¼Œé€šè¿‡IDEæ¥æ·»åŠ æ¨¡å—çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨çš„æ·»åŠ Gradleçš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;è¯´éœ€è¦äº†è§£ï¼Œæ˜¯å› ä¸ºï¼šæœ‰æ—¶å€™ä¼šé‡åˆ°æ„å»ºé”™è¯¯ï¼Œè¿˜æœ‰æ—¶å€™éœ€è¦æ”¹ä¸€æ”¹æ„å»ºæµç¨‹çš„é»˜è®¤è¡Œä¸ºï¼Œå¦å¤–æœ‰äº›æ—¶å€™ï¼Œéœ€è¦è‡ªè¡Œæ‰©å±•ä¸€ä¸ªæ„å»ºä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Gradleå­¦ä¹ çš„ä¸€ä¸ªéš¾ç‚¹åœ¨äºï¼Œå…¶å­¦ä¹ èµ„æ–™éå¸¸é›¶æ•£ï¼Œå°‘æœ‰æˆä½“ç³»çš„å­¦ä¹ èµ„æ–™ã€‚å½“ç„¶ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯å¾ˆæˆä½“ç³»çš„ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰ä¸å¥½çš„åœ°æ–¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;çº¯è‹±æ–‡ï¼›&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬æ›´æ–°ä¹‹åï¼Œæ–‡æ¡£ç»“æ„æœ‰å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å®˜æ–¹æ–‡æ¡£å¯¹äºå®‰å“é¡¹ç›®çš„è¯´æ˜æ²¡æœ‰ï¼ˆå› ä¸ºandroidçš„æ’ä»¶æ˜¯googleè‡ªè¡Œæ‰©å±•çš„ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå‰æœŸgradleçš„è„šæœ¬éƒ½æ˜¯ä½¿ç”¨groovyæ¥ç¼–å†™ï¼Œæˆ‘ä»¬è¦å†™è„šæœ¬ï¼Œéœ€è¦å»å­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œè™½ç„¶è¿™ä¸ªè¯­è¨€å’Œjavaæ¯”è¾ƒæ¥è¿‘ï¼Œä½†æ˜¯ç”±äºæ²¡ä»€ä¹ˆå…¶ä»–ç”¨é€”ï¼ŒåŠ ä¸Šéœ€è¦ç¼–å†™gradleè„šæœ¬çš„åœºæ™¯ä¹Ÿä¸æ˜¯é‚£ä¹ˆå¸¸è§ï¼Œå°±ä¼šè®©è§‰å¾—æœ‰ç‚¹ä¸å€¼å¾—æŠ•å…¥ï¼Œè¿™ä¸¤ä¸ªå› ç´ ç»“åˆèµ·æ¥ï¼Œä¼šåŠé€€å¾ˆå¤šå®‰å“å¼€å‘äººå‘˜ã€‚ç°åœ¨ï¼Œgradleå¯ä»¥ä½¿ç”¨kotlinæ¥ç¼–å†™å…¶dslè„šæœ¬ï¼Œå­¦ä¹ æˆæœ¬ä¼šé™ä½å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;è§åˆ°å…¶wrapperçš„è®¾è®¡ä»¤æˆ‘å°è±¡æ·±åˆ»ï¼Œå¯¹æ¯”antåŠmavenéœ€è¦æ‰‹åŠ¨å»ä¸‹è½½ä¸€ä»½äºŒè¿›åˆ¶å‰¯æœ¬ï¼Œç„¶åé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œè€Œä½ è·å–åˆ°åˆ«äººçš„gradleé¡¹ç›®ä¹‹åï¼Œç›´æ¥ä½¿ç”¨wrapperè„šæœ¬ï¼Œå°±å¯ä»¥æ‰§è¡Œgradleä»»åŠ¡ï¼Œwrapperè„šæœ¬ä¼šè‡ªåŠ¨å¸®åŠ©ä½ å»è·å–ä¸€ä»½gradleçš„äºŒè¿›åˆ¶å‰¯æœ¬ï¼Œå°±å¥½åƒä½ ç›´æ¥æ‰§è¡Œgradleçš„äºŒè¿›åˆ¶å‘½ä»¤ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–gradleä¹Ÿæä¾›äº†æ–¹ä¾¿çš„æ‰©å±•æœºåˆ¶ï¼Œèƒ½å¯¹æ„å»ºæµç¨‹è¿›è¡Œå®šåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»å®‰å“å¼€å‘çš„è§†è§’ï¼Œå¯¹Gradleçš„ä½¿ç”¨åšä¸€ä¸ªæ•´ä½“çš„ä»‹ç»ã€‚å†…å®¹ä¸Šä¼šåŒ…æ‹¬Gradleçš„ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸€äº›å¸¸è§çš„Gradleä»»åŠ¡ä»‹ç»ï¼ŒAndroidçš„å¸¸è§Gradleé…ç½®ä»‹ç»ï¼ŒåŒæ—¶ä¹Ÿä¼šä»‹ç»è‡ªå®šä¹‰Gradleä»»åŠ¡åŠGradleæ’ä»¶ã€‚&lt;/p&gt;</description></item><item><title>ç®€åŒ–Androidåº“ä¸Šä¼ åˆ°Mavenä»“åº“çš„gradleé…ç½®</title><link>https://hanlyjiang.github.io/posts/jian-hua-android-ku-shang-chuan-dao-maven-cang-ku-de-gradle-pei-zhi/</link><pubDate>Tue, 01 Jun 2021 10:26:00 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/jian-hua-android-ku-shang-chuan-dao-maven-cang-ku-de-gradle-pei-zhi/</guid><description>&lt;p&gt;é…ç½® android ä¸Šä¼ åˆ° maven ä¸­å¿ƒä»“åº“ï¼Œå‘ç°é…ç½®çš„ä»£ç æœ‰ç‚¹å¤šï¼Œè€Œä¸”å¦‚æœæœ‰å¤šä¸ªåº“æ¨¡å—éœ€è¦ä¸Šä¼ ï¼Œåˆ™éœ€è¦å¤åˆ¶ç²˜è´´ä¸å°‘é‡å¤çš„é…ç½®ä»£ç ï¼Œäºæ˜¯ç¼–å†™äº†ä¸€ä¸ª gradle æ’ä»¶ç”¨äºç®€åŒ–æå–è¿™ä¸ªé…ç½®è¿‡ç¨‹ï¼›&lt;/p&gt;
&lt;h2 id="æ’ä»¶ç”¨é€”åŠæ•ˆæœ"&gt;æ’ä»¶ç”¨é€”åŠæ•ˆæœ&lt;/h2&gt;
&lt;p&gt;æœ¬æ’ä»¶ç”¨äºç®€åŒ–Androidåº“ä¸Šä¼ åˆ°Mavenä¸­å¿ƒä»“åº“çš„é…ç½®ï¼Œé¿å…æ¯ä¸ªprojectçš„gradleä¸­éƒ½æ”¾ç½®ä¸€ä»½é‡å¤è¾ƒå¤šçš„é…ç½®ï¼›&lt;/p&gt;
&lt;p&gt;æ’ä»¶æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç®€åŒ– maven-publish æ’ä»¶çš„é…ç½®æµç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;æ·»åŠ ä¸Šä¼ åˆ°Mavenä¸­å¿ƒä»“åº“çš„ publish ä»»åŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒé…ç½®ä¸Šä¼ æ—¶æ˜¯å¦åŒ…å« javadoc åŠæºç ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ç›´æ¥ä½¿ç”¨maven-publishæ’ä»¶çš„é…ç½®"&gt;ç›´æ¥ä½¿ç”¨maven-publishæ’ä»¶çš„é…ç½®ï¼š&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.publish.maven.MavenPom
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;plugins {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;com.android.library&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;signing&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;maven-publish&lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;android {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; defaultConfig {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; versionName(&lt;span style="color:#e6db74"&gt;&amp;#34;1.0.0-SNAPSHOT&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dependencies {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tasks.register(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;, Javadoc&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; group = &lt;span style="color:#e6db74"&gt;&amp;#34;publishing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; dependsOn(&lt;span style="color:#e6db74"&gt;&amp;#34;assemble&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; source = android.sourceSets[&lt;span style="color:#e6db74"&gt;&amp;#34;main&amp;#34;&lt;/span&gt;].java.getSourceFiles()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; classpath &lt;span style="color:#f92672"&gt;+=&lt;/span&gt; project.files(android.bootClasspath + &lt;span style="color:#a6e22e"&gt;File&lt;/span&gt;.pathSeparator)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;JavaVersion&lt;/span&gt;.current().isJava9Compatible) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (options &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; StandardJavadocDocletOptions).addBooleanOption(&lt;span style="color:#e6db74"&gt;&amp;#34;html5&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; android.libraryVariants.forEach { libraryVariant &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; classpath &lt;span style="color:#f92672"&gt;+=&lt;/span&gt; libraryVariant.javaCompileProvider.&lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;().classpath
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options.apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; encoding(&lt;span style="color:#e6db74"&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; charset(&lt;span style="color:#e6db74"&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isFailOnError = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; StandardJavadocDocletOptions).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// addStringOption(&amp;#34;Xdoclint:none&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; links&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;add(&lt;span style="color:#e6db74"&gt;&amp;#34;https://developer.android.google.cn/reference/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; links&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;add(&lt;span style="color:#e6db74"&gt;&amp;#34;http://docs.oracle.com/javase/8/docs/api/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tasks.register(&lt;span style="color:#e6db74"&gt;&amp;#34;jarSource&amp;#34;&lt;/span&gt;, Jar&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; group = &lt;span style="color:#e6db74"&gt;&amp;#34;publishing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; from(android.sourceSets[&lt;span style="color:#e6db74"&gt;&amp;#34;main&amp;#34;&lt;/span&gt;].java.srcDirs)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; archiveClassifier.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;sources&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tasks.register(&lt;span style="color:#e6db74"&gt;&amp;#34;jarJavadoc&amp;#34;&lt;/span&gt;, Jar&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; group = &lt;span style="color:#e6db74"&gt;&amp;#34;publishing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; dependsOn(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; javadoc: Javadoc = tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; Javadoc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; from(javadoc.destinationDir)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; archiveClassifier.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getMyPom&lt;/span&gt;(): Action&amp;lt;&lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; MavenPom&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; Action&amp;lt;MavenPom&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Lib&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; description.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Library For HJ&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; licenses {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; license {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;The Apache License, Version 2.0&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;http://www.apache.org/licenses/LICENSE-2.0.txt&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developers {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developer {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Hanly Jiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; email.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang@outlook.com&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; scm {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:git://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developerConnection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:ssh://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; publishing {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; publications {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; create&amp;lt;MavenPublication&amp;gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;release&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; from(components.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;release&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; groupId = &lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; artifactId = &lt;span style="color:#e6db74"&gt;&amp;#34;android_common_utils&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; version = android.defaultConfig.versionName
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pom(getMyPom())
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ javadoc
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; artifact(tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jarJavadoc&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; Jar)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ source
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; artifact(tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jarSource&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; Jar)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; repositories {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; ossrhCredentials = Action&amp;lt;PasswordCredentials&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; username = properties[&lt;span style="color:#e6db74"&gt;&amp;#34;ossrhUsername&amp;#34;&lt;/span&gt;].toString()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; password = properties[&lt;span style="color:#e6db74"&gt;&amp;#34;ossrhPassword&amp;#34;&lt;/span&gt;].toString()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// sonarçš„ä»“åº“ï¼Œåœ°å€æ ¹æ®é¡¹ç›®çš„ç‰ˆæœ¬å·æ¥ç¡®å®šæ˜¯snapshotè¿˜æ˜¯æ­£å¼ä»“åº“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; maven {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name = &lt;span style="color:#e6db74"&gt;&amp;#34;Sonartype&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; releasesRepoUrl = uri(&lt;span style="color:#e6db74"&gt;&amp;#34;https://oss.sonatype.org/service/local/staging/deploy/maven2&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; snapshotsRepoUrl = uri(&lt;span style="color:#e6db74"&gt;&amp;#34;https://oss.sonatype.org/content/repositories/snapshots/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url = &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (android.defaultConfig.versionName.toString().endsWith(&lt;span style="color:#e6db74"&gt;&amp;#34;SNAPSHOT&amp;#34;&lt;/span&gt;)) snapshotsRepoUrl &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; releasesRepoUrl
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; credentials(ossrhCredentials)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// snapshotçš„åœ°å€ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// https://oss.sonatype.org/content/repositories/snapshots/com/github/hanlyjiang/android_common_utils/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// é¡¹ç›®æœ¬åœ°çš„ä»“åº“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; maven {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name = &lt;span style="color:#e6db74"&gt;&amp;#34;ProjectLocal&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; releasesRepoUrl = uri(layout.buildDirectory.dir(&lt;span style="color:#e6db74"&gt;&amp;#34;repos/releases&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; snapshotsRepoUrl = uri(layout.buildDirectory.dir(&lt;span style="color:#e6db74"&gt;&amp;#34;repos/snapshots&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url = &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (android.defaultConfig.versionName.toString().endsWith(&lt;span style="color:#e6db74"&gt;&amp;#34;SNAPSHOT&amp;#34;&lt;/span&gt;)) snapshotsRepoUrl &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; releasesRepoUrl
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; signing {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sign(publishing.publications.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;release&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä½¿ç”¨androidmavenpubpluginç®€åŒ–åçš„é…ç½®"&gt;ä½¿ç”¨AndroidMavenPubPluginç®€åŒ–åçš„é…ç½®ï¼š&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.publish.maven.MavenPom
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;plugins {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;com.android.library&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;signing&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;maven-publish&lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¼•å…¥æˆ‘ä»¬æœ¬åœ°ä»“åº“ä¸­çš„gradleæ’ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang.android_maven_pub&amp;#34;&lt;/span&gt;) version (&lt;span style="color:#e6db74"&gt;&amp;#34;0.0.5&amp;#34;&lt;/span&gt;) apply (&lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;android {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; defaultConfig {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; versionName(&lt;span style="color:#e6db74"&gt;&amp;#34;1.0.1-SNAPSHOT&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dependencies {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apply(plugin = &lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang.android_maven_pub&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;configure&amp;lt;io.hanlyjiang.gradle.android.AndroidMavenPubPluginExtension&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; groupId.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; artifactId.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;android-common-utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; projectLocalRepoPath.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;local-maven-repo&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mavenPomAction.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(Action&amp;lt;MavenPom&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Lib&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; description.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Library For HJ&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; properties.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapOf(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;myProp&amp;#34;&lt;/span&gt; to &lt;span style="color:#e6db74"&gt;&amp;#34;value&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;prop.with.dots&amp;#34;&lt;/span&gt; to &lt;span style="color:#e6db74"&gt;&amp;#34;anotherValue&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; licenses {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; license {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;The Apache License, Version 2.0&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;http://www.apache.org/licenses/LICENSE-2.0.txt&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developers {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developer {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Hanly Jiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; email.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang@outlook.com&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; scm {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:git://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developerConnection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:ssh://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä½¿ç”¨æ­¥éª¤"&gt;ä½¿ç”¨æ­¥éª¤&lt;/h2&gt;
&lt;h3 id="å¼•å…¥æ’ä»¶"&gt;å¼•å…¥æ’ä»¶&lt;/h3&gt;
&lt;p&gt;åœ¨éœ€è¦ä½¿ç”¨çš„æ¨¡å—çš„buildè„šæœ¬ä¸­ï¼Œå¼•å…¥æˆ‘ä»¬çš„æ’ä»¶ï¼ŒåŒæ—¶å¼•å…¥ &lt;code&gt;maven-publish&lt;/code&gt; æ’ä»¶å’Œ&lt;code&gt; signing&lt;/code&gt; æ’ä»¶ã€‚&lt;/p&gt;</description></item><item><title>Android bindServiceæµç¨‹</title><link>https://hanlyjiang.github.io/posts/androidbindservice-liu-cheng-fen-xi/</link><pubDate>Mon, 12 Apr 2021 10:18:50 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/androidbindservice-liu-cheng-fen-xi/</guid><description>&lt;p&gt;æœ¬æ–‡åˆ†æbindServiceçš„æµç¨‹ï¼Œé¦–å…ˆæˆ‘ä»¬é€šè¿‡é˜…è¯»æºç è·å–ä¸€ä¸ªä¸»çº¿çš„è°ƒç”¨åœ°å›¾ï¼Œç„¶åæå‡ºè‹¥å¹²é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼šAPPè¿›ç¨‹ä¸­å¦‚ä½•è·å–AMSï¼ŒAMSå¦‚ä½•å¯åŠ¨APP-serviceçš„è¿›ç¨‹ï¼ŒAMSä¸­å¦‚ä½•è·å–ApplicationThreadå¹¶ä¸ä¹‹é€šè®¯ï¼ŒServiceçš„å¯åŠ¨åŠç»‘å®šæµç¨‹ï¼›ç„¶åå†é€šè¿‡æºç ä¸€ä¸€è§£ç­”ã€‚æœ€åå†æ•´ä½“æ€»ç»“æ¢³ç†ä¸€ä¸‹æ•´ä½“æµç¨‹ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢„å…ˆçŸ¥è¯†ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Binderé€šä¿¡æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ•´ä½“åˆ†æä¸æ€»ç»“"&gt;æ•´ä½“åˆ†æä¸æ€»ç»“&lt;/h2&gt;
&lt;h3 id="ä¸»çº¿åœ°å›¾ä¸é—®é¢˜æå‡º"&gt;ä¸»çº¿åœ°å›¾ä¸é—®é¢˜æå‡º&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»bindServiceä¸€è·¯è·Ÿè¸ªï¼Œåˆæ­¥ç»˜åˆ¶äº†å¦‚ä¸‹çš„è°ƒç”¨åºåˆ—å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä¸‹é¢çš„å›¾ä½œä¸ºä¸€ä¸ªä¸»çº¿åœ°å›¾ï¼Œé¿å…èµ°å¤±ï¼Œç„¶åæ ¹æ®å…·ä½“é—®é¢˜è¿›è¡Œç»†èŠ‚åˆ†æã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æå‡ºå¦‚ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;bindServiceCommonåˆ°IActivityManagerçš„è°ƒç”¨ä¸­ï¼Œæ˜¯å¦‚ä½•è·å–åˆ°ActivityManagerServiceçš„ï¼Ÿ&lt;/li&gt;
&lt;li&gt;AMSä¸­å¦‚ä½•è·å–ApplicationThreadå¹¶ä¸ä¹‹é€šè®¯ï¼Ÿ
&lt;ul&gt;
&lt;li&gt;ApplicatoinThreadçš„ç”¨é€”ï¼ŸApplicationThreadè¿è¡Œçš„è¿›ç¨‹æ˜¯å“ªä¸ªï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹å¦‚ä½•å¯åŠ¨-å³AMSå¦‚ä½•åˆ›å»ºAPP:serverè¿›ç¨‹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Serviceå¦‚ä½•å¯åŠ¨ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Serviceå¦‚ä½•ç»‘å®šï¼Ÿ
&lt;ul&gt;
&lt;li&gt;ServiceConnection çš„å›è°ƒæ–¹æ³•ä½•æ—¶ä½¿ç”¨ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="é—®é¢˜è§£ç­”æ±‡æ€»"&gt;é—®é¢˜è§£ç­”æ±‡æ€»&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†ç›¸å…³é—®é¢˜çš„ç»“è®ºæå‰åˆ°æ­¤å°èŠ‚ï¼Œä¾¿äºåç»­ä»æ¯”è¾ƒæŠ½è±¡çš„å±‚æ¬¡ä¸Šæ¥è¿›è¡Œå¤ä¹ åŠé¢„è§ˆï¼›&lt;/p&gt;
&lt;h4 id="appè¿›ç¨‹å¦‚ä½•è·å–ams"&gt;APPè¿›ç¨‹å¦‚ä½•è·å–AMSï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;APPè¿›ç¨‹ä¸­é€šè¿‡ &lt;code&gt;ServiceManager.getService(Context.ACTIVITY_SERVICE)&lt;/code&gt; è·å–çš„ActivityManagerServiceçš„å®¢æˆ·ç«¯æ“ä½œä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯¥å¯¹è±¡ä½äºAPPè¿›ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡ï¼ˆé€šè¿‡Binderè¿›ç¨‹é—´é€šä¿¡ï¼‰æ¥è¦æ±‚ï¼ˆä½äºsystem_processä¸­ï¼‰çš„ActivityManagerServiceè¿›è¡Œå¯¹åº”çš„æœåŠ¡æ“ä½œï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="amså¦‚ä½•è·å–applicationthread"&gt;AMSå¦‚ä½•è·å–ApplicationThreadï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;APPè¿›ç¨‹åœ¨binderSericeæ—¶ï¼Œå°†è‡ªå·±è¿›ç¨‹ä¸­çš„ApplicationThreadå–å‡ºï¼Œé€šè¿‡Binderæœºåˆ¶ä¼ é€’ç»™AMSè¿›ç¨‹ï¼Œä¼ é€’è¿‡ç¨‹ä¸­ä¼šè½¬æ¢æˆä¸€ä¸ªProxyå¯¹è±¡ï¼›&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ActivityManager.&lt;span style="color:#a6e22e"&gt;getService&lt;/span&gt;().&lt;span style="color:#a6e22e"&gt;bindIsolatedService&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mMainThread.&lt;span style="color:#a6e22e"&gt;getApplicationThread&lt;/span&gt;(), getActivityToken(), service,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; service.&lt;span style="color:#a6e22e"&gt;resolveTypeIfNeeded&lt;/span&gt;(getContentResolver()),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sd, flags, instanceName, getOpPackageName(), user.&lt;span style="color:#a6e22e"&gt;getIdentifier&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æœåŠ¡å¦‚ä½•ç»‘å®šæœåŠ¡å¦‚ä½•å¯åŠ¨è¿›ç¨‹å¦‚ä½•å¯åŠ¨"&gt;æœåŠ¡å¦‚ä½•ç»‘å®šï¼ŸæœåŠ¡å¦‚ä½•å¯åŠ¨ï¼Ÿè¿›ç¨‹å¦‚ä½•å¯åŠ¨ï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿›ç¨‹å¯åŠ¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œçš„æœåŠ¡éœ€è¦å…ˆå°†è¿›ç¨‹å¯åŠ¨ï¼Œè¿›ç¨‹çš„å¯åŠ¨æ˜¯é€šè¿‡APPè¿›ç¨‹ï¼Œè¯·æ±‚ç³»ç»Ÿè¿›ç¨‹ä¸­çš„AMSæ¥æ‰§è¡Œï¼Œé€šè¿‡AMSçš„&lt;code&gt;startProcessLocked&lt;/code&gt;æ–¹æ³•å¯åŠ¨è¿›ç¨‹ï¼Œæœ€ç»ˆä¼šé€šè¿‡socketæ¥å£è¯·æ±‚zygoteè¿›ç¨‹æ¥å¯åŠ¨è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¯åŠ¨æ—¶ä¼šæŒ‡å®šjavaçš„å…¥å£ç‚¹ä¸ºActivityThreadï¼Œå³è¿›ç¨‹å¯åŠ¨åä¼šè¿è¡ŒActivityThreadçš„mainæ–¹æ³•ï¼›&lt;/li&gt;
&lt;li&gt;AMSä¸­ä¼šè®°å½•å¯åŠ¨çš„è¿›ç¨‹è®°å½•ï¼ˆProcessRecordï¼‰ï¼Œå¯¹åº”çš„ProcessRecordä¸­ä¼šè®°å½•è¿›ç¨‹å¯¹åº”çš„ApplicationThreadï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å¯åŠ¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœåŠ¡çš„å¯åŠ¨éœ€è¦è¯·æ±‚AMSæ¥å®Œæˆ&lt;/li&gt;
&lt;li&gt;å¯åŠ¨æ—¶éœ€è¦å…ˆé€šè¿‡PIDè·å–è¦å¯åŠ¨åˆ°çš„ProcessRecordï¼Œé€šè¿‡ProcessRecordä¸­è®°å½•çš„ApplicationThreadæ¥ä¸å¯¹åº”çš„è¿›ç¨‹é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;AMSé€šè¿‡ApplicationThreadæ¥é€šçŸ¥å¯¹åº”çš„è¿›ç¨‹åˆ›å»ºæœåŠ¡ï¼ŒApplicationThreadä½œä¸ºé€šä¿¡çš„æ¥å£ï¼Œå®é™…ä¸Šæœ€ç»ˆä¼šé€šè¿‡ActivityThreadçš„handleCreateServiceæ¥åˆ›å»ºæœåŠ¡çš„å®ä¾‹ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡åˆ›å»ºæ—¶ï¼Œæ˜¯åœ¨APPè¿›ç¨‹ï¼ˆå¯èƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼‰ä¸­è¿›è¡Œçš„ï¼Œéœ€è¦é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½å¯¹åº”çš„Serviceçš„ç±»ï¼ŒåŒæ—¶æ„é€ ç›¸åº”çš„ä¸Šä¸‹æ–‡åŠèµ„æºå¯¹è±¡ç­‰ï¼Œç„¶åæ„é€ å¯¹åº”çš„å®ä¾‹ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡åˆ›å»ºæˆåŠŸåï¼Œä¼šè®°å½•åˆ°ActivityThreadçš„ä¸€ä¸ªServiceåˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿åç»­ç®¡ç†ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡ç»‘å®š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç»‘å®šå…ˆåœ¨APPè¿›ç¨‹ä¸­ï¼Œé€šè¿‡AMSä»£ç†å¯¹è±¡å‘èµ·è¯·æ±‚ï¼Œç”±AMSæ¥å®‰æ’bindï¼ˆ&lt;strong&gt;ActivityManagerService.bindIsolatedService&lt;/strong&gt;ï¼‰;&lt;/li&gt;
&lt;li&gt;ç„¶åå…·ä½“çš„ç»‘å®šåŠ¨ä½œè¿˜æ˜¯é€šè¿‡IApplicationThreadå®‰æ’åˆ°APPçš„Serviceè¿›ç¨‹ä¸­ï¼Œæœ€ç»ˆæ‰§è¡Œçš„&lt;code&gt;ActivityThread#handleBindService&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;åœ¨APPè¿›ç¨‹ä¸­ï¼Œä¼šå°†Serviceå–å‡ºï¼Œç„¶åè°ƒç”¨å…¶onBindæ–¹æ³•æ¥è·å–IBinderè¿œç¨‹æ“ä½œå¯¹è±¡ï¼›&lt;/li&gt;
&lt;li&gt;ä¹‹åå†é€šè¿‡AMSè°ƒç”¨ &lt;code&gt;ActivityManagerService#publishService&lt;/code&gt; æ¥é€šçŸ¥ç»‘å®šæˆåŠŸçš„é€šçŸ¥åˆ°å¯¹åº”çš„éœ€è¦ç»‘å®šæœåŠ¡çš„APPè¿›ç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;publishServiceä¸­ä¼šè°ƒç”¨ServiceConnectionçš„onServiceConnectedæ–¹æ³•é€šçŸ¥æœåŠ¡è¿æ¥äº†ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ•´ä½“æµç¨‹æ€»ç»“"&gt;æ•´ä½“æµç¨‹æ€»ç»“&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾…è¡¥å……&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="è¯¦ç»†åˆ†æè§£ç­”é—®é¢˜"&gt;è¯¦ç»†åˆ†æè§£ç­”é—®é¢˜&lt;/h2&gt;
&lt;h3 id="appè¿›ç¨‹ä¸­å¦‚ä½•è·å–ams"&gt;APPè¿›ç¨‹ä¸­å¦‚ä½•è·å–AMSï¼Ÿ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å…ˆé€é¡¹æŸ¥çœ‹å„ä¸ªå°èŠ‚ï¼Œæœ€åå†çœ‹æ­¤å¤„çš„æ€»ç»“ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åç»­ç›´æ¥æŸ¥çœ‹æ€»ç»“æ¥å¿«é€Ÿè·å–ç»“è®ºï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;==æ€»ç»“ï¼š==&lt;/p&gt;</description></item><item><title>æ­å»ºAndroidæºç å·¥ä½œç¯å¢ƒ</title><link>https://hanlyjiang.github.io/posts/%E6%90%AD%E5%BB%BAandroid%E6%BA%90%E7%A0%81%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83/</link><pubDate>Thu, 08 Apr 2021 10:18:50 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/%E6%90%AD%E5%BB%BAandroid%E6%BA%90%E7%A0%81%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83/</guid><description>&lt;ul&gt;
&lt;li&gt;ç®€å•ä»‹ç»ç³»ç»Ÿæ¶æ„ã€ç¼–è¯‘ç¯å¢ƒçš„æ­å»º&lt;/li&gt;
&lt;li&gt;ç®€å•ä»‹ç»åˆ©ç”¨ AndroidStudio è°ƒè¯• system_process è¿›ç¨‹çš„æ–¹æ³•åŠç¼–è¯‘æ›´æ–°éƒ¨åˆ†ç³»ç»Ÿæ¨¡å—çš„æ–¹å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="androidç³»ç»Ÿæ¶æ„"&gt;Androidç³»ç»Ÿæ¶æ„&lt;/h2&gt;
&lt;p&gt;Android ç³»ç»Ÿæ¶æ„å¦‚ä¸‹ä¸¤å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210401092831" loading="lazy" src="https://s2.loli.net/2022/05/26/iVWSvDPlA9I4afd.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210401092925" loading="lazy" src="https://s2.loli.net/2022/05/26/3KYlCuj5zXc9EUs.png"&gt;&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨æ¡†æ¶&lt;/strong&gt;ã€‚åº”ç”¨æ¡†æ¶æœ€å¸¸è¢«åº”ç”¨å¼€å‘è€…ä½¿ç”¨ã€‚å¾ˆå¤šæ­¤ç±» API éƒ½å¯ä»¥ç›´æ¥æ˜ å°„åˆ°åº•å±‚ HAL æ¥å£ï¼Œå¹¶å¯æä¾›ä¸å®ç°é©±åŠ¨ç¨‹åºç›¸å…³çš„å®ç”¨ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Binder IPC&lt;/strong&gt;ã€‚Binder è¿›ç¨‹é—´é€šä¿¡ (IPC) æœºåˆ¶å…è®¸åº”ç”¨æ¡†æ¶è·¨è¶Šè¿›ç¨‹è¾¹ç•Œå¹¶è°ƒç”¨ Android ç³»ç»ŸæœåŠ¡ä»£ç ï¼Œè¿™ä½¿å¾—é«˜çº§æ¡†æ¶ API èƒ½ä¸ Android ç³»ç»ŸæœåŠ¡è¿›è¡Œäº¤äº’ã€‚åœ¨åº”ç”¨æ¡†æ¶çº§åˆ«ï¼Œå¼€å‘è€…æ— æ³•çœ‹åˆ°æ­¤ç±»é€šä¿¡çš„è¿‡ç¨‹ï¼Œä½†ä¸€åˆ‡ä¼¼ä¹éƒ½åœ¨â€œæŒ‰éƒ¨å°±ç­åœ°è¿è¡Œâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»ŸæœåŠ¡&lt;/strong&gt;ã€‚ç³»ç»ŸæœåŠ¡æ˜¯ä¸“æ³¨äºç‰¹å®šåŠŸèƒ½çš„æ¨¡å—åŒ–ç»„ä»¶ï¼Œä¾‹å¦‚çª—å£ç®¡ç†å™¨ã€æœç´¢æœåŠ¡æˆ–é€šçŸ¥ç®¡ç†å™¨ã€‚åº”ç”¨æ¡†æ¶ API æ‰€æä¾›çš„åŠŸèƒ½å¯ä¸ç³»ç»ŸæœåŠ¡é€šä¿¡ï¼Œä»¥è®¿é—®åº•å±‚ç¡¬ä»¶ã€‚Android åŒ…å«ä¸¤ç»„æœåŠ¡ï¼šâ€œç³»ç»Ÿâ€ï¼ˆè¯¸å¦‚çª—å£ç®¡ç†å™¨å’Œé€šçŸ¥ç®¡ç†å™¨ä¹‹ç±»çš„æœåŠ¡ï¼‰å’Œâ€œåª’ä½“â€ï¼ˆä¸æ’­æ”¾å’Œå½•åˆ¶åª’ä½“ç›¸å…³çš„æœåŠ¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)&lt;/strong&gt;ã€‚HAL å¯å®šä¹‰ä¸€ä¸ªæ ‡å‡†æ¥å£ä»¥ä¾›ç¡¬ä»¶ä¾›åº”å•†å®ç°ï¼Œè¿™å¯è®© Android å¿½ç•¥è¾ƒä½çº§åˆ«çš„é©±åŠ¨ç¨‹åºå®ç°ã€‚å€ŸåŠ© HALï¼Œç¡¬ä»¶å¼€å‘è€…å¯ä»¥é¡ºåˆ©å®ç°ç›¸å…³åŠŸèƒ½ï¼Œè€Œä¸ä¼šå½±å“æˆ–æ›´æ”¹æ›´é«˜çº§åˆ«çš„ç³»ç»Ÿã€‚HAL å®ç°ä¼šè¢«å°è£…æˆæ¨¡å—ï¼Œå¹¶ä¼šç”± Android ç³»ç»Ÿé€‚æ—¶åœ°åŠ è½½ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜…&lt;a href="https://source.android.google.cn/devices/architecture/hal?hl=zh-cn"&gt;ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linux å†…æ ¸&lt;/strong&gt;ã€‚å¼€å‘è®¾å¤‡é©±åŠ¨ç¨‹åºä¸å¼€å‘å…¸å‹çš„ Linux è®¾å¤‡é©±åŠ¨ç¨‹åºç±»ä¼¼ã€‚Android ä½¿ç”¨çš„ Linux å†…æ ¸ç‰ˆæœ¬åŒ…å«ä¸€äº›ç‰¹æ®Šçš„è¡¥å……åŠŸèƒ½ï¼Œä¾‹å¦‚ä½å†…å­˜ç»ˆæ­¢å®ˆæŠ¤è¿›ç¨‹ï¼ˆä¸€ä¸ªå†…å­˜ç®¡ç†ç³»ç»Ÿï¼Œå¯æ›´ä¸»åŠ¨åœ°ä¿ç•™å†…å­˜ï¼‰ã€å”¤é†’é”å®šï¼ˆä¸€ç§ &lt;a href="https://developer.android.google.cn/reference/android/os/PowerManager.html?hl=zh-cn"&gt;&lt;code&gt;PowerManager&lt;/code&gt;&lt;/a&gt; ç³»ç»ŸæœåŠ¡ï¼‰ã€Binder IPC é©±åŠ¨ç¨‹åºï¼Œä»¥åŠå¯¹ç§»åŠ¨åµŒå…¥å¼å¹³å°æ¥è¯´éå¸¸é‡è¦çš„å…¶ä»–åŠŸèƒ½ã€‚è¿™äº›è¡¥å……åŠŸèƒ½ä¸»è¦ç”¨äºå¢å¼ºç³»ç»ŸåŠŸèƒ½ï¼Œä¸ä¼šå½±å“é©±åŠ¨ç¨‹åºå¼€å‘ã€‚å¯ä»¥ä½¿ç”¨ä»»æ„ç‰ˆæœ¬çš„å†…æ ¸ï¼Œåªè¦å®ƒæ”¯æŒæ‰€éœ€åŠŸèƒ½ï¼ˆå¦‚ Binder é©±åŠ¨ç¨‹åºï¼‰å³å¯ã€‚ä¸è¿‡å»ºè®®ä½¿ç”¨ Android å†…æ ¸çš„æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜…&lt;a href="https://source.android.google.cn/setup/building-kernels?hl=zh-cn"&gt;æ„å»ºå†…æ ¸&lt;/a&gt;ä¸€æ–‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸Šéƒ¨åˆ†å†…å®¹æ¥æºï¼š &lt;a href="https://source.android.google.cn/devices/architecture?hl=zh-cn"&gt;https://source.android.google.cn/devices/architecture?hl=zh-cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="æ­å»ºå¼€å‘ç¯å¢ƒå¹¶ç¼–è¯‘æºç "&gt;æ­å»ºå¼€å‘ç¯å¢ƒå¹¶ç¼–è¯‘æºç &lt;/h2&gt;
&lt;p&gt;æœ¬èŠ‚å°†è®¨è®º Android 11 æºç ä¸‹è½½å’Œç¼–è¯‘çš„æ–¹æ³•ã€AndroidStudioå¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ï¼ŒåŠ system_process è¿›ç¨‹çš„è°ƒè¯•æ–¹æ³•ç­‰ç›¸å…³çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;h3 id="é€‰æ‹©åˆ†æ”¯"&gt;é€‰æ‹©åˆ†æ”¯&lt;/h3&gt;
&lt;p&gt;å¯å‚è€ƒ source.android.google.cn çš„æ–‡æ¡£ &lt;a href="https://source.android.google.cn/setup/start/build-numbers"&gt;ä»£å·ã€æ ‡è®°å’Œ Build å·&lt;/a&gt; ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æœ€æ–°çš„ç‰ˆæœ¬åŠæ ‡è®°å¦‚ä¸‹ï¼š&lt;/p&gt;</description></item><item><title>[è¯‘]Androidå¼€å‘æ‰€éœ€è¦çš„çŸ©é˜µçŸ¥è¯†</title><link>https://hanlyjiang.github.io/posts/android%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E7%9F%A9%E9%98%B5%E7%9F%A5%E8%AF%86/</link><pubDate>Mon, 08 Feb 2021 10:38:22 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/android%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E7%9F%A9%E9%98%B5%E7%9F%A5%E8%AF%86/</guid><description>&lt;p&gt;ç¿»è¯‘å›½å¤–æ–‡ç« ï¼Œè¯¥æ–‡ç« ä»‹ç»äº†Androidå¼€å‘ä¸­çŸ©é˜µç›¸å…³çš„æ•°å­¦çŸ¥è¯†ï¼ŒåŒ…æ‹¬çŸ©é˜µæ˜¯ä»€ä¹ˆï¼ŸçŸ©é˜µåŠ æ³•åŠä¹˜æ³•è¿ç®—ï¼Œ2x2çŸ©é˜µçš„å˜æ¢ï¼Œæœ€åæ¼”è¿›ä¸ºAndroidä¸­ä½¿ç”¨çš„3x3çŸ©é˜µã€‚æ–‡ä¸­å›¾ç‰‡åŠåŠ¨å›¾æ¯”è¾ƒå¤šï¼Œç›¸å¯¹å¥½æ‡‚ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttps://i-rant.arnaudbos.com/matrices-for-developers/#technical-challenge&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‡ å‘¨å‰ï¼Œæˆ‘åœ¨ä¸€ä¸ªandroid-user-groupé¢‘é“ä¸Šï¼Œæœ‰äººé—®ä¸€ä¸ªå…³äºAndroidçš„Matrix.postScaleï¼ˆsxï¼Œsyï¼Œpxï¼Œpyï¼‰æ–¹æ³•åŠå…¶å·¥ä½œåŸç†çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒâ€œéš¾ä»¥æŒæ¡â€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨2016å¹´åˆï¼Œæˆ‘åœ¨ä¸€ä¸ªAndroidåº”ç”¨ç¨‹åºä¸Šå®Œæˆäº†ä¸€ä¸ªè‡ªç”±é¡¹ç›®ï¼Œåœ¨å…¶ä¸­æˆ‘å¿…é¡»å®ç°ä¸€ä¸ªä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·åœ¨è´­ä¹°å¹¶ä¸‹è½½äº†å²©å£çš„æ•°å­—åœ°å½¢åï¼Œå¿…é¡»èƒ½å¤ŸæŸ¥çœ‹ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆçš„å²©å£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‚¬å´–çš„ç…§ç‰‡ï¼Œ&lt;/li&gt;
&lt;li&gt;åŒ…å«çˆ¬å¡è·¯çº¿å åŠ å±‚çš„SVGæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”¨æˆ·å¿…é¡»å…·æœ‰éšæ„å¹³ç§»å’Œç¼©æ”¾çš„èƒ½åŠ›ï¼Œå¹¶ä¸”å¿…é¡»å…·æœ‰â€œè·Ÿéšâ€å›¾ç‰‡çš„è·¯çº¿å±‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;APPæˆªå›¾1&lt;/th&gt;
&lt;th&gt;APPæˆªå›¾2&lt;/th&gt;
&lt;th&gt;APPæˆªå›¾3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;td&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;td&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="æŠ€æœ¯æŒ‘æˆ˜"&gt;æŠ€æœ¯æŒ‘æˆ˜&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†è®©æ”€çˆ¬è·¯çº¿çš„å›¾å±‚èƒ½å¤Ÿè·Ÿéšç”¨æˆ·çš„æ‰‹åŠ¿æ“ä½œï¼Œæˆ‘å‘ç°æˆ‘ä¸å¾—ä¸é‡è½½Android ImageViewï¼Œåœ¨Canvasä¸Šç»˜åˆ¶å¹¶å¤„ç†æ‰‹æŒ‡æ‰‹åŠ¿ã€‚ ä½œä¸ºä¸€åä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼šæˆ‘æœç´¢äº†Stack OverflowğŸ˜… æˆ‘å‘ç°éœ€è¦&lt;code&gt;android.graphics.Matrix&lt;/code&gt;ç±»è¿›è¡Œ2Dè½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç±»çš„é—®é¢˜åœ¨äºï¼Œä»æ–¹æ³•åç§°æ¥è¯´ï¼Œä½ èƒ½å¾ˆæ¸…æ¥šçš„äº†è§£å®ƒçš„ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ²¡æœ‰ä¸€å®šçš„æ•°å­¦èƒŒæ™¯çŸ¥è¯†ï¼Œä½ å¾ˆéš¾äº†è§£å®ƒèƒŒåæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæ¯”æ–¹è¯´ä¸‹é¢æ˜¯matrixçš„æŸä¸ªæ–¹æ³•çš„APIæ–‡æ¡£è¯´æ˜ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;boolean postScale (float sx, float sy, float px, float py)&lt;/p&gt;
&lt;p&gt;Postconcats the matrix with the specified scale. Mâ€™ = S(sx, sy, px, py) * M&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»æ–‡æ¡£çœ‹èµ·å®ƒå¯ä»¥é€šè¿‡æŸäº›å‚æ•°ç¼©æ”¾æŸäº›ä¸œè¥¿ï¼Œå¹¶é€šè¿‡æŸç§ä¹˜æ³•æ¥å®Œæˆå®ƒã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯æœ‰å¾ˆå¤šç–‘é—®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒåˆ°åº•æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ ç¼©æ”¾çŸ©é˜µï¼Ÿ é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæˆ‘æƒ³ç¼©æ”¾ç”»å¸ƒâ€¦&lt;/li&gt;
&lt;li&gt;æˆ‘åº”è¯¥ä½¿ç”¨preScaleè¿˜æ˜¯postScaleï¼Ÿ å½“æˆ‘ä»ä»æ‰‹åŠ¿æ£€æµ‹ä»£ç è·å–è¾“å…¥å‚æ•°ï¼Œç„¶åè¿›å…¥å°è¯•å’Œé”™è¯¯çš„æ— é™å¾ªç¯æ—¶ï¼Œæ˜¯å¦éœ€è¦å°è¯•åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å¼€å‘è¿‡ç¨‹çš„è¿™ä¸€åˆ»ï¼Œæˆ‘æ„è¯†åˆ°åœ¨å®Œæˆå¤§å­¦çš„å¤´ä¸¤å¹´åï¼Œæˆ‘éœ€è¦é‡æ–°å­¦ä¹ å¾ˆå¤šå¹´å‰å…³äºçŸ©é˜µçš„åŸºæœ¬æ•°å­¦æŠ€èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœå¯»ç½‘ç»œèµ„æ–™æ—¶ï¼Œæˆ‘å‘ç°äº†å¾ˆå¤šä¸é”™çš„èµ„æºï¼Œå¹¶ä¸”èƒ½å¤Ÿå†æ¬¡å­¦ä¹ ä¸€äº›æ•°å­¦çŸ¥è¯†ã€‚ é€šè¿‡å°†æˆ‘çš„ç†è§£åº”ç”¨åˆ°Javaå’ŒAndroidä¸­çš„ä»£ç ï¼Œå®ƒè¿˜å¸®åŠ©æˆ‘è§£å†³äº†2Dè½¬æ¢é—®é¢˜ã€‚ å› æ­¤ï¼Œè€ƒè™‘åˆ°æˆ‘åœ¨ä¸Šé¢æåˆ°çš„é¢‘é“ä¸Šè¿›è¡Œçš„è®¨è®ºï¼Œä¼¼ä¹æˆ‘ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨çŸ©é˜µä¸­è‹¦è‹¦æŒ£æ‰çš„äººï¼Œè¯•å›¾å¼„æ˜ç™½è¿™ä¸€ç‚¹ï¼Œå¹¶åœ¨Androidçš„Matrixç±»å’Œæ–¹æ³•ä¸­ä½¿ç”¨è¿™äº›æŠ€èƒ½ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘ä¼šå†™ä¸€ç¯‡æ–‡ç« ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å…³äºçŸ©é˜µçš„ï¼Œç¬¬äºŒéƒ¨åˆ†â€œ&lt;a href="https://i-rant.arnaudbos.com/2d-transformations-android-java/"&gt;ä½¿ç”¨Androidå’ŒJavaè¿›è¡Œ2Dè½¬æ¢&lt;/a&gt;â€æ˜¯å…³äºå¦‚ä½•åœ¨Javaå’ŒAndroidä¸Šå°†å…³äºçŸ©é˜µçš„çŸ¥è¯†åº”ç”¨åˆ°ä»£ç ä¸­ã€‚&lt;/p&gt;
&lt;h2 id="matrixæ˜¯ä»€ä¹ˆ"&gt;Matrixæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æˆ‘åœ¨å¯æ±—å­¦é™¢ï¼ˆKhan Academyï¼‰ä¸Šå‘ç°ä¸€é—¨&lt;a href="https://www.khanacademy.org/math/algebra-home/alg-matrices"&gt;å…³äºçŸ©é˜µçš„å¾ˆå¥½çš„ä»£æ•°è¯¾ç¨‹&lt;/a&gt;ã€‚&lt;/p&gt;</description></item><item><title>ç¼–å†™ä¸€ä¸ªAndroid Gradleæ’ä»¶</title><link>https://hanlyjiang.github.io/posts/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAandroid-gradle%E6%8F%92%E4%BB%B6/</link><pubDate>Sun, 20 Sep 2020 10:18:50 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAandroid-gradle%E6%8F%92%E4%BB%B6/</guid><description>&lt;p&gt;gradleæœ‰ä¸‰ç§ç¼–å†™æ’ä»¶çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨åœ¨é¡¹ç›®ä¸­çš„buildSrcæ¨¡å—ä¸­ç¼–å†™æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªåº”ç”¨äºAndroidé¡¹ç›®çš„æ ¹æ®flavorè¿‡æ»¤soåº“çš„gradleæ’ä»¶ï¼›&lt;/p&gt;
&lt;h2 id="æ¦‚è¿°"&gt;æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;è‡ªå®šä¹‰gradleæ’ä»¶æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼ˆ&lt;a href="https://docs.gradle.org/current/userguide/custom_plugins.html#sec:packaging_a_plugin"&gt;ğŸ”—é“¾æ¥&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨buildscriptä¸­ç›´æ¥ç¼–å†™ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨buildSrcé¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ä»£ç ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨ç‹¬ç«‹çš„é¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ä»£ç ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨buildSrcæ–¹å¼å®ç°ä¸€ä¸ªgradleæ’ä»¶ã€‚&lt;/p&gt;
&lt;h2 id="æ–°å»º-buildsrc-module"&gt;æ–°å»º buildSrc module&lt;/h2&gt;
&lt;p&gt;gradleä¼šåœ¨é¡¹ç›®ä¸­å¯»æ‰¾åç§°ä¸ºbuildSrcæ¨¡å—ï¼Œå°†å…¶åŠ è½½ä¸ºgradleçš„æ’ä»¶ä»£ç ç›®å½•ã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥é€šè¿‡èœå•æ–°å»ºä¸€ä¸ªåä¸º buildSrc çš„java/kotlinæ¨¡å—ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨build.gradleä¸­æ·»åŠ ç›¸å…³çš„plugin(java-gradle-plugin)åŠä¾èµ–ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;plugins &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id &lt;span style="color:#e6db74"&gt;&amp;#39;java&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id &lt;span style="color:#e6db74"&gt;&amp;#39;java-gradle-plugin&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id &lt;span style="color:#e6db74"&gt;&amp;#34;org.jetbrains.kotlin.jvm&amp;#34;&lt;/span&gt; version &lt;span style="color:#e6db74"&gt;&amp;#39;1.3.61&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;group &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;io.github.hanlyjiang.gradle&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;version &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;0.0.2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dependencies &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; testCompile group: &lt;span style="color:#e6db74"&gt;&amp;#39;junit&amp;#39;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; name: &lt;span style="color:#e6db74"&gt;&amp;#39;junit&amp;#39;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; version: &lt;span style="color:#e6db74"&gt;&amp;#39;4.12&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ androidç›¸å…³build toolsä¾èµ–ï¼Œä»¥ä¾¿ä½¿ç”¨ android gradle ç›¸å…³çš„API
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; compile &lt;span style="color:#e6db74"&gt;&amp;#39;com.android.tools.build:gradle:3.2.0&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¼–å†™æ’ä»¶"&gt;ç¼–å†™æ’ä»¶&lt;/h2&gt;
&lt;h3 id="éœ€æ±‚ç®€ä»‹"&gt;éœ€æ±‚ç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;**åº”ç”¨åœºæ™¯ï¼š**æˆ‘ä»¬çš„äº§å“ä¸­é›†æˆäº†ä¸¤ç§VPN SDKï¼Œä½†æ˜¯å…·ä½“åˆ°æ¯ä¸ªé¡¹ç›®ä¸Šé¢ï¼Œéƒ½åªä¼šè½åœ°åˆ°å…·ä½“çš„ä¸€ç§ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æ’é™¤å¯¹åº”çš„SDKçš„SOåº“ä»¥å‡å°APPåŒ…å¤§å°ï¼Œä¸åŒçš„åœ°åŒºçš„æ‰“åŒ…é…ç½®é€šè¿‡flavoræ¥è¿›è¡ŒåŒºåˆ†é…ç½®ï¼Œå³æ¯ä¸ªåœ°åŒºä¼šå¯¹åº”ä¸åŒçš„flavorï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éœ€æ±‚æå–&lt;/strong&gt;ï¼š è¿™é‡Œå®é™…ä¸Šæˆ‘ä»¬éœ€è¦çš„æ˜¯èƒ½å¤Ÿæ ¹æ®flavorï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ç§»é™¤æŒ‡å®šçš„soæ–‡ä»¶ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°æ€è·¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;flavoré…ç½®æ–¹å¼ï¼šåœ¨flavorä¸­é…ç½®ä¸€ä¸ªbuildConfigFieldå­—æ®µï¼Œç”¨äºæŒ‡å®šæˆ‘ä»¬çš„flavoréœ€è¦çš„é…ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// é…ç½®VPNç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;buildConfigField &lt;span style="color:#e6db74"&gt;&amp;#34;String&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;VPN_TYPE&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;\&amp;#34;$VpnType.SANG_FOR\&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ’ä»¶é…ç½®ï¼šæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªso_excludeé…ç½®æ¥æŒ‡å®šå…·ä½“çš„excludeè§„åˆ™ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;buildConfigFieldKey ç”¨äºæŒ‡å®šä¹‹å‰åœ¨flavorä¸­å®šä¹‰çš„é…ç½®ï¼›&lt;/li&gt;
&lt;li&gt;configMap ä¸ºä¸€ä¸ªé…ç½®è¡¨ï¼ŒæŒ‡å®šä¸Šé¢çš„å­—æ®µå¯å–çš„å€¼ï¼Œå³å¯¹åº”å€¼åº”è¯¥excludeçš„soæ–‡ä»¶åˆ—è¡¨ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;so_exclude &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ä½¿ç”¨VPN_TYPE æ¥è®¾ç½®soè¿‡æ»¤çš„è§„åˆ™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildConfigFieldKey &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;VPN_TYPE&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; configMap &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;(&lt;/span&gt;VpnType&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;H3C_iNode&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;name&lt;/span&gt;&lt;span style="color:#f92672"&gt;()):&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ–°åä¸‰è¿‡æ»¤æ·±ä¿¡æœçš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;(&lt;/span&gt;VpnType&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;SANG_FOR&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;name&lt;/span&gt;&lt;span style="color:#f92672"&gt;())&lt;/span&gt; &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·±ä¿¡æœè¿‡æ»¤æ–°åä¸‰çš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libies.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;(&lt;/span&gt;VpnType&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;NONE&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;name&lt;/span&gt;&lt;span style="color:#f92672"&gt;())&lt;/span&gt; &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¦‚é…ç½®æˆ NONEï¼Œåˆ™è¿‡æ»¤æ‰æ‰€æœ‰çš„VPNçš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// æ·±ä¿¡æœçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// inodeçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libies.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å®šä¹‰æ’ä»¶åŠä½¿ç”¨æ’ä»¶ç®€ä»‹"&gt;å®šä¹‰æ’ä»¶åŠä½¿ç”¨æ’ä»¶ç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ’ä»¶éœ€è¦ç»§æ‰¿ &lt;code&gt;org.gradle.api.Plugin&lt;/code&gt;ï¼Œå¯åœ¨Pluginå¯¹æ„å»ºæµç¨‹è¿›è¡Œè‡ªå®šä¹‰ï¼ˆå¦‚ï¼šåˆ›å»ºä»»åŠ¡ï¼Œå®šä¹‰ä»»åŠ¡å…³ç³»ï¼Œä¿®æ”¹å·²æœ‰ä»»åŠ¡åŠ¨ä½œç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;æ’ä»¶å¦‚æœéœ€è¦èƒ½å¤Ÿè¯»å–ä¸€äº›é…ç½®ï¼Œå¯é€šè¿‡ &lt;code&gt;project.extensions.create&lt;/code&gt; æ¥ä»build.gradleä¸­æå–&lt;/li&gt;
&lt;li&gt;å¦‚éœ€åœ¨è‡ªå·±çš„ androidä»£ç æ¨¡å—ä¸­ä½¿ç”¨æ’ä»¶ï¼Œé€šè¿‡ &lt;code&gt;apply plugin: æ’ä»¶ç±»å¼•ç”¨å³å¯&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ’ä»¶å®ç°"&gt;æ’ä»¶å®ç°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ’ä»¶çš„å®ç°å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;è¯»å– so_exclude é…ç½®ï¼Œå­˜å‚¨åˆ° extensionï¼ˆç±»å‹ä¸º FlavorSoExcludePluginExtension ï¼‰ä¸­&lt;/li&gt;
&lt;li&gt;è¯»å– android çš„é…ç½®ï¼Œæ‰¾åˆ° AppExtensionç±»å‹çš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨äº† &lt;code&gt;apply application&lt;/code&gt; çš„æ¨¡å—çš„é…ç½®ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­åªæœ‰ä¸€ä¸ªappæ¨¡å—åº”ç”¨æ­¤é…ç½®-å³æˆ‘ä»¬çš„apkæ¨¡å—ï¼›&lt;/li&gt;
&lt;li&gt;éå†æ‰€æœ‰å˜ä½“ï¼Œè·å–å¯¹åº”å˜ä½“çš„ so_exclude å¯¹åº”çš„é…ç½®å­—æ®µçš„å€¼ï¼Œå»ºç«‹flavoråˆ°é…ç½®å€¼çš„æ˜ å°„è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹ packageApplication ä»»åŠ¡ï¼Œè®©å…¶åœ¨æ‰§è¡Œä¹‹å‰å³åˆ é™¤å¾…æ‰“åŒ…ä¸´æ—¶ç›®å½•ä¸­çš„å¯¹åº”soæ–‡ä»¶ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;package&lt;/span&gt; io.github.hanlyjiang.gradle.plugin.soexclude
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; com.android.build.gradle.AppExtension
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; com.android.build.gradle.api.ApkVariantOutput
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.Plugin
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.Project
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.logging.LogLevel
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.logging.Logger
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.logging.Logging
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; java.io.File
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * so æ’ä»¶çš„ gradle é…ç½®å®ä½“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;open&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;FlavorSoExcludePluginExtension&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * so è¿‡æ»¤é…ç½®è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; configMap: Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt;? = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * é…ç½®å­—æ®µçš„åç§°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; buildConfigFieldKey: String = &lt;span style="color:#a6e22e"&gt;FlavorSoExcludePlugin&lt;/span&gt;.DEFAULT_CONFIG_KEY
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * flavor so æ‰“åŒ…è¿‡æ»¤é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ## ç”¨æ³•è¯´æ˜ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * 1. åœ¨build.gradle ä¸­å¼•å…¥æ’ä»¶ &amp;lt;code&amp;gt;apply plugin: FlavorSoExcludePlugin&amp;lt;/code&amp;gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * 2. æ·»åŠ  so_exclude é…ç½®æ®µï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ```groovy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * so_exclude {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * buildConfigFieldKey = &amp;#34;VPN_TYPE&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * configMap = [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * (VpnType.H3C_iNode.name()): [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ],
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * (VpnType.SANG_FOR.name()) : [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libies.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ],
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * (VpnType.NONE.name()) : [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * // æ·±ä¿¡æœçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * // inodeçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libies.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *```
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * 3. åœ¨flavorçš„é…ç½®ä¸­æ·»åŠ  buildConfigField é…ç½®ï¼Œå¦‚ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ```
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * buildConfigField &amp;#34;String&amp;#34;, &amp;#34;VPN_TYPE&amp;#34;, &amp;#34;\&amp;#34;$VpnType.H3C_iNode\&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ```
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * å…¶ä¸­å­—æ®µçš„åç§°ä¸º ä¹‹å‰ so_exclude ä¸­é…ç½®çš„ `buildConfigFieldKey` å­—æ®µï¼Œå¯¹åº”çš„å€¼ä¸º configMap ä¸­çš„ key ï¼Œå¦‚æ­¤é…ç½®åï¼Œæ‰“åŒ…æ—¶å°±ä¼šå°†configMapå¯¹åº”keyä¸­çš„soåˆ—è¡¨è¿‡æ»¤æ‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @author hanlyjiang 09/20/20 2:42 PM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @version 1.0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;FlavorSoExcludePlugin&lt;/span&gt; : Plugin&amp;lt;Project&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;companion&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; PLUGIN_NAME = &lt;span style="color:#e6db74"&gt;&amp;#34;FlavorSoExcludePlugin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; DEFAULT_CONFIG_KEY = &lt;span style="color:#e6db74"&gt;&amp;#34;SO_EXCLUDE&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; DEBUG = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; logger: Logger = &lt;span style="color:#a6e22e"&gt;Logging&lt;/span&gt;.getLogger(FlavorSoExcludePlugin&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;logInfo&lt;/span&gt;(msg: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logger.log(&lt;span style="color:#a6e22e"&gt;LogLevel&lt;/span&gt;.LIFECYCLE, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;lt;- &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$PLUGIN&lt;/span&gt;&lt;span style="color:#e6db74"&gt;_NAME: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$msg&lt;/span&gt;&lt;span style="color:#e6db74"&gt; -&amp;gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;logDebug&lt;/span&gt;(msg: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (DEBUG) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(msg)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;lateinit&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; extension: FlavorSoExcludePluginExtension
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;override&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;apply&lt;/span&gt;(project: Project) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ è‡ªå·±çš„é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; extension = project.extensions.create(&lt;span style="color:#e6db74"&gt;&amp;#34;so_exclude&amp;#34;&lt;/span&gt;, FlavorSoExcludePluginExtension&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// åˆ›å»ºä¸€ä¸ªæ‰“å°é…ç½®çš„ä»»åŠ¡ï¼Œç”¨äºå®šä¹‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; task = project.tasks.create(&lt;span style="color:#e6db74"&gt;&amp;#34;printConfig&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; task.group = &lt;span style="color:#e6db74"&gt;&amp;#34;soExclude-plugin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; task.doLast {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;-- é…ç½®å­—æ®µï¼šbuildConfigFieldKey= &amp;#34;&lt;/span&gt; + extension.buildConfigFieldKey)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;-- å½“å‰é…ç½®ï¼š&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; extension.configMap&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.keys.forEach { key &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;-- config: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$key&lt;/span&gt;&lt;span style="color:#e6db74"&gt; -- &amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;(key)&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;forEach {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;values: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$it&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;------------------ &amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// è·å–androidçš„é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; androidExtensions = project.extensions.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;android&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt; + androidExtensions.javaClass)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (androidExtensions &lt;span style="color:#66d9ef"&gt;is&lt;/span&gt; AppExtension) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// applicatoinç±»å‹çš„å°±è¿›è¡Œä»»åŠ¡å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; initPackageOptions(project, androidExtensions)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * vpn é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; configMap: MutableMap&amp;lt;String, String&amp;gt; = HashMap()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;initPackageOptions&lt;/span&gt;(project: Project, android: AppExtension) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; project.afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; android.productFlavors.all {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; flavorName = &lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;.name
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logDebug(&lt;span style="color:#e6db74"&gt;&amp;#34;--productFlavors : &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${it.name}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; soExcludeConfig = &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;.buildConfigFields[extension.buildConfigFieldKey]&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; soExcludeConfig = &lt;span style="color:#66d9ef"&gt;value&lt;/span&gt;.replace(&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\&amp;#34;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logDebug(&lt;span style="color:#e6db74"&gt;&amp;#34;--productFlavors : &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$flavorName&lt;/span&gt;&lt;span style="color:#e6db74"&gt;, soExcludeConfig: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$soExcludeConfig&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; configMap[flavorName] = soExcludeConfig
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; android.applicationVariants.all { variant &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logDebug(&lt;span style="color:#e6db74"&gt;&amp;#34;app variant flavorName: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${variant.flavorName}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; flavorName = variant.flavorName
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; configKey = configMap[flavorName]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; variant.outputs.forEach { output &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (output &lt;span style="color:#66d9ef"&gt;is&lt;/span&gt; ApkVariantOutput) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//æ ¸å¿ƒé€»è¾‘ï¼šä¿®æ”¹packageApplicationä»»åŠ¡ï¼Œåœ¨ç”ŸæˆapkåŒ…ä¹‹å‰ï¼Œåˆ é™¤æ‰“åŒ…ä¸´æ—¶ç›®å½•ä¸­çš„soæ–‡ä»¶å³å¯é¿å…æ‰“åŒ…soåˆ°apkä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; output.packageApplication.doFirst {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; output.packageApplication.jniFolders.all {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// jniFolder ç›®å½•ä¸ºæœ€åæ‰“åŒ…apkæ—¶ï¼Œç”¨äºå­˜æ”¾soæ–‡ä»¶çš„ä¸´æ—¶ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;å˜ä½“åç§°: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${variant.flavorName}&lt;/span&gt;&lt;span style="color:#e6db74"&gt; , configKey: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${configKey}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;, jniFolders: &amp;#34;&lt;/span&gt; + &lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;.absoluteFile)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; handleExclude(&lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;, configKey);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;handleExclude&lt;/span&gt;(jniFolder: File?, configKey: String?) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; extension.configMap&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; soExcludeList: List&amp;lt;String&amp;gt;? = &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;(configKey)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; soExcludeList&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; deleteJniSoFiles(jniFolder, *(soExcludeList.toTypedArray()))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;deleteJniSoFiles&lt;/span&gt;(jniFolder: File?, &lt;span style="color:#66d9ef"&gt;vararg&lt;/span&gt; files: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; (item &lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; files) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; file = File(jniFolder, item)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;file&lt;/span&gt;.exists()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; deleteResult = &lt;span style="color:#66d9ef"&gt;file&lt;/span&gt;.delete()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;åˆ é™¤soæ–‡ä»¶ &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$item&lt;/span&gt;&lt;span style="color:#e6db74"&gt; : &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${if (deleteResult) &amp;#34;æˆåŠŸ&amp;#34; else &amp;#34;å¤±è´¥&amp;#34;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä½¿ç”¨æšä¸¾è¿›è¡Œé…ç½®"&gt;ä½¿ç”¨æšä¸¾è¿›è¡Œé…ç½®&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨buildSrcä¸­å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»ï¼Œç”¨äºçº¦å®šå¯ä»¥é…ç½®çš„å€¼ï¼Œå³å¯ä»¥æ¸…æ™°å®šä¹‰é…ç½®å€¼é¿å…é…ç½®æ—¶ç›´æ¥å†™å­—ç¬¦ä¸²å®¹æ˜“å‡ºé”™ï¼Œåˆå¯ä»¥æ”¯æŒä»£ç è‡ªåŠ¨è¡¥å…¨æ–¹ä¾¿é…ç½®ã€‚&lt;/p&gt;</description></item><item><title>Android-WebViewä¸­JavaåŒJSçš„äº¤äº’</title><link>https://hanlyjiang.github.io/posts/android-webview%E4%B8%ADjava%E5%90%8Cjs%E7%9A%84%E4%BA%A4%E4%BA%92/</link><pubDate>Fri, 20 Mar 2020 10:18:50 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/android-webview%E4%B8%ADjava%E5%90%8Cjs%E7%9A%84%E4%BA%A4%E4%BA%92/</guid><description>&lt;p&gt;Androidæä¾›çš„å‡ ç§JSåŒJavaäº¤äº’çš„æ–¹å¼ä»‹ç»ï¼Œé€šè¿‡ä¸€ä¸ªå®ä¾‹ä»‹ç»é€šè¿‡&lt;code&gt;evaluateJavascript&lt;/code&gt;è°ƒç”¨JSæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id="androidæä¾›çš„jsåŸç”Ÿäº¤äº’api"&gt;Androidæä¾›çš„jsåŸç”Ÿäº¤äº’API&lt;/h2&gt;
&lt;h3 id="androidè°ƒç”¨-js-ä»£ç "&gt;Androidè°ƒç”¨ JS ä»£ç ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡WebViewçš„ &lt;strong&gt;loadUrl()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡WebViewçš„ &lt;strong&gt;evaluateJavascript()&lt;/strong&gt; æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Androidè°ƒç”¨ JS ä»£ç ä¸»è¦ä½¿ç”¨ ç¬¬äºŒç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="js-è°ƒç”¨-android-ä»£ç "&gt;JS è°ƒç”¨ Android ä»£ç ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€šè¿‡ WebView çš„ addJavascriptInterface() è¿›è¡Œå¯¹è±¡æ˜ å°„&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;strong&gt;WebChromeClient&lt;/strong&gt;çš„ &lt;strong&gt;onJsAlert&lt;/strong&gt;() ã€&lt;strong&gt;onJsConfirm&lt;/strong&gt;()ã€&lt;strong&gt;onJsPrompt&lt;/strong&gt;() æ–¹æ³•å›è°ƒæ‹¦æˆªJSå¯¹è¯æ¡†&lt;strong&gt;alert&lt;/strong&gt;()ã€&lt;strong&gt;confirm&lt;/strong&gt;()ã€&lt;strong&gt;prompt&lt;/strong&gt;() æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;strong&gt;WebViewClient&lt;/strong&gt;çš„&lt;strong&gt;shouldOverrideUrlLoading()&lt;/strong&gt; æ–¹æ³•å›è°ƒæ‹¦æˆª url&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬2å’Œç¬¬3ä¸­æ–¹å¼èƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ç¬¬ä¸€ç§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®˜æ–¹ç¤ºä¾‹ä»£ç ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;addJavaScriptInterface æ³¨å…¥åŸç”Ÿå¯¹è±¡åˆ°JS + åŸç”Ÿé€šè¿‡loadUrl è°ƒç”¨JSä»£ç &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class JsObject {
@JavascriptInterface
public String toString() { return &amp;#34;injectedObject&amp;#34;; }
}
webview.getSettings().setJavaScriptEnabled(true);
// æ³¨å…¥Javaå¯¹è±¡åˆ° JavaScript ï¼ŒJSä¸­å¯ä»¥é€šè¿‡ injectedObject æ¥è°ƒç”¨åŸç”Ÿä»£ç 
webView.addJavascriptInterface(new JsObject(), &amp;#34;injectedObject&amp;#34;);
webView.loadData(&amp;#34;&amp;#34;, &amp;#34;text/html&amp;#34;, null);
webView.loadUrl(&amp;#34;javascript:alert(injectedObject.toString())&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Android 4.2ï¼ˆJELLY BEANï¼‰åŠæ›´é«˜ç‰ˆæœ¬ä¸­åªæœ‰è¢«&lt;em&gt;JavascriptInterface&lt;/em&gt;æ³¨è§£çš„publicæ–¹æ³•æ‰å¯ä»¥åœ¨jsä¸­è°ƒç”¨ï¼› Android4.2ä»¥ä¸‹è®¾å¤‡ä¸Šï¼Œæ‰€æœ‰publicæ–¹æ³•éƒ½å¯ä»¥è¢«jsè®¿é—®ï¼ˆåŒ…æ‹¬ç»§æ‰¿çš„ï¼‰&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;em&gt;addJavaScriptInterface&lt;/em&gt;åŠ å…¥å¯¹è±¡ ï¼š å¿…é¡»åœ¨æ³¨å…¥å¯¹è±¡ä¹‹å‰å¯ç”¨JavaScriptï¼Œå¹¶ä¸”æ³¨å…¥çš„å¯¹è±¡ç›´åˆ°ä¸‹æ¬¡é¡µé¢é‡æ–°åŠ è½½æ‰ä¼šå‡ºç°åœ¨JavaScriptä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id="åº”ç”¨å®ä¾‹javaåŒvueäº¤äº’"&gt;åº”ç”¨å®ä¾‹ï¼šJavaåŒVueäº¤äº’&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢åŠ è½½å®Œæ¯•ä¹‹åæ›´æ–°æ•°æ®ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡Javaä¾§è°ƒç”¨JSçš„æ–¹æ³•æ¥å°†æ•°æ®ä¼ é€’ç»™JSé€šçŸ¥å…¶æ›´æ–°ï¼›
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨JSä¾§å®šä¹‰ä¸€ä¸ªæ¥æ”¶æ•°æ®çš„æ–¹æ³•ï¼Œä¸ºäº†èƒ½è®©Javaä¾§èƒ½æ–¹ä¾¿æ‰¾åˆ°ï¼Œæˆ‘ä»¬å°†æ–¹æ³•å®šä¹‰åˆ°windowå¯¹è±¡ä¸Šã€‚
ç„¶ååœ¨WebViewä¸­é¡µé¢åŠ è½½å®Œæ¯•ï¼ˆonPageFinishedï¼‰åï¼Œè°ƒç”¨ &lt;code&gt;webView.evaluateJavascript&lt;/code&gt; æ¥è°ƒç”¨æ­¤JSæ–¹æ³•ï¼›&lt;/p&gt;</description></item><item><title>Androidäº‹ä»¶åŠæ‰‹åŠ¿</title><link>https://hanlyjiang.github.io/posts/android-shi-jian-ji-shou-shi/</link><pubDate>Tue, 20 Feb 2018 10:13:24 +0000</pubDate><guid>https://hanlyjiang.github.io/posts/android-shi-jian-ji-shou-shi/</guid><description>&lt;p&gt;androidäº‹ä»¶åŸºç¡€åŠæ‰‹åŠ¿ï¼Œä¸»è¦å…³æ³¨å„ç§æ‰‹åŠ¿çš„ä½¿ç”¨åŠå…¶è®¡ç®—åŸç† ã€‚&lt;/p&gt;
&lt;h2 id="androidäº‹ä»¶åŸºç¡€"&gt;Androidäº‹ä»¶åŸºç¡€&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨æ¦‚å¿µ&lt;/p&gt;
&lt;h3 id="äº‹ä»¶ç›‘å¬å™¨åŠäº‹ä»¶å¤„ç†ç¨‹åº"&gt;äº‹ä»¶ç›‘å¬å™¨åŠäº‹ä»¶å¤„ç†ç¨‹åº&lt;/h3&gt;
&lt;p&gt;å¯ç›´æ¥æŸ¥çœ‹ &lt;a href="https://developer.android.google.cn/guide/topics/ui/ui-events"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ï¼Œæ­¤å¤„ä»…åšç®€è¦æè¿°ï¼›&lt;/p&gt;
&lt;h4 id="äº‹ä»¶ç›‘å¬å™¨"&gt;äº‹ä»¶ç›‘å¬å™¨&lt;/h4&gt;
&lt;p&gt;Viewç±»çš„åŒ…å«ä¸€ä¸ªå›è°ƒæ–¹æ³•çš„æ¥å£ï¼Œé€šè¿‡setXXXListeneræ¥å®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºï¼›&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;äº‹ä»¶ç›‘å¬å™¨æ˜¯ &lt;code&gt;View&lt;/code&gt; ç±»ä¸­åŒ…å«ä¸€ä¸ªå›è°ƒæ–¹æ³•çš„æ¥å£ã€‚å½“ç”¨æˆ·ä¸ç•Œé¢é¡¹ç›®ä¹‹é—´çš„äº’åŠ¨è§¦å‘å·²æ³¨å†Œç›‘å¬å™¨çš„ View å¯¹è±¡æ—¶ï¼ŒAndroid æ¡†æ¶å°†è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;äº‹ä»¶ç›‘å¬å™¨æ¥å£ä¸­åŒ…å«ä»¥ä¸‹å›è°ƒæ–¹æ³•ï¼šonClick()ï¼ŒonLongClick()ï¼ŒonFocusChange()ï¼ŒonKey()ï¼ŒonTouch()ï¼ŒonCreateContextMenu()&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ä»¬é‡ç‚¹å…³æ³¨onTouchï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;onTouch()ï¼š åœ¨ &lt;code&gt;View.OnTouchListener&lt;/code&gt; ä¸­ã€‚å½“ç”¨æˆ·æ‰§è¡Œå¯è§†ä¸ºè§¦æ‘¸äº‹ä»¶çš„æ“ä½œæ—¶ï¼ŒåŒ…æ‹¬æŒ‰ä¸‹ã€é‡Šæ”¾æˆ–å±å¹•ä¸Šçš„ä»»ä½•ç§»åŠ¨æ‰‹åŠ¿ï¼ˆåœ¨é¡¹ç›®è¾¹ç•Œå†…ï¼‰ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç›‘å¬å™¨æ˜¯å¦å¤„ç†å®Œæ­¤äº‹ä»¶ã€‚é‡è¦çš„æ˜¯ï¼Œæ­¤äº‹ä»¶å¯ä»¥æ‹¥æœ‰å¤šä¸ªåˆ†å…ˆåé¡ºåºçš„æ“ä½œã€‚å› æ­¤ï¼Œå¦‚æœåœ¨æ”¶åˆ° down æ“ä½œäº‹ä»¶æ—¶è¿”å› falseï¼Œåˆ™è¡¨ç¤ºæ‚¨å¹¶æœªå¤„ç†å®Œæ­¤äº‹ä»¶ï¼Œè€Œä¸”å¯¹å…¶åç»­æ“ä½œä¹Ÿä¸æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæ‚¨æ— éœ€æ‰§è¡Œäº‹ä»¶å†…çš„ä»»ä½•å…¶ä»–æ“ä½œï¼Œå¦‚æ‰‹åŠ¿æˆ–æœ€ç»ˆçš„ up æ“ä½œäº‹ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="äº‹ä»¶å¤„ç†ç¨‹åº"&gt;äº‹ä»¶å¤„ç†ç¨‹åº&lt;/h4&gt;
&lt;p&gt;ç›´æ¥å¼•ç”¨å®˜æ–¹æ–‡æ¡£æè¿°ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæ‚¨ä» View æ„å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™å¯å®šä¹‰å‡ ç§å›è°ƒæ–¹æ³•ï¼Œç”¨ä½œé»˜è®¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚åœ¨æœ‰å…³&lt;a href="https://developer.android.google.cn/guide/topics/ui/custom-components"&gt;è‡ªå®šä¹‰ View ç»„ä»¶&lt;/a&gt;çš„æ–‡æ¡£ä¸­ï¼Œæ‚¨å°†äº†è§£ä¸€äº›ç”¨äºäº‹ä»¶å¤„ç†çš„å¸¸è§å›è°ƒï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;onKeyDown(int, KeyEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿæ–°çš„æŒ‰é”®äº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onKeyUp(int, KeyEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿ key up äº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onTrackballEvent(MotionEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿè½¨è¿¹çƒåŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onTouchEvent(MotionEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿè§¦å±åŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onFocusChanged(boolean, int, Rect)&lt;/code&gt;ï¼šåœ¨ View å¯¹è±¡è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹æ³•å€¼å¾—æ‚¨æ³¨æ„ï¼Œå°½ç®¡å®ƒä»¬å¹¶é View ç±»çš„ä¸€éƒ¨åˆ†ï¼Œä½†å¯èƒ½ä¼šç›´æ¥å½±å“æ‰€èƒ½é‡‡å–çš„äº‹ä»¶å¤„ç†æ–¹å¼ã€‚å› æ­¤ï¼Œåœ¨ç®¡ç†å¸ƒå±€å†…æ›´å¤æ‚çš„äº‹ä»¶æ—¶ï¼Œä¸å¦¨è€ƒè™‘ä½¿ç”¨ä»¥ä¸‹å…¶ä»–æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Activity.dispatchTouchEvent(MotionEvent)&lt;/code&gt;ï¼šæ­¤æ–¹æ³•å…è®¸ &lt;code&gt;Activity&lt;/code&gt; åœ¨æ‰€æœ‰è§¦æ‘¸äº‹ä»¶åˆ†æ´¾ç»™çª—å£ä¹‹å‰æˆªè·å®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ViewGroup.onInterceptTouchEvent(MotionEvent)&lt;/code&gt;ï¼šæ­¤æ–¹æ³•å…è®¸ &lt;code&gt;ViewGroup&lt;/code&gt; ç›‘è§†åˆ†æ´¾ç»™å­çº§ View çš„äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ViewParent.requestDisallowInterceptTouchEvent(boolean)&lt;/code&gt;ï¼šå¯¹çˆ¶çº§ View è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯æŒ‡ç¤ºä¸åº”ä½¿ç”¨ &lt;code&gt;onInterceptTouchEvent(MotionEvent)&lt;/code&gt; æˆªè·è§¦æ‘¸äº‹ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ &lt;code&gt;onTouchEvent(MotionEvent)&lt;/code&gt; å³åœ¨å‘ç”Ÿè§¦å±åŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨çš„å›è°ƒæ–¹æ³•ï¼›&lt;/p&gt;
&lt;h3 id="è§¦æ‘¸æ‰‹åŠ¿"&gt;è§¦æ‘¸æ‰‹åŠ¿&lt;/h3&gt;
&lt;p&gt;æ‰‹åŠ¿å¯ä»¥è®©ç”¨æˆ·é€šè¿‡è§¦æ‘¸æ¥ä¸å±å¹•å…ƒç´ è¿›è¡Œäº¤äº’ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·äº¤æˆ·è§’åº¦çš„æ‰‹åŠ¿åˆ’åˆ†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ‰‹åŠ¿ç±»å‹&lt;/th&gt;
&lt;th&gt;å…·ä½“æ‰‹åŠ¿-ä¸åŒç±»å‹ä¹‹é—´æœ‰é‡å¤&lt;/th&gt;
&lt;th&gt;è§£é‡Š&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å¯¼èˆªæ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;å®ç°å¯¼èˆªä½œç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç‚¹å‡» - Tap&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ»šåŠ¨å’Œæ‹–ç§» - Scroll&amp;amp;Pan&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šæ»‘åŠ¨å›¾ç‰‡åˆ—è¡¨æˆ–æ‹–åŠ¨ä»¥æµè§ˆåœ°å›¾&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Scroll - å¿«é€Ÿæ‹–åŠ¨å¹¶æŠ¬èµ·æ‰‹æŒ‡æ—¶å‘ç”Ÿçš„ä¸€ç§æ»šåŠ¨ &lt;!-- raw HTML omitted --&gt; Pan-æ‹–ç§»ï¼Œæ…¢é€Ÿç§»åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ‹–åŠ¨/æ‹–æ‹½ - Drag&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·åœ¨è§¦æ‘¸å±ä¸Šæ‹–åŠ¨æ‰‹æŒ‡æ—¶å‘ç”Ÿçš„ä¸€ç§æ»šåŠ¨&lt;!-- raw HTML omitted --&gt;å¦‚ï¼šæŒ‰ä½åº•éƒ¨sheetå¹¶å‘å±å¹•é¡¶éƒ¨æ‹–åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;è½»æ‰« - Swipe&lt;/td&gt;
&lt;td&gt;å•ä¸ªæ‰‹æŒ‡è§¦æ‘¸å±å¹•å¹¶å¿«é€Ÿåœ°æœä»»æ„ä¸€ä¸ªæ–¹å‘æ»‘åŠ¨&lt;!-- raw HTML omitted --&gt;å¦‚ï¼šå·¦å³æ»‘åŠ¨ä»¥åœ¨ä¸åŒçš„Tabé¡µä¸­åˆ‡æ¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æåˆ/ç¼©æ”¾ - Pinch&lt;/td&gt;
&lt;td&gt;åŒæŒ‡æˆ–å¤šæŒ‡æåˆ&lt;!-- raw HTML omitted --&gt;å¦‚ï¼šåœ¨ä¸€ä¸ªå›¾ç‰‡åˆ—è¡¨ä¸­ç¼©æ”¾ä¸€ä¸ªitemè¿›å…¥å¤§å›¾æŸ¥çœ‹ç•Œé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åŠ¨ä½œæ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡ŒæŸç§åŠ¨ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç‚¹å‡» - Tap&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;é•¿æŒ‰ - Long press&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šé•¿æŒ‰é€‰ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;è½»æ‰« - Swipe&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šè½»æ‰«itemå±•ç°åˆ é™¤/æ”¶è—æŒ‰é’®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å˜æ¢æ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºæ”¹å˜å…ƒç´ å¤§å°ï¼Œä½ç½®ï¼Œæ—‹è½¬è§’åº¦ï¼Œå®ç°å˜æ¢æ•ˆæœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;åŒå‡» - Double tap&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šåŒå‡»ç¼©æ”¾å›¾ç‰‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æåˆ/ç¼©æ”¾ - Pinch&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šç¼©æ”¾æŸ¥çœ‹å›¾ç‰‡ç»†èŠ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç»„åˆæ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šåœ°å›¾ä¸­çš„æ”¾å¤§ç¼©å°&amp;amp;æ—‹è½¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;é€‰å–å¹¶æ‹–åŠ¨ - Pick up&amp;amp;Move&lt;/td&gt;
&lt;td&gt;é•¿æŒ‰é€‰æ‹©å…ƒç´  + æ‹–åŠ¨å…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://material.io/design/interaction/gestures.html"&gt;æ¥æº&lt;/a&gt;åŠæ‰‹åŠ¿çš„åŠ¨ç”»æ•ˆæœå¯ä»¥çœ‹è¿™é‡Œï¼š &lt;a href="https://material.io/design/interaction/gestures.html#types-of-gestures"&gt;material.io&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>