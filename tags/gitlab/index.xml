<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Gitlab on 清水池塘</title>
    <link>https://hanlyjiang.github.io/tags/gitlab/</link>
    <description>Recent content in Gitlab on 清水池塘</description>
    <generator>Hugo -- 0.152.2</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 26 May 2021 16:12:17 +0000</lastBuildDate>
    <atom:link href="https://hanlyjiang.github.io/tags/gitlab/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Gitlab持续集成与持续部署-实例</title>
      <link>https://hanlyjiang.github.io/posts/gitlab-chi-xu-ji-cheng-yu-chi-xu-bu-shu-shi-li/</link>
      <pubDate>Wed, 26 May 2021 16:12:17 +0000</pubDate>
      <guid>https://hanlyjiang.github.io/posts/gitlab-chi-xu-ji-cheng-yu-chi-xu-bu-shu-shi-li/</guid>
      <description>&lt;p&gt;本篇文章介绍如何基于Gitlab来配置一个服务集群的自动构建与部署更新，其中服务的更新基于docker来完成，本文主要关注如何完成部署操作，及如何完成gitlab上ci的配置；在完成单一的服务自动部署更新后，我们通过gitlab的include及trigger机制来简化统一部署流程；&lt;/p&gt;</description>
    </item>
    <item>
      <title>Gitlab-Runner安装并注册 </title>
      <link>https://hanlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%B3%A8%E5%86%8Cgitlab-runner/</link>
      <pubDate>Thu, 11 Jun 2020 16:11:58 +0000</pubDate>
      <guid>https://hanlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%B3%A8%E5%86%8Cgitlab-runner/</guid>
      <description>&lt;p&gt;本文介绍Gitlab-Runner的安装运行（包括docker方式安装运行及二进制直接运行），并介绍如何将Gitlab注册到Gitlab。同时还介绍了gitlab-runner的一些常用操作命令。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;安装gitlab-runner&#34;&gt;安装Gitlab-Runner&lt;/h2&gt;
&lt;p&gt;gitlab-runner可以使用docker方式运行，也可以在主机上运行其二进制可执行文件，可按如下方式进行选择：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Gitlab升级记录（12.10.0-13.0.6）</title>
      <link>https://hanlyjiang.github.io/posts/gitlab-sheng-ji-ji-lu-12100-1306/</link>
      <pubDate>Thu, 21 May 2020 16:50:41 +0000</pubDate>
      <guid>https://hanlyjiang.github.io/posts/gitlab-sheng-ji-ji-lu-12100-1306/</guid>
      <description>&lt;p&gt;将gitlab（Docker方式运行）从12.10.0升级到13.0.6 的过程记录。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;升级准备工作&#34;&gt;升级准备工作&lt;/h2&gt;
&lt;h3 id=&#34;确定升级路线&#34;&gt;&lt;strong&gt;确定升级路线&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;现有版本：12.10.0&lt;/li&gt;
&lt;li&gt;当下目标版本：13.0.6&lt;/li&gt;
&lt;li&gt;结合 &lt;a href=&#34;https://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations&#34;&gt;Gitlab升级路线建议&lt;/a&gt; 确定如下升级路线：
&lt;ul&gt;
&lt;li&gt;12.10.0 -&amp;gt; 13.0.0 -&amp;gt; 13.0.6&lt;/li&gt;
&lt;li&gt;由于我们跨大版本升级了（12-13），所以引入了 13.0.0 的中间升级路径&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;获取最新版本信息&#34;&gt;&lt;strong&gt;获取最新版本信息&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;查看 gitlab release页面 信息&lt;/li&gt;
&lt;li&gt;查看 gitlab docker hub 获取gitlab-ce docker镜像版本TAG：&lt;/li&gt;
&lt;li&gt;13.0.0: &lt;code&gt;gitlab/gitlab-ce:13.0.0-ce.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;13.0.6: &lt;code&gt;gitlab/gitlab-ce:13.0.6-ce.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看升级注意事项&lt;/li&gt;
&lt;li&gt;升级流程： &lt;a href=&#34;https://docs.gitlab.com/omnibus/docker/README.html#update&#34;&gt;https://docs.gitlab.com/omnibus/docker/README.html#update&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;版本升级建议路线：https://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;备份&#34;&gt;备份&lt;/h2&gt;
&lt;p&gt;备份有两种方式，备份的数据量不相同：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Gitlab安装配置</title>
      <link>https://hanlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEgitlab/</link>
      <pubDate>Mon, 06 Apr 2020 11:54:06 +0000</pubDate>
      <guid>https://hanlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEgitlab/</guid>
      <description>&lt;p&gt;主要内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用docker运行 gitlab；&lt;/li&gt;
&lt;li&gt;配置LDAP及邮箱；&lt;/li&gt;
&lt;li&gt;配置管理员账号；&lt;/li&gt;
&lt;li&gt;配置邮箱通知；&lt;/li&gt;
&lt;li&gt;关闭用户注册；&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;安装&#34;&gt;安装&lt;/h2&gt;
&lt;p&gt;我们使用docker来安装Gitlab，执行如下命令即可安装运行，完成后使用&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export GITLAB_DATA&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/data/gitlab
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 设置主机的ip域名&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;export HOST_IP&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;192.168.43.62
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir $GITLAB_DATA/config $GITLAB_DATA/logs $GITLAB_DATA/data
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker run --detach &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --hostname $HOST_IP &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --publish 443:443 --publish 80:80 --publish 22:22 &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --name gitlab &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --restart always &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --volume $GITLAB_DATA/config:/etc/gitlab &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --volume $GITLAB_DATA/logs:/var/log/gitlab &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        --volume $GITLAB_DATA/data:/var/opt/gitlab &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;        gitlab/gitlab-ce:13.9.1-ce.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;数据全部挂载在外部目录 GITLAB_DATA 中&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--hostname 192.168.43.62&lt;/code&gt; : 指定当前服务的IP或者域名，后续将会显示为gitlab代码仓库的克隆地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--restart always&lt;/code&gt; : 设置服务自动重启&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;查看gitlab的可用版本：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
