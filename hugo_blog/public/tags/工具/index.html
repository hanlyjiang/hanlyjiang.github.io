<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>工具 | 清水池塘</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="野生莲藕">
<link rel="canonical" href="http://localhost:1313/tags/%E5%B7%A5%E5%85%B7/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/%E5%B7%A5%E5%85%B7/index.xml" title="rss">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/%E5%B7%A5%E5%85%B7/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body class="list" id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="清水池塘 (Alt + H)">清水池塘</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    工具
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">简化Android库上传到Maven仓库的gradle配置
    </h2>
  </header>
  <div class="entry-content">
    <p>配置 android 上传到 maven 中心仓库，发现配置的代码有点多，而且如果有多个库模块需要上传，则需要复制粘贴不少重复的配置代码，于是编写了一个 gradle 插件用于简化提取这个配置过程；
插件用途及效果 本插件用于简化Android库上传到Maven中心仓库的配置，避免每个project的gradle中都放置一份重复较多的配置；
插件有如下功能：
简化 maven-publish 插件的配置流程； 添加上传到Maven中心仓库的 publish 任务； 支持配置上传时是否包含 javadoc 及源码； 直接使用maven-publish插件的配置： import org.gradle.api.publish.maven.MavenPom plugins { id(&#34;com.android.library&#34;) id(&#34;signing&#34;) `maven-publish` } android { defaultConfig { versionName(&#34;1.0.0-SNAPSHOT&#34;) } } dependencies { // } tasks.register(&#34;javadoc&#34;, Javadoc::class.java) { group = &#34;publishing&#34; dependsOn(&#34;assemble&#34;) source = android.sourceSets[&#34;main&#34;].java.getSourceFiles() classpath &#43;= project.files(android.bootClasspath &#43; File.pathSeparator) if (JavaVersion.current().isJava9Compatible) { (options as StandardJavadocDocletOptions).addBooleanOption(&#34;html5&#34;, true) } android.libraryVariants.forEach { libraryVariant -&gt; classpath &#43;= libraryVariant.javaCompileProvider.get().classpath } options.apply { encoding(&#34;UTF-8&#34;) charset(&#34;UTF-8&#34;) isFailOnError = false (this as StandardJavadocDocletOptions).apply { // addStringOption(&#34;Xdoclint:none&#34;) links?.add(&#34;https://developer.android.google.cn/reference/&#34;) links?.add(&#34;http://docs.oracle.com/javase/8/docs/api/&#34;) } } } tasks.register(&#34;jarSource&#34;, Jar::class.java) { group = &#34;publishing&#34; from(android.sourceSets[&#34;main&#34;].java.srcDirs) archiveClassifier.set(&#34;sources&#34;) } tasks.register(&#34;jarJavadoc&#34;, Jar::class.java) { group = &#34;publishing&#34; dependsOn(&#34;javadoc&#34;) val javadoc: Javadoc = tasks.getByName(&#34;javadoc&#34;) as Javadoc from(javadoc.destinationDir) archiveClassifier.set(&#34;javadoc&#34;) } fun getMyPom(): Action&lt;in MavenPom&gt; { return Action&lt;MavenPom&gt; { name.set(&#34;Android Common Utils Lib&#34;) description.set(&#34;Android Common Utils Library For HJ&#34;) url.set(&#34;https://github.com/hanlyjiang/lib_common_utils&#34;) licenses { license { name.set(&#34;The Apache License, Version 2.0&#34;) url.set(&#34;http://www.apache.org/licenses/LICENSE-2.0.txt&#34;) } } developers { developer { id.set(&#34;hanlyjiang&#34;) name.set(&#34;Hanly Jiang&#34;) email.set(&#34;hanlyjiang@outlook.com&#34;) } } scm { connection.set(&#34;scm:git:git://github.com/hanlyjiang/lib_common_utils.git&#34;) developerConnection.set(&#34;scm:git:ssh://github.com/hanlyjiang/lib_common_utils.git&#34;) url.set(&#34;https://github.com/hanlyjiang/lib_common_utils&#34;) } } } afterEvaluate { publishing { publications { create&lt;MavenPublication&gt;(&#34;release&#34;) { from(components.getByName(&#34;release&#34;)) groupId = &#34;com.github.hanlyjiang&#34; artifactId = &#34;android_common_utils&#34; version = android.defaultConfig.versionName pom(getMyPom()) // 添加javadoc artifact(tasks.getByName(&#34;jarJavadoc&#34;) as Jar) // 添加source artifact(tasks.getByName(&#34;jarSource&#34;) as Jar) } } repositories { val ossrhCredentials = Action&lt;PasswordCredentials&gt; { username = properties[&#34;ossrhUsername&#34;].toString() password = properties[&#34;ossrhPassword&#34;].toString() } // sonar的仓库，地址根据项目的版本号来确定是snapshot还是正式仓库 maven { name = &#34;Sonartype&#34; val releasesRepoUrl = uri(&#34;https://oss.sonatype.org/service/local/staging/deploy/maven2&#34;) val snapshotsRepoUrl = uri(&#34;https://oss.sonatype.org/content/repositories/snapshots/&#34;) url = if (android.defaultConfig.versionName.toString().endsWith(&#34;SNAPSHOT&#34;)) snapshotsRepoUrl else releasesRepoUrl credentials(ossrhCredentials) // snapshot的地址： // https://oss.sonatype.org/content/repositories/snapshots/com/github/hanlyjiang/android_common_utils/ } // 项目本地的仓库 maven { name = &#34;ProjectLocal&#34; val releasesRepoUrl = uri(layout.buildDirectory.dir(&#34;repos/releases&#34;)) val snapshotsRepoUrl = uri(layout.buildDirectory.dir(&#34;repos/snapshots&#34;)) url = if (android.defaultConfig.versionName.toString().endsWith(&#34;SNAPSHOT&#34;)) snapshotsRepoUrl else releasesRepoUrl } } } signing { sign(publishing.publications.getByName(&#34;release&#34;)) } } 使用AndroidMavenPubPlugin简化后的配置： import org.gradle.api.publish.maven.MavenPom plugins { id(&#34;com.android.library&#34;) id(&#34;signing&#34;) `maven-publish` // 引入我们本地仓库中的gradle插件 id(&#34;com.github.hanlyjiang.android_maven_pub&#34;) version (&#34;0.0.5&#34;) apply (false) } android { defaultConfig { versionName(&#34;1.0.1-SNAPSHOT&#34;) } } dependencies { // } apply(plugin = &#34;com.github.hanlyjiang.android_maven_pub&#34;) configure&lt;io.hanlyjiang.gradle.android.AndroidMavenPubPluginExtension&gt; { groupId.set(&#34;com.github.hanlyjiang&#34;) artifactId.set(&#34;android-common-utils&#34;) projectLocalRepoPath.set(&#34;local-maven-repo&#34;) mavenPomAction.set(Action&lt;MavenPom&gt; { name.set(&#34;Android Common Utils Lib&#34;) description.set(&#34;Android Common Utils Library For HJ&#34;) url.set(&#34;https://github.com/hanlyjiang/lib_common_utils&#34;) properties.set( mapOf( &#34;myProp&#34; to &#34;value&#34;, &#34;prop.with.dots&#34; to &#34;anotherValue&#34; ) ) licenses { license { name.set(&#34;The Apache License, Version 2.0&#34;) url.set(&#34;http://www.apache.org/licenses/LICENSE-2.0.txt&#34;) } } developers { developer { id.set(&#34;hanlyjiang&#34;) name.set(&#34;Hanly Jiang&#34;) email.set(&#34;hanlyjiang@outlook.com&#34;) } } scm { connection.set(&#34;scm:git:git://github.com/hanlyjiang/lib_common_utils.git&#34;) developerConnection.set(&#34;scm:git:ssh://github.com/hanlyjiang/lib_common_utils.git&#34;) url.set(&#34;https://github.com/hanlyjiang/lib_common_utils&#34;) } }) } 使用步骤 引入插件 在需要使用的模块的build脚本中，引入我们的插件，同时引入 maven-publish 插件和 signing 插件。
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-06-01 10:26:00 +0000 UTC'>June 1, 2021</span>&nbsp;·&nbsp;<span>5 min</span>&nbsp;·&nbsp;<span>野生莲藕</span></footer>
  <a class="entry-link" aria-label="post link to 简化Android库上传到Maven仓库的gradle配置" href="http://localhost:1313/posts/jian-hua-android-ku-shang-chuan-dao-maven-cang-ku-de-gradle-pei-zhi/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">IDEA使用技巧之导航
    </h2>
  </header>
  <div class="entry-content">
    <p>介绍IDEA及AndroidStudio中的导航技巧，包括文件导航，代码元素（类，方法）导航，文本导航等，还有书签等的使用方法；提高编写代码及阅读代码的效率；
插入符导航 后退：==⌘[== 前进：==⌘]== 最后编辑点： ==⇧⌘⌫== 定位到当前的结束括号： ==Ctrl&#43;M== 或者 ==↑== , ==↓== 查看光标所在位置所属的元素：==⌃⇧Q== （注意看下图的左上角显示了当前的类） 移动到当前开始括号对应的闭合括号： ==Ctrl &#43; M== 在代码块之间导航： ==⌥⇧⌘[== ==⌥⇧⌘]== 移动插入符 移动到下一个或者上一个单词： ==⌥→==，==⌥←==
移动到下个段落：（下个方法）
使用 ==Shift&#43;Command&#43;A== 调出Action搜索弹框； 搜索 Move Caret Forward a Paragraph 或 Move Caret Backward a Paragraph 查找最近的位置 使用 ==⇧⌘E== 可以打开最近位置的弹窗，使用上下健进行导航
在打开此弹窗时，再次使用 ==⇧⌘E== 可以选中 Show Changed Only
可直接输入以搜索代码片段
删除记录： 按 ==Delete== 或者 ==⌫==
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-21 14:12:14 +0000 UTC'>April 21, 2021</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span>野生莲藕</span></footer>
  <a class="entry-link" aria-label="post link to IDEA使用技巧之导航" href="http://localhost:1313/posts/idea-shi-yong-ji-qiao-zhi-dao-hang/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Gridea使用小记
    </h2>
  </header>
  <div class="entry-content">
    <p>仅记录使用Gridea过程中解决的问题及解决方式
下载安装并使用 访问这里（https://gridea.dev/）下载安装并使用，不赘述。
远程同步github配置 关于建立仓库，获取token，配置pages赘述，仅记录额外的配置。
在Gridea的工作目录的根目录中新建一个 .gitignore 文件，输入如下内容：
.DS_Store */.DS_Store # 自己的本地草稿 typora 远程同步时，会将此文件放入到output目录下，然后将output目录推送到github上，为了避免将其中的某些文件推入到远程仓库，故可以通过此方式定义gitignore
</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-05 11:58:07 +0000 UTC'>April 5, 2021</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>野生莲藕</span></footer>
  <a class="entry-link" aria-label="post link to Gridea使用小记" href="http://localhost:1313/posts/gridea%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%B0/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Gitlab-Runner安装并注册 
    </h2>
  </header>
  <div class="entry-content">
    <p>本文介绍Gitlab-Runner的安装运行（包括docker方式安装运行及二进制直接运行），并介绍如何将Gitlab注册到Gitlab。同时还介绍了gitlab-runner的一些常用操作命令。
安装Gitlab-Runner gitlab-runner可以使用docker方式运行，也可以在主机上运行其二进制可执行文件，可按如下方式进行选择：
执行通用的构建测试任务及与不需要直接访问主机目录的，以docker方式安装； 执行部署类任务或需要直接访问主机目录的，以二进制方式安装； 以下分别介绍上述两种安装方式。
使用docker安装gitlab-runner 使用docker方式安装的，需先在主机上安装docker环境，可参考 Docker 官方安装文档。以下操作假设主机上已正确安装并配置了docker运行环境；
提示：可以使用基于alpine的镜像来减小大小
# 建立配置挂载目录 mkdir -p /data/gitlab-runner/config # 建立构建目录挂载目录 mkdir -p /data/gitlab-runner/home # 注意，这里我们使用了基于alpine的镜像来减小大小；使用 --restart 标识来自动重启 docker run -d --name gitlab-runner --restart always \ -v /data/gitlab-runner/config:/etc/gitlab-runner \ -v /data/gitlab-runner/home:/home/gitlab-runner \ -v /var/run/docker.sock:/var/run/docker.sock \ gitlab/gitlab-runner:alpine # 通过以下命令设置docker开机自启 sudo systemctl enable docker docker安装的gitlab-runner常用操作 运行命令 使用已有容器
# 容器已经运行的情况下 # 1. 交互式执行，执行以下命令，然后输入命令 docker exec -it gitlab-runner /bin/bash # 然后执行命令 gitlab-runer --help # 2. 单次执行 docker exec gitlab-runner gitlab-runner --help 使用临时的：
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-06-11 16:11:58 +0000 UTC'>June 11, 2020</span>&nbsp;·&nbsp;<span>3 min</span>&nbsp;·&nbsp;<span>野生莲藕</span></footer>
  <a class="entry-link" aria-label="post link to Gitlab-Runner安装并注册 " href="http://localhost:1313/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%B3%A8%E5%86%8Cgitlab-runner/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Gitlab安装配置
    </h2>
  </header>
  <div class="entry-content">
    <p>主要内容：
使用docker运行 gitlab； 配置LDAP及邮箱； 配置管理员账号； 配置邮箱通知； 关闭用户注册； 安装 我们使用docker来安装Gitlab，执行如下命令即可安装运行，完成后使用
export GITLAB_DATA=/data/gitlab # 设置主机的ip域名 export HOST_IP=192.168.43.62 mkdir $GITLAB_DATA/config $GITLAB_DATA/logs $GITLAB_DATA/data docker run --detach \ --hostname $HOST_IP \ --publish 443:443 --publish 80:80 --publish 22:22 \ --name gitlab \ --restart always \ --volume $GITLAB_DATA/config:/etc/gitlab \ --volume $GITLAB_DATA/logs:/var/log/gitlab \ --volume $GITLAB_DATA/data:/var/opt/gitlab \ gitlab/gitlab-ce:13.9.1-ce.0 数据全部挂载在外部目录 GITLAB_DATA 中 --hostname 192.168.43.62 : 指定当前服务的IP或者域名，后续将会显示为gitlab代码仓库的克隆地址 --restart always : 设置服务自动重启 查看gitlab的可用版本：
dockerhub/gitlab-ce gitlab release page 查看启动状态 启动期间可以使用 docker ps 查看状态，如STATUS中显示为starting则表示服务还在启动中，如显示为healthy则表示服务已正常启动，即可访问 http://192.168.43.62 访问Gitlab的web地址。
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-04-06 11:54:06 +0000 UTC'>April 6, 2020</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span>野生莲藕</span></footer>
  <a class="entry-link" aria-label="post link to Gitlab安装配置" href="http://localhost:1313/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEgitlab/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">清水池塘</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
