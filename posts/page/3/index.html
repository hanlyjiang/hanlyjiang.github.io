<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | æ¸…æ°´æ± å¡˜</title><meta name=keywords content><meta name=description content="Posts - æ¸…æ°´æ± å¡˜"><meta name=author content="é‡ç”Ÿè²è—•"><link rel=canonical href=https://anlyjiang.github.io/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://anlyjiang.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://anlyjiang.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://anlyjiang.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://anlyjiang.github.io/apple-touch-icon.png><link rel=mask-icon href=https://anlyjiang.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://anlyjiang.github.io/posts/index.xml title=rss><link rel=alternate hreflang=en href=https://anlyjiang.github.io/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://anlyjiang.github.io/posts/"><meta property="og:site_name" content="æ¸…æ°´æ± å¡˜"><meta property="og:title" content="Posts"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://anlyjiang.github.io/posts/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://anlyjiang.github.io/ accesskey=h title="æ¸…æ°´æ± å¡˜ (Alt + H)">æ¸…æ°´æ± å¡˜</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>[è¯‘]Androidå¼€å‘æ‰€éœ€è¦çš„çŸ©é˜µçŸ¥è¯†</h2></header><div class=entry-content><p>ç¿»è¯‘å›½å¤–æ–‡ç« ï¼Œè¯¥æ–‡ç« ä»‹ç»äº†Androidå¼€å‘ä¸­çŸ©é˜µç›¸å…³çš„æ•°å­¦çŸ¥è¯†ï¼ŒåŒ…æ‹¬çŸ©é˜µæ˜¯ä»€ä¹ˆï¼ŸçŸ©é˜µåŠ æ³•åŠä¹˜æ³•è¿ç®—ï¼Œ2x2çŸ©é˜µçš„å˜æ¢ï¼Œæœ€åæ¼”è¿›ä¸ºAndroidä¸­ä½¿ç”¨çš„3x3çŸ©é˜µã€‚æ–‡ä¸­å›¾ç‰‡åŠåŠ¨å›¾æ¯”è¾ƒå¤šï¼Œç›¸å¯¹å¥½æ‡‚ã€‚
åŸæ–‡é“¾æ¥ï¼šhttps://i-rant.arnaudbos.com/matrices-for-developers/#technical-challenge
å‡ å‘¨å‰ï¼Œæˆ‘åœ¨ä¸€ä¸ªandroid-user-groupé¢‘é“ä¸Šï¼Œæœ‰äººé—®ä¸€ä¸ªå…³äºAndroidçš„Matrix.postScaleï¼ˆsxï¼Œsyï¼Œpxï¼Œpyï¼‰æ–¹æ³•åŠå…¶å·¥ä½œåŸç†çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒâ€œéš¾ä»¥æŒæ¡â€ã€‚
åœ¨2016å¹´åˆï¼Œæˆ‘åœ¨ä¸€ä¸ªAndroidåº”ç”¨ç¨‹åºä¸Šå®Œæˆäº†ä¸€ä¸ªè‡ªç”±é¡¹ç›®ï¼Œåœ¨å…¶ä¸­æˆ‘å¿…é¡»å®ç°ä¸€ä¸ªä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼š
ç”¨æˆ·åœ¨è´­ä¹°å¹¶ä¸‹è½½äº†å²©å£çš„æ•°å­—åœ°å½¢åï¼Œå¿…é¡»èƒ½å¤ŸæŸ¥çœ‹ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆçš„å²©å£ï¼š
æ‚¬å´–çš„ç…§ç‰‡ï¼Œ åŒ…å«çˆ¬å¡è·¯çº¿å åŠ å±‚çš„SVGæ–‡ä»¶ã€‚ ç”¨æˆ·å¿…é¡»å…·æœ‰éšæ„å¹³ç§»å’Œç¼©æ”¾çš„èƒ½åŠ›ï¼Œå¹¶ä¸”å¿…é¡»å…·æœ‰â€œè·Ÿéšâ€å›¾ç‰‡çš„è·¯çº¿å±‚ã€‚
APPæˆªå›¾1 APPæˆªå›¾2 APPæˆªå›¾3 æŠ€æœ¯æŒ‘æˆ˜ ä¸ºäº†è®©æ”€çˆ¬è·¯çº¿çš„å›¾å±‚èƒ½å¤Ÿè·Ÿéšç”¨æˆ·çš„æ‰‹åŠ¿æ“ä½œï¼Œæˆ‘å‘ç°æˆ‘ä¸å¾—ä¸é‡è½½Android ImageViewï¼Œåœ¨Canvasä¸Šç»˜åˆ¶å¹¶å¤„ç†æ‰‹æŒ‡æ‰‹åŠ¿ã€‚ ä½œä¸ºä¸€åä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼šæˆ‘æœç´¢äº†Stack OverflowğŸ˜… æˆ‘å‘ç°éœ€è¦android.graphics.Matrixç±»è¿›è¡Œ2Dè½¬æ¢ã€‚
è¿™ä¸ªç±»çš„é—®é¢˜åœ¨äºï¼Œä»æ–¹æ³•åç§°æ¥è¯´ï¼Œä½ èƒ½å¾ˆæ¸…æ¥šçš„äº†è§£å®ƒçš„ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ²¡æœ‰ä¸€å®šçš„æ•°å­¦èƒŒæ™¯çŸ¥è¯†ï¼Œä½ å¾ˆéš¾äº†è§£å®ƒèƒŒåæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæ¯”æ–¹è¯´ä¸‹é¢æ˜¯matrixçš„æŸä¸ªæ–¹æ³•çš„APIæ–‡æ¡£è¯´æ˜ï¼š
boolean postScale (float sx, float sy, float px, float py)
Postconcats the matrix with the specified scale. Mâ€™ = S(sx, sy, px, py) * M
ä»æ–‡æ¡£çœ‹èµ·å®ƒå¯ä»¥é€šè¿‡æŸäº›å‚æ•°ç¼©æ”¾æŸäº›ä¸œè¥¿ï¼Œå¹¶é€šè¿‡æŸç§ä¹˜æ³•æ¥å®Œæˆå®ƒã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯æœ‰å¾ˆå¤šç–‘é—®ï¼š
å®ƒåˆ°åº•æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ ç¼©æ”¾çŸ©é˜µï¼Ÿ é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæˆ‘æƒ³ç¼©æ”¾ç”»å¸ƒâ€¦ æˆ‘åº”è¯¥ä½¿ç”¨preScaleè¿˜æ˜¯postScaleï¼Ÿ å½“æˆ‘ä»ä»æ‰‹åŠ¿æ£€æµ‹ä»£ç è·å–è¾“å…¥å‚æ•°ï¼Œç„¶åè¿›å…¥å°è¯•å’Œé”™è¯¯çš„æ— é™å¾ªç¯æ—¶ï¼Œæ˜¯å¦éœ€è¦å°è¯•åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Ÿ å› æ­¤ï¼Œåœ¨å¼€å‘è¿‡ç¨‹çš„è¿™ä¸€åˆ»ï¼Œæˆ‘æ„è¯†åˆ°åœ¨å®Œæˆå¤§å­¦çš„å¤´ä¸¤å¹´åï¼Œæˆ‘éœ€è¦é‡æ–°å­¦ä¹ å¾ˆå¤šå¹´å‰å…³äºçŸ©é˜µçš„åŸºæœ¬æ•°å­¦æŠ€èƒ½ã€‚
åœ¨æœå¯»ç½‘ç»œèµ„æ–™æ—¶ï¼Œæˆ‘å‘ç°äº†å¾ˆå¤šä¸é”™çš„èµ„æºï¼Œå¹¶ä¸”èƒ½å¤Ÿå†æ¬¡å­¦ä¹ ä¸€äº›æ•°å­¦çŸ¥è¯†ã€‚ é€šè¿‡å°†æˆ‘çš„ç†è§£åº”ç”¨åˆ°Javaå’ŒAndroidä¸­çš„ä»£ç ï¼Œå®ƒè¿˜å¸®åŠ©æˆ‘è§£å†³äº†2Dè½¬æ¢é—®é¢˜ã€‚ å› æ­¤ï¼Œè€ƒè™‘åˆ°æˆ‘åœ¨ä¸Šé¢æåˆ°çš„é¢‘é“ä¸Šè¿›è¡Œçš„è®¨è®ºï¼Œä¼¼ä¹æˆ‘ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨çŸ©é˜µä¸­è‹¦è‹¦æŒ£æ‰çš„äººï¼Œè¯•å›¾å¼„æ˜ç™½è¿™ä¸€ç‚¹ï¼Œå¹¶åœ¨Androidçš„Matrixç±»å’Œæ–¹æ³•ä¸­ä½¿ç”¨è¿™äº›æŠ€èƒ½ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘ä¼šå†™ä¸€ç¯‡æ–‡ç« ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å…³äºçŸ©é˜µçš„ï¼Œç¬¬äºŒéƒ¨åˆ†â€œä½¿ç”¨Androidå’ŒJavaè¿›è¡Œ2Dè½¬æ¢â€æ˜¯å…³äºå¦‚ä½•åœ¨Javaå’ŒAndroidä¸Šå°†å…³äºçŸ©é˜µçš„çŸ¥è¯†åº”ç”¨åˆ°ä»£ç ä¸­ã€‚
Matrixæ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘åœ¨å¯æ±—å­¦é™¢ï¼ˆKhan Academyï¼‰ä¸Šå‘ç°ä¸€é—¨å…³äºçŸ©é˜µçš„å¾ˆå¥½çš„ä»£æ•°è¯¾ç¨‹ã€‚
...</p></div><footer class=entry-footer><span title='2021-02-08 10:38:22 +0000 UTC'>February 8, 2021</span>&nbsp;Â·&nbsp;<span>23 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to [è¯‘]Androidå¼€å‘æ‰€éœ€è¦çš„çŸ©é˜µçŸ¥è¯†" href=https://anlyjiang.github.io/posts/android%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E7%9F%A9%E9%98%B5%E7%9F%A5%E8%AF%86/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ç¼–å†™ä¸€ä¸ªAndroid Gradleæ’ä»¶</h2></header><div class=entry-content><p>gradleæœ‰ä¸‰ç§ç¼–å†™æ’ä»¶çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨åœ¨é¡¹ç›®ä¸­çš„buildSrcæ¨¡å—ä¸­ç¼–å†™æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªåº”ç”¨äºAndroidé¡¹ç›®çš„æ ¹æ®flavorè¿‡æ»¤soåº“çš„gradleæ’ä»¶ï¼›
æ¦‚è¿° è‡ªå®šä¹‰gradleæ’ä»¶æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼ˆğŸ”—é“¾æ¥ï¼‰ï¼š
åœ¨buildscriptä¸­ç›´æ¥ç¼–å†™ï¼› åœ¨buildSrcé¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ä»£ç ï¼› åœ¨ç‹¬ç«‹çš„é¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ä»£ç ï¼› è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨buildSrcæ–¹å¼å®ç°ä¸€ä¸ªgradleæ’ä»¶ã€‚
æ–°å»º buildSrc module gradleä¼šåœ¨é¡¹ç›®ä¸­å¯»æ‰¾åç§°ä¸ºbuildSrcæ¨¡å—ï¼Œå°†å…¶åŠ è½½ä¸ºgradleçš„æ’ä»¶ä»£ç ç›®å½•ã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥é€šè¿‡èœå•æ–°å»ºä¸€ä¸ªåä¸º buildSrc çš„java/kotlinæ¨¡å—ã€‚
ç„¶ååœ¨build.gradleä¸­æ·»åŠ ç›¸å…³çš„plugin(java-gradle-plugin)åŠä¾èµ–ï¼š
plugins { id 'java' id 'java-gradle-plugin' id "org.jetbrains.kotlin.jvm" version '1.3.61' } group = "io.github.hanlyjiang.gradle" version = "0.0.2" dependencies { testCompile group: 'junit', name: 'junit', version: '4.12' // æ·»åŠ androidç›¸å…³build toolsä¾èµ–ï¼Œä»¥ä¾¿ä½¿ç”¨ android gradle ç›¸å…³çš„API compile 'com.android.tools.build:gradle:3.2.0' } ç¼–å†™æ’ä»¶ éœ€æ±‚ç®€ä»‹ **åº”ç”¨åœºæ™¯ï¼š**æˆ‘ä»¬çš„äº§å“ä¸­é›†æˆäº†ä¸¤ç§VPN SDKï¼Œä½†æ˜¯å…·ä½“åˆ°æ¯ä¸ªé¡¹ç›®ä¸Šé¢ï¼Œéƒ½åªä¼šè½åœ°åˆ°å…·ä½“çš„ä¸€ç§ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æ’é™¤å¯¹åº”çš„SDKçš„SOåº“ä»¥å‡å°APPåŒ…å¤§å°ï¼Œä¸åŒçš„åœ°åŒºçš„æ‰“åŒ…é…ç½®é€šè¿‡flavoræ¥è¿›è¡ŒåŒºåˆ†é…ç½®ï¼Œå³æ¯ä¸ªåœ°åŒºä¼šå¯¹åº”ä¸åŒçš„flavorï¼›
éœ€æ±‚æå–ï¼š è¿™é‡Œå®é™…ä¸Šæˆ‘ä»¬éœ€è¦çš„æ˜¯èƒ½å¤Ÿæ ¹æ®flavorï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ç§»é™¤æŒ‡å®šçš„soæ–‡ä»¶ï¼›
å®ç°æ€è·¯ï¼š
flavoré…ç½®æ–¹å¼ï¼šåœ¨flavorä¸­é…ç½®ä¸€ä¸ªbuildConfigFieldå­—æ®µï¼Œç”¨äºæŒ‡å®šæˆ‘ä»¬çš„flavoréœ€è¦çš„é…ç½®
// é…ç½®VPNç±»å‹ buildConfigField "String", "VPN_TYPE", "\"$VpnType.SANG_FOR\"" æ’ä»¶é…ç½®ï¼šæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªso_excludeé…ç½®æ¥æŒ‡å®šå…·ä½“çš„excludeè§„åˆ™ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µã€‚
buildConfigFieldKey ç”¨äºæŒ‡å®šä¹‹å‰åœ¨flavorä¸­å®šä¹‰çš„é…ç½®ï¼› configMap ä¸ºä¸€ä¸ªé…ç½®è¡¨ï¼ŒæŒ‡å®šä¸Šé¢çš„å­—æ®µå¯å–çš„å€¼ï¼Œå³å¯¹åº”å€¼åº”è¯¥excludeçš„soæ–‡ä»¶åˆ—è¡¨ï¼› so_exclude { /** * ä½¿ç”¨VPN_TYPE æ¥è®¾ç½®soè¿‡æ»¤çš„è§„åˆ™ */ buildConfigFieldKey = "VPN_TYPE" configMap = [ (VpnType.H3C_iNode.name()): [ // æ–°åä¸‰è¿‡æ»¤æ·±ä¿¡æœçš„ "lib/armeabi-v7a/libauth_forward.so", "lib/armeabi-v7a/libhttps.so", "lib/armeabi-v7a/libpkcs12cert.so", "lib/armeabi-v7a/libsvpnservice.so" ], (VpnType.SANG_FOR.name()) : [ // æ·±ä¿¡æœè¿‡æ»¤æ–°åä¸‰çš„ "lib/armeabi-v7a/libies.so", ], (VpnType.NONE.name()) : [ // å¦‚é…ç½®æˆ NONEï¼Œåˆ™è¿‡æ»¤æ‰æ‰€æœ‰çš„VPNçš„ // æ·±ä¿¡æœçš„so "lib/armeabi-v7a/libauth_forward.so", "lib/armeabi-v7a/libhttps.so", "lib/armeabi-v7a/libpkcs12cert.so", "lib/armeabi-v7a/libsvpnservice.so", // inodeçš„so "lib/armeabi-v7a/libies.so", ] ] } å®šä¹‰æ’ä»¶åŠä½¿ç”¨æ’ä»¶ç®€ä»‹ æ’ä»¶éœ€è¦ç»§æ‰¿ org.gradle.api.Pluginï¼Œå¯åœ¨Pluginå¯¹æ„å»ºæµç¨‹è¿›è¡Œè‡ªå®šä¹‰ï¼ˆå¦‚ï¼šåˆ›å»ºä»»åŠ¡ï¼Œå®šä¹‰ä»»åŠ¡å…³ç³»ï¼Œä¿®æ”¹å·²æœ‰ä»»åŠ¡åŠ¨ä½œç­‰ï¼‰ æ’ä»¶å¦‚æœéœ€è¦èƒ½å¤Ÿè¯»å–ä¸€äº›é…ç½®ï¼Œå¯é€šè¿‡ project.extensions.create æ¥ä»build.gradleä¸­æå– å¦‚éœ€åœ¨è‡ªå·±çš„ androidä»£ç æ¨¡å—ä¸­ä½¿ç”¨æ’ä»¶ï¼Œé€šè¿‡ apply plugin: æ’ä»¶ç±»å¼•ç”¨å³å¯ æ’ä»¶å®ç° æ’ä»¶çš„å®ç°å¦‚ä¸‹ï¼š è¯»å– so_exclude é…ç½®ï¼Œå­˜å‚¨åˆ° extensionï¼ˆç±»å‹ä¸º FlavorSoExcludePluginExtension ï¼‰ä¸­ è¯»å– android çš„é…ç½®ï¼Œæ‰¾åˆ° AppExtensionç±»å‹çš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨äº† apply application çš„æ¨¡å—çš„é…ç½®ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­åªæœ‰ä¸€ä¸ªappæ¨¡å—åº”ç”¨æ­¤é…ç½®-å³æˆ‘ä»¬çš„apkæ¨¡å—ï¼› éå†æ‰€æœ‰å˜ä½“ï¼Œè·å–å¯¹åº”å˜ä½“çš„ so_exclude å¯¹åº”çš„é…ç½®å­—æ®µçš„å€¼ï¼Œå»ºç«‹flavoråˆ°é…ç½®å€¼çš„æ˜ å°„è¡¨ï¼› ä¿®æ”¹ packageApplication ä»»åŠ¡ï¼Œè®©å…¶åœ¨æ‰§è¡Œä¹‹å‰å³åˆ é™¤å¾…æ‰“åŒ…ä¸´æ—¶ç›®å½•ä¸­çš„å¯¹åº”soæ–‡ä»¶ï¼› package io.github.hanlyjiang.gradle.plugin.soexclude import com.android.build.gradle.AppExtension import com.android.build.gradle.api.ApkVariantOutput import org.gradle.api.Plugin import org.gradle.api.Project import org.gradle.api.logging.LogLevel import org.gradle.api.logging.Logger import org.gradle.api.logging.Logging import java.io.File /** * so æ’ä»¶çš„ gradle é…ç½®å®ä½“ */ open class FlavorSoExcludePluginExtension { /** * so è¿‡æ»¤é…ç½®è¡¨ */ var configMap: Map&lt;String, List&lt;String>>? = null /** * é…ç½®å­—æ®µçš„åç§° */ var buildConfigFieldKey: String = FlavorSoExcludePlugin.DEFAULT_CONFIG_KEY } /** * flavor so æ‰“åŒ…è¿‡æ»¤é…ç½® * * ## ç”¨æ³•è¯´æ˜ï¼š * * 1. åœ¨build.gradle ä¸­å¼•å…¥æ’ä»¶ &lt;code>apply plugin: FlavorSoExcludePlugin&lt;/code>; * 2. æ·»åŠ  so_exclude é…ç½®æ®µï¼š * * ```groovy * so_exclude { * buildConfigFieldKey = "VPN_TYPE" * configMap = [ * (VpnType.H3C_iNode.name()): [ * "lib/armeabi-v7a/libauth_forward.so", * "lib/armeabi-v7a/libhttps.so", * "lib/armeabi-v7a/libpkcs12cert.so", * "lib/armeabi-v7a/libsvpnservice.so" * ], * (VpnType.SANG_FOR.name()) : [ * "lib/armeabi-v7a/libies.so", * ], * (VpnType.NONE.name()) : [ * // æ·±ä¿¡æœçš„so * "lib/armeabi-v7a/libauth_forward.so", * "lib/armeabi-v7a/libhttps.so", * "lib/armeabi-v7a/libpkcs12cert.so", * "lib/armeabi-v7a/libsvpnservice.so", * // inodeçš„so * "lib/armeabi-v7a/libies.so", * ] * ] *} *``` * 3. åœ¨flavorçš„é…ç½®ä¸­æ·»åŠ  buildConfigField é…ç½®ï¼Œå¦‚ï¼š * ``` * buildConfigField "String", "VPN_TYPE", "\"$VpnType.H3C_iNode\"" * ``` * å…¶ä¸­å­—æ®µçš„åç§°ä¸º ä¹‹å‰ so_exclude ä¸­é…ç½®çš„ `buildConfigFieldKey` å­—æ®µï¼Œå¯¹åº”çš„å€¼ä¸º configMap ä¸­çš„ key ï¼Œå¦‚æ­¤é…ç½®åï¼Œæ‰“åŒ…æ—¶å°±ä¼šå°†configMapå¯¹åº”keyä¸­çš„soåˆ—è¡¨è¿‡æ»¤æ‰ * @author hanlyjiang 09/20/20 2:42 PM * @version 1.0 */ class FlavorSoExcludePlugin : Plugin&lt;Project> { companion object { const val PLUGIN_NAME = "FlavorSoExcludePlugin" const val DEFAULT_CONFIG_KEY = "SO_EXCLUDE" const val DEBUG = false private val logger: Logger = Logging.getLogger(FlavorSoExcludePlugin::class.java) fun logInfo(msg: String) { logger.log(LogLevel.LIFECYCLE, "&lt;- $PLUGIN_NAME: $msg ->") } fun logDebug(msg: String) { if (DEBUG) { logInfo(msg) } } } lateinit var extension: FlavorSoExcludePluginExtension override fun apply(project: Project) { // æ·»åŠ è‡ªå·±çš„é…ç½® extension = project.extensions.create("so_exclude", FlavorSoExcludePluginExtension::class.java) // åˆ›å»ºä¸€ä¸ªæ‰“å°é…ç½®çš„ä»»åŠ¡ï¼Œç”¨äºå®šä¹‰ val task = project.tasks.create("printConfig") task.group = "soExclude-plugin" task.doLast { logInfo("-- é…ç½®å­—æ®µï¼šbuildConfigFieldKey= " + extension.buildConfigFieldKey) logInfo("-- å½“å‰é…ç½®ï¼š") extension.configMap?.run { this.keys.forEach { key -> logInfo("-- config: $key -- ") get(key)?.forEach { logInfo("values: $it") } logInfo("------------------ ") } } } // è·å–androidçš„é…ç½® val androidExtensions = project.extensions.getByName("android") logInfo("" + androidExtensions.javaClass) if (androidExtensions is AppExtension) { // applicatoinç±»å‹çš„å°±è¿›è¡Œä»»åŠ¡å¤„ç† initPackageOptions(project, androidExtensions) } } /** * vpn é…ç½® */ private var configMap: MutableMap&lt;String, String> = HashMap() private fun initPackageOptions(project: Project, android: AppExtension) { project.afterEvaluate { android.productFlavors.all { val flavorName = it.name logDebug("--productFlavors : ${it.name}") var soExcludeConfig = "" it.buildConfigFields[extension.buildConfigFieldKey]?.run { soExcludeConfig = value.replace("\"", "") } logDebug("--productFlavors : $flavorName, soExcludeConfig: $soExcludeConfig") configMap[flavorName] = soExcludeConfig } android.applicationVariants.all { variant -> logDebug("app variant flavorName: ${variant.flavorName}") val flavorName = variant.flavorName val configKey = configMap[flavorName] variant.outputs.forEach { output -> if (output is ApkVariantOutput) { //æ ¸å¿ƒé€»è¾‘ï¼šä¿®æ”¹packageApplicationä»»åŠ¡ï¼Œåœ¨ç”ŸæˆapkåŒ…ä¹‹å‰ï¼Œåˆ é™¤æ‰“åŒ…ä¸´æ—¶ç›®å½•ä¸­çš„soæ–‡ä»¶å³å¯é¿å…æ‰“åŒ…soåˆ°apkä¸­ output.packageApplication.doFirst { output.packageApplication.jniFolders.all { // jniFolder ç›®å½•ä¸ºæœ€åæ‰“åŒ…apkæ—¶ï¼Œç”¨äºå­˜æ”¾soæ–‡ä»¶çš„ä¸´æ—¶ç›®å½• logInfo("å˜ä½“åç§°: ${variant.flavorName} , configKey: ${configKey}, jniFolders: " + it.absoluteFile) handleExclude(it, configKey); true } } } } } } } private fun handleExclude(jniFolder: File?, configKey: String?) { extension.configMap?.run { val soExcludeList: List&lt;String>? = get(configKey) soExcludeList?.run { deleteJniSoFiles(jniFolder, *(soExcludeList.toTypedArray())) } } } private fun deleteJniSoFiles(jniFolder: File?, vararg files: String) { for (item in files) { val file = File(jniFolder, item) if (file.exists()) { val deleteResult = file.delete() logInfo("åˆ é™¤soæ–‡ä»¶ $item : ${if (deleteResult) "æˆåŠŸ" else "å¤±è´¥"}") } } } } ä½¿ç”¨æšä¸¾è¿›è¡Œé…ç½® æˆ‘ä»¬åœ¨buildSrcä¸­å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»ï¼Œç”¨äºçº¦å®šå¯ä»¥é…ç½®çš„å€¼ï¼Œå³å¯ä»¥æ¸…æ™°å®šä¹‰é…ç½®å€¼é¿å…é…ç½®æ—¶ç›´æ¥å†™å­—ç¬¦ä¸²å®¹æ˜“å‡ºé”™ï¼Œåˆå¯ä»¥æ”¯æŒä»£ç è‡ªåŠ¨è¡¥å…¨æ–¹ä¾¿é…ç½®ã€‚
...</p></div><footer class=entry-footer><span title='2020-09-20 10:18:50 +0000 UTC'>September 20, 2020</span>&nbsp;Â·&nbsp;<span>4 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to ç¼–å†™ä¸€ä¸ªAndroid Gradleæ’ä»¶" href=https://anlyjiang.github.io/posts/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAandroid-gradle%E6%8F%92%E4%BB%B6/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Dockeræ„å»ºArmæ¶æ„é•œåƒ-é€šç”¨æ­¥éª¤</h2></header><div class=entry-content><p>ä»‹ç»ARMç‰ˆæœ¬çš„Dockeré•œåƒçš„æ„å»ºï¼ŒåŒ…æ‹¬ARMæœºå™¨ä¸ŠDockerçš„å®‰è£…ï¼Œåœ¨ARMæœºå™¨ä¸Šæ„å»ºé•œåƒï¼ŒåŠåœ¨amd64æœºå™¨ä¸Šä½¿ç”¨buildxäº¤å‰æ„å»ºarmç‰ˆæœ¬é•œåƒã€‚
å‰è¨€ ç°åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯¹æœåŠ¡çš„å›½äº§åŒ–é€‚é…æœ‰æ‰€è¦æ±‚ï¼Œä¸€èˆ¬çš„å›½äº§åŒ–å¹³å°éƒ½æä¾›armç‰ˆæœ¬çš„linuxäº‘ç¯å¢ƒä¾›æˆ‘ä»¬è¿›è¡ŒæœåŠ¡éƒ¨ç½²ï¼Œå› æ­¤éœ€è¦æ„å»ºarmç‰ˆæœ¬çš„é•œåƒã€‚
æµ‹è¯•æœºä¿¡æ¯ CPU FT-1500A 4æ ¸ arm64 å†…å­˜ 8G OS éº’éºŸV10 åŒ…ç®¡ç†å™¨ apt ARMæœºå™¨ä¸Šå®‰è£…Docker Dockerå®˜æ–¹æ–‡æ¡£
Dockeræ”¯æŒå¦‚ä¸‹ç³»ç»ŸåŠæ¶æ„
å›½äº§ç³»ç»Ÿä¾æ®å®‰è£…åŒ…çš„æ ¼å¼é€‰æ‹©å¯¹åº”çš„å‚è€ƒç³»ç»Ÿå³å¯ï¼Œå¦‚éº’éºŸv10åŸºäºubuntuï¼Œå¯ä»¥æŒ‰å®˜æ–¹æ–‡æ¡£- Install Docker Engine on Ubuntuè¿›è¡Œå®‰è£…ã€‚
æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ geostar@geostar-ft1500a:~$ cat /proc/version Linux version 4.4.131-20200515.kylin.desktop-generic (YHKYLIN-OS@Kylin) (gcc version 5.5.0 20171010 (Ubuntu/Linaro 5.5.0-12ubuntu1~16.04) ) #kylin SMP Fri May 15 11:29:10 CST 2020 è¿™é‡Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿæ˜¯åŸºäºubuntu16.04 çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ ubuntu16.04ï¼ˆxenialï¼‰çš„è½¯ä»¶æº
æ·»åŠ è½¯ä»¶æº å‚è€ƒï¼š https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/
æ·»åŠ æ¸…åé•œåƒè½¯ä»¶æºï¼ˆarmæ¶æ„ï¼‰
# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse æ›´æ–°ï¼š
...</p></div><footer class=entry-footer><span title='2020-08-19 17:20:59 +0000 UTC'>August 19, 2020</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Dockeræ„å»ºArmæ¶æ„é•œåƒ-é€šç”¨æ­¥éª¤" href=https://anlyjiang.github.io/posts/docker-arm%E6%9E%B6%E6%9E%84%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA-%E9%80%9A%E7%94%A8%E6%AD%A5%E9%AA%A4/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Gitlab-Runnerå®‰è£…å¹¶æ³¨å†Œ</h2></header><div class=entry-content><p>æœ¬æ–‡ä»‹ç»Gitlab-Runnerçš„å®‰è£…è¿è¡Œï¼ˆåŒ…æ‹¬dockeræ–¹å¼å®‰è£…è¿è¡ŒåŠäºŒè¿›åˆ¶ç›´æ¥è¿è¡Œï¼‰ï¼Œå¹¶ä»‹ç»å¦‚ä½•å°†Gitlabæ³¨å†Œåˆ°Gitlabã€‚åŒæ—¶è¿˜ä»‹ç»äº†gitlab-runnerçš„ä¸€äº›å¸¸ç”¨æ“ä½œå‘½ä»¤ã€‚
å®‰è£…Gitlab-Runner gitlab-runnerå¯ä»¥ä½¿ç”¨dockeræ–¹å¼è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨ä¸»æœºä¸Šè¿è¡Œå…¶äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯æŒ‰å¦‚ä¸‹æ–¹å¼è¿›è¡Œé€‰æ‹©ï¼š
æ‰§è¡Œé€šç”¨çš„æ„å»ºæµ‹è¯•ä»»åŠ¡åŠä¸ä¸éœ€è¦ç›´æ¥è®¿é—®ä¸»æœºç›®å½•çš„ï¼Œä»¥dockeræ–¹å¼å®‰è£…ï¼› æ‰§è¡Œéƒ¨ç½²ç±»ä»»åŠ¡æˆ–éœ€è¦ç›´æ¥è®¿é—®ä¸»æœºç›®å½•çš„ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å®‰è£…ï¼› ä»¥ä¸‹åˆ†åˆ«ä»‹ç»ä¸Šè¿°ä¸¤ç§å®‰è£…æ–¹å¼ã€‚
ä½¿ç”¨dockerå®‰è£…gitlab-runner ä½¿ç”¨dockeræ–¹å¼å®‰è£…çš„ï¼Œéœ€å…ˆåœ¨ä¸»æœºä¸Šå®‰è£…dockerç¯å¢ƒï¼Œå¯å‚è€ƒ Docker å®˜æ–¹å®‰è£…æ–‡æ¡£ã€‚ä»¥ä¸‹æ“ä½œå‡è®¾ä¸»æœºä¸Šå·²æ­£ç¡®å®‰è£…å¹¶é…ç½®äº†dockerè¿è¡Œç¯å¢ƒï¼›
æç¤ºï¼šå¯ä»¥ä½¿ç”¨åŸºäºalpineçš„é•œåƒæ¥å‡å°å¤§å°
# å»ºç«‹é…ç½®æŒ‚è½½ç›®å½• mkdir -p /data/gitlab-runner/config # å»ºç«‹æ„å»ºç›®å½•æŒ‚è½½ç›®å½• mkdir -p /data/gitlab-runner/home # æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºäºalpineçš„é•œåƒæ¥å‡å°å¤§å°ï¼›ä½¿ç”¨ --restart æ ‡è¯†æ¥è‡ªåŠ¨é‡å¯ docker run -d --name gitlab-runner --restart always \ -v /data/gitlab-runner/config:/etc/gitlab-runner \ -v /data/gitlab-runner/home:/home/gitlab-runner \ -v /var/run/docker.sock:/var/run/docker.sock \ gitlab/gitlab-runner:alpine # é€šè¿‡ä»¥ä¸‹å‘½ä»¤è®¾ç½®dockerå¼€æœºè‡ªå¯ sudoÂ systemctl enable docker dockerå®‰è£…çš„gitlab-runnerå¸¸ç”¨æ“ä½œ è¿è¡Œå‘½ä»¤ ä½¿ç”¨å·²æœ‰å®¹å™¨
# å®¹å™¨å·²ç»è¿è¡Œçš„æƒ…å†µä¸‹ # 1. äº¤äº’å¼æ‰§è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç„¶åè¾“å…¥å‘½ä»¤ docker exec -it gitlab-runner /bin/bash # ç„¶åæ‰§è¡Œå‘½ä»¤ gitlab-runer --help # 2. å•æ¬¡æ‰§è¡Œ docker exec gitlab-runner gitlab-runner --help ä½¿ç”¨ä¸´æ—¶çš„ï¼š
...</p></div><footer class=entry-footer><span title='2020-06-11 16:11:58 +0000 UTC'>June 11, 2020</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Gitlab-Runnerå®‰è£…å¹¶æ³¨å†Œ " href=https://anlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%B3%A8%E5%86%8Cgitlab-runner/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Gitlabå‡çº§è®°å½•ï¼ˆ12.10.0-13.0.6ï¼‰</h2></header><div class=entry-content><p>å°†gitlabï¼ˆDockeræ–¹å¼è¿è¡Œï¼‰ä»12.10.0å‡çº§åˆ°13.0.6 çš„è¿‡ç¨‹è®°å½•ã€‚
å‡çº§å‡†å¤‡å·¥ä½œ ç¡®å®šå‡çº§è·¯çº¿ ç°æœ‰ç‰ˆæœ¬ï¼š12.10.0 å½“ä¸‹ç›®æ ‡ç‰ˆæœ¬ï¼š13.0.6 ç»“åˆ Gitlabå‡çº§è·¯çº¿å»ºè®® ç¡®å®šå¦‚ä¸‹å‡çº§è·¯çº¿ï¼š 12.10.0 -> 13.0.0 -> 13.0.6 ç”±äºæˆ‘ä»¬è·¨å¤§ç‰ˆæœ¬å‡çº§äº†ï¼ˆ12-13ï¼‰ï¼Œæ‰€ä»¥å¼•å…¥äº† 13.0.0 çš„ä¸­é—´å‡çº§è·¯å¾„ è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯ æŸ¥çœ‹ gitlab releaseé¡µé¢ ä¿¡æ¯ æŸ¥çœ‹ gitlab docker hub è·å–gitlab-ce dockeré•œåƒç‰ˆæœ¬TAGï¼š 13.0.0: gitlab/gitlab-ce:13.0.0-ce.0 13.0.6: gitlab/gitlab-ce:13.0.6-ce.0 æŸ¥çœ‹å‡çº§æ³¨æ„äº‹é¡¹ å‡çº§æµç¨‹ï¼š https://docs.gitlab.com/omnibus/docker/README.html#update ç‰ˆæœ¬å‡çº§å»ºè®®è·¯çº¿ï¼šhttps://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations å¤‡ä»½ å¤‡ä»½æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¤‡ä»½çš„æ•°æ®é‡ä¸ç›¸åŒï¼š
å¯¹dockeræŒ‚è½½çš„gitlabæ•°æ®ç›®å½•æ•´ä½“å¤‡ä»½ ä½¿ç”¨ gitlabçš„ gitlab-backup create å‘½ä»¤åˆ›å»ºå¤‡ä»½ï¼Œå¯åŒ…å«æ‰€æœ‰gitä»“åº“ï¼ŒåŒ…æ‹¬wikiåŠæƒé™ä¿¡æ¯ã€‚ å»ºè®®å¯¹æŒ‚è½½çš„gitlabæ•°æ®ç›®å½•è¿›è¡Œä¸€æ¬¡æ•´ä½“å¤‡ä»½ï¼Œç›®å‰æš‚ä¸æ¸…æ¥šgitlab-backup createå‘½ä»¤åˆ›å»ºçš„å¤‡ä»½æ˜¯å¦åŒ…å«ciç›¸å…³å†…å®¹ã€‚
ä»¥ä¸‹å¯¹gitalb-backup å‘½ä»¤æ‰§è¡Œå¤‡ä»½è¿›è¡Œç®€è¦ä»‹ç»ã€‚æ•°æ®ç›®å½•çš„å¤‡ä»½æ–¹å¼ç›´æ¥å¯¹ç›®å½•è¿›è¡Œæ“ä½œå³å¯ã€‚
è¿›å…¥åˆ°gitlabéƒ¨ç½²æœºå™¨ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
docker exec -t &lt;container name> gitlab-backup create # å¦‚æœdockerå®¹å™¨çš„åç§°æ˜¯gitlabï¼Œåˆ™å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¤‡ä»½å®Œæˆåä½äºgitlabçš„æ•°æ®ç›®å½•ï¼Œå¦‚ï¼š/data/gitlab/data/backups/ docker exec -t $(docker ps | grep gitlab | awk '{print $1}') gitlab-backup create # å¤‡ä»½é…ç½®ç›®å½• sudo tar -cvf /data/gitlab/data/backups/1592710400_2020_06_21_12.10.0_gitlab_config_backup.tar /data/gitlab/config æ‰§è¡Œå‡çº§ï¼š è¿›å…¥åˆ°gitlabéƒ¨ç½²æœºå™¨ ssh -p 10022 geostar@172.18.0.208 è·å–Gitlabä¸­é—´ç‰ˆæœ¬é•œåƒåŠæœ€ç»ˆç‰ˆæœ¬é•œåƒ docker pull gitlab/gitlab-ce:13.0.0-ce.0 docker pull gitlab/gitlab-ce:13.0.6-ce.0 åœæ­¢å¹¶ç§»é™¤ç°æœ‰æœåŠ¡ sudo docker stop gitlab sudo docker rm gitlab è¿›è¡Œå‡çº§ï¼Œä½¿ç”¨ 13.0.0 çš„é•œåƒè¿è¡Œgitlabï¼Œgitlabä¼šè‡ªåŠ¨å¤„ç†æ•°æ®å‡çº§æµç¨‹ sudo docker run --detach \ --hostname 172.18.0.208 \ --publish 443:443 --publish 80:80 --publish 22:22 \ --name gitlab \ --restart always \ --volume /data/gitlab/config:/etc/gitlab \ --volume /data/gitlab/logs:/var/log/gitlab \ --volume /data/gitlab/data:/var/opt/gitlab \ gitlab/gitlab-ce:13.0.0-ce.0 å¾… 13.0.0 å‡çº§å®Œæ¯•ä¹‹åï¼Œå‡çº§åˆ° 13.0.6ï¼Œä½¿ç”¨ 13.0.6 çš„é•œåƒè¿è¡Œgitlab sudo docker stop gitlab sudo docker rm gitlab sudo docker run --detach \ --hostname 172.18.0.208 \ --publish 443:443 --publish 80:80 --publish 22:22 \ --name gitlab \ --restart always \ --volume /data/gitlab/config:/etc/gitlab \ --volume /data/gitlab/logs:/var/log/gitlab \ --volume /data/gitlab/data:/var/opt/gitlab \ gitlab/gitlab-ce:13.0.6-ce.0 ç¡®è®¤å‡çº§æˆåŠŸ ç™»å½•ç®¡ç†å‘˜è´¦å·ï¼Œè¿›å…¥ç®¡ç†ä¸­å¿ƒ-ä»ªè¡¨ç›˜ï¼ŒæŸ¥çœ‹gitlabç‰ˆæœ¬ï¼š
...</p></div><footer class=entry-footer><span title='2020-05-21 16:50:41 +0000 UTC'>May 21, 2020</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Gitlabå‡çº§è®°å½•ï¼ˆ12.10.0-13.0.6ï¼‰" href=https://anlyjiang.github.io/posts/gitlab-sheng-ji-ji-lu-12100-1306/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Gitlabå®‰è£…é…ç½®</h2></header><div class=entry-content><p>ä¸»è¦å†…å®¹ï¼š
ä½¿ç”¨dockerè¿è¡Œ gitlabï¼› é…ç½®LDAPåŠé‚®ç®±ï¼› é…ç½®ç®¡ç†å‘˜è´¦å·ï¼› é…ç½®é‚®ç®±é€šçŸ¥ï¼› å…³é—­ç”¨æˆ·æ³¨å†Œï¼› å®‰è£… æˆ‘ä»¬ä½¿ç”¨dockeræ¥å®‰è£…Gitlabï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å®‰è£…è¿è¡Œï¼Œå®Œæˆåä½¿ç”¨
export GITLAB_DATA=/data/gitlab # è®¾ç½®ä¸»æœºçš„ipåŸŸå export HOST_IP=192.168.43.62 mkdir $GITLAB_DATA/config $GITLAB_DATA/logs $GITLAB_DATA/data docker run --detach \ --hostname $HOST_IP \ --publish 443:443 --publish 80:80 --publish 22:22 \ --name gitlab \ --restart always \ --volume $GITLAB_DATA/config:/etc/gitlab \ --volume $GITLAB_DATA/logs:/var/log/gitlab \ --volume $GITLAB_DATA/data:/var/opt/gitlab \ gitlab/gitlab-ce:13.9.1-ce.0 æ•°æ®å…¨éƒ¨æŒ‚è½½åœ¨å¤–éƒ¨ç›®å½• GITLAB_DATA ä¸­ --hostname 192.168.43.62 : æŒ‡å®šå½“å‰æœåŠ¡çš„IPæˆ–è€…åŸŸåï¼Œåç»­å°†ä¼šæ˜¾ç¤ºä¸ºgitlabä»£ç ä»“åº“çš„å…‹éš†åœ°å€ --restart always : è®¾ç½®æœåŠ¡è‡ªåŠ¨é‡å¯ æŸ¥çœ‹gitlabçš„å¯ç”¨ç‰ˆæœ¬ï¼š
dockerhub/gitlab-ce gitlab release page æŸ¥çœ‹å¯åŠ¨çŠ¶æ€ å¯åŠ¨æœŸé—´å¯ä»¥ä½¿ç”¨ docker ps æŸ¥çœ‹çŠ¶æ€ï¼Œå¦‚STATUSä¸­æ˜¾ç¤ºä¸ºstartingåˆ™è¡¨ç¤ºæœåŠ¡è¿˜åœ¨å¯åŠ¨ä¸­ï¼Œå¦‚æ˜¾ç¤ºä¸ºhealthyåˆ™è¡¨ç¤ºæœåŠ¡å·²æ­£å¸¸å¯åŠ¨ï¼Œå³å¯è®¿é—® http://192.168.43.62 è®¿é—®Gitlabçš„webåœ°å€ã€‚
...</p></div><footer class=entry-footer><span title='2020-04-06 11:54:06 +0000 UTC'>April 6, 2020</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Gitlabå®‰è£…é…ç½®" href=https://anlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEgitlab/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android-WebViewä¸­JavaåŒJSçš„äº¤äº’</h2></header><div class=entry-content><p>Androidæä¾›çš„å‡ ç§JSåŒJavaäº¤äº’çš„æ–¹å¼ä»‹ç»ï¼Œé€šè¿‡ä¸€ä¸ªå®ä¾‹ä»‹ç»é€šè¿‡evaluateJavascriptè°ƒç”¨JSæ–¹æ³•ã€‚
Androidæä¾›çš„jsåŸç”Ÿäº¤äº’API Androidè°ƒç”¨ JS ä»£ç ï¼š é€šè¿‡WebViewçš„ loadUrl() é€šè¿‡WebViewçš„ evaluateJavascript() æ–¹æ³• Androidè°ƒç”¨ JS ä»£ç ä¸»è¦ä½¿ç”¨ ç¬¬äºŒç§æ–¹æ³•ã€‚
JS è°ƒç”¨ Android ä»£ç ï¼š é€šè¿‡ WebView çš„ addJavascriptInterface() è¿›è¡Œå¯¹è±¡æ˜ å°„ é€šè¿‡WebChromeClientçš„ onJsAlert() ã€onJsConfirm()ã€onJsPrompt() æ–¹æ³•å›è°ƒæ‹¦æˆªJSå¯¹è¯æ¡†alert()ã€confirm()ã€prompt() æ¶ˆæ¯ é€šè¿‡WebViewClientçš„shouldOverrideUrlLoading() æ–¹æ³•å›è°ƒæ‹¦æˆª url ç¬¬2å’Œç¬¬3ä¸­æ–¹å¼èƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ç¬¬ä¸€ç§ã€‚
å®˜æ–¹ç¤ºä¾‹ä»£ç ï¼š
addJavaScriptInterface æ³¨å…¥åŸç”Ÿå¯¹è±¡åˆ°JS + åŸç”Ÿé€šè¿‡loadUrl è°ƒç”¨JSä»£ç 
class JsObject { @JavascriptInterface public String toString() { return "injectedObject"; } } webview.getSettings().setJavaScriptEnabled(true); // æ³¨å…¥Javaå¯¹è±¡åˆ° JavaScript ï¼ŒJSä¸­å¯ä»¥é€šè¿‡ injectedObject æ¥è°ƒç”¨åŸç”Ÿä»£ç  webView.addJavascriptInterface(new JsObject(), "injectedObject"); webView.loadData("", "text/html", null); webView.loadUrl("javascript:alert(injectedObject.toString())"); æ³¨æ„ï¼š
Android 4.2ï¼ˆJELLY BEANï¼‰åŠæ›´é«˜ç‰ˆæœ¬ä¸­åªæœ‰è¢«JavascriptInterfaceæ³¨è§£çš„publicæ–¹æ³•æ‰å¯ä»¥åœ¨jsä¸­è°ƒç”¨ï¼› Android4.2ä»¥ä¸‹è®¾å¤‡ä¸Šï¼Œæ‰€æœ‰publicæ–¹æ³•éƒ½å¯ä»¥è¢«jsè®¿é—®ï¼ˆåŒ…æ‹¬ç»§æ‰¿çš„ï¼‰ é€šè¿‡addJavaScriptInterfaceåŠ å…¥å¯¹è±¡ ï¼š å¿…é¡»åœ¨æ³¨å…¥å¯¹è±¡ä¹‹å‰å¯ç”¨JavaScriptï¼Œå¹¶ä¸”æ³¨å…¥çš„å¯¹è±¡ç›´åˆ°ä¸‹æ¬¡é¡µé¢é‡æ–°åŠ è½½æ‰ä¼šå‡ºç°åœ¨JavaScriptä¸­ã€‚ åº”ç”¨å®ä¾‹ï¼šJavaåŒVueäº¤äº’ æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢åŠ è½½å®Œæ¯•ä¹‹åæ›´æ–°æ•°æ®ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡Javaä¾§è°ƒç”¨JSçš„æ–¹æ³•æ¥å°†æ•°æ®ä¼ é€’ç»™JSé€šçŸ¥å…¶æ›´æ–°ï¼› é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨JSä¾§å®šä¹‰ä¸€ä¸ªæ¥æ”¶æ•°æ®çš„æ–¹æ³•ï¼Œä¸ºäº†èƒ½è®©Javaä¾§èƒ½æ–¹ä¾¿æ‰¾åˆ°ï¼Œæˆ‘ä»¬å°†æ–¹æ³•å®šä¹‰åˆ°windowå¯¹è±¡ä¸Šã€‚ ç„¶ååœ¨WebViewä¸­é¡µé¢åŠ è½½å®Œæ¯•ï¼ˆonPageFinishedï¼‰åï¼Œè°ƒç”¨ webView.evaluateJavascript æ¥è°ƒç”¨æ­¤JSæ–¹æ³•ï¼›
...</p></div><footer class=entry-footer><span title='2020-03-20 10:18:50 +0000 UTC'>March 20, 2020</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Android-WebViewä¸­JavaåŒJSçš„äº¤äº’" href=https://anlyjiang.github.io/posts/android-webview%E4%B8%ADjava%E5%90%8Cjs%E7%9A%84%E4%BA%A4%E4%BA%92/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å…³äº</h2></header><div class=entry-content><p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤
ğŸ  å…³äºæœ¬ç«™ ğŸ’¾ æˆ‘é‡åˆ°çš„é—®é¢˜å¤§æ¦‚ç‡å…¶ä»–äººä¹Ÿé‡åˆ°è¿‡ï¼Œä»å…¶ä»–äººé‚£é‡Œè·å–è¿‡è§£å†³æ–¹æ¡ˆ/çµæ„Ÿ/å¯å‘ï¼Œæ‰€ä»¥å¸Œæœ›åŒæ ·èƒ½å¤Ÿç»™äºˆå…¶ä»–äººå¸®åŠ©ä¸å¯å‘ã€‚ âŒšï¸ æ—¶é—´æ€»éš¾å¤Ÿç”¨ï¼Œä½†æ„¿æˆ‘çš„åˆ†äº«èƒ½èŠ‚çœæŸäººçš„æ—¶é—´ã€‚ ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è° ğŸ¤– ç¨‹åºå‘˜ï¼Œä¸»è¦æ˜¯ Androidï¼Œä¹Ÿæäº›åˆ«çš„ â›¹ å…´è¶£çˆ±å¥½ ğŸ“Ÿ ä»¥å‰ç©æ‰‹æœºï¼ŒMP3ï¼ŒMP4ï¼Œå¹³æ¿ï¼Œåæ¥ç©ç”µè„‘ ğŸ“¬ è”ç³»æˆ‘å‘€ ğŸ“® hanlyjiang@outlook.com ğŸ‘‡à­  ä¸‹æ–¹è¯„è®º à­  ğŸ‘‡</p></div><footer class=entry-footer><span title='2019-01-25 19:09:48 +0000 UTC'>January 25, 2019</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to å…³äº" href=https://anlyjiang.github.io/posts/about/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Hello Gridea</h2></header><div class=entry-content><p>ğŸ‘ æ¬¢è¿ä½¿ç”¨ Gridea ï¼
âœï¸ Gridea ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„â€¦ â€¦
Github
Gridea ä¸»é¡µ
ç¤ºä¾‹ç½‘ç«™
ç‰¹æ€§ğŸ‘‡ ğŸ“ ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ Markdown è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ
ğŸŒ‰ ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡
ğŸ·ï¸ ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„
ğŸ“‹ ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•
ğŸ’» ä½ å¯ä»¥åœ¨ Windowsï¼ŒMacOS æˆ– Linux è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯
ğŸŒ ä½ å¯ä»¥ä½¿ç”¨ ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ æˆ– Coding Pages å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°
ğŸ’¬ ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ Gitalk æˆ– DisqusJS è¯„è®ºç³»ç»Ÿ
ğŸ‡¬ğŸ‡§ ä½ å¯ä»¥ä½¿ç”¨ä¸­æ–‡ç®€ä½“æˆ–è‹±è¯­
ğŸŒ ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›
ğŸ–¥ ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥
ğŸŒ± å½“ç„¶ Gridea è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ
æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´
å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼
ğŸ˜˜ Enjoy~</p></div><footer class=entry-footer><span title='2018-12-12 00:00:00 +0000 UTC'>December 12, 2018</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Hello Gridea" href=https://anlyjiang.github.io/posts/hello-gridea/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Androidäº‹ä»¶åŠæ‰‹åŠ¿</h2></header><div class=entry-content><p>androidäº‹ä»¶åŸºç¡€åŠæ‰‹åŠ¿ï¼Œä¸»è¦å…³æ³¨å„ç§æ‰‹åŠ¿çš„ä½¿ç”¨åŠå…¶è®¡ç®—åŸç† ã€‚
Androidäº‹ä»¶åŸºç¡€ è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨æ¦‚å¿µ
äº‹ä»¶ç›‘å¬å™¨åŠäº‹ä»¶å¤„ç†ç¨‹åº å¯ç›´æ¥æŸ¥çœ‹ å®˜æ–¹æ–‡æ¡£ï¼Œæ­¤å¤„ä»…åšç®€è¦æè¿°ï¼›
äº‹ä»¶ç›‘å¬å™¨ Viewç±»çš„åŒ…å«ä¸€ä¸ªå›è°ƒæ–¹æ³•çš„æ¥å£ï¼Œé€šè¿‡setXXXListeneræ¥å®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºï¼›
äº‹ä»¶ç›‘å¬å™¨æ˜¯ View ç±»ä¸­åŒ…å«ä¸€ä¸ªå›è°ƒæ–¹æ³•çš„æ¥å£ã€‚å½“ç”¨æˆ·ä¸ç•Œé¢é¡¹ç›®ä¹‹é—´çš„äº’åŠ¨è§¦å‘å·²æ³¨å†Œç›‘å¬å™¨çš„ View å¯¹è±¡æ—¶ï¼ŒAndroid æ¡†æ¶å°†è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚
äº‹ä»¶ç›‘å¬å™¨æ¥å£ä¸­åŒ…å«ä»¥ä¸‹å›è°ƒæ–¹æ³•ï¼šonClick()ï¼ŒonLongClick()ï¼ŒonFocusChange()ï¼ŒonKey()ï¼ŒonTouch()ï¼ŒonCreateContextMenu()
æˆ‘ä»¬é‡ç‚¹å…³æ³¨onTouchï¼š
onTouch()ï¼š åœ¨ View.OnTouchListener ä¸­ã€‚å½“ç”¨æˆ·æ‰§è¡Œå¯è§†ä¸ºè§¦æ‘¸äº‹ä»¶çš„æ“ä½œæ—¶ï¼ŒåŒ…æ‹¬æŒ‰ä¸‹ã€é‡Šæ”¾æˆ–å±å¹•ä¸Šçš„ä»»ä½•ç§»åŠ¨æ‰‹åŠ¿ï¼ˆåœ¨é¡¹ç›®è¾¹ç•Œå†…ï¼‰ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚
æ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç›‘å¬å™¨æ˜¯å¦å¤„ç†å®Œæ­¤äº‹ä»¶ã€‚é‡è¦çš„æ˜¯ï¼Œæ­¤äº‹ä»¶å¯ä»¥æ‹¥æœ‰å¤šä¸ªåˆ†å…ˆåé¡ºåºçš„æ“ä½œã€‚å› æ­¤ï¼Œå¦‚æœåœ¨æ”¶åˆ° down æ“ä½œäº‹ä»¶æ—¶è¿”å› falseï¼Œåˆ™è¡¨ç¤ºæ‚¨å¹¶æœªå¤„ç†å®Œæ­¤äº‹ä»¶ï¼Œè€Œä¸”å¯¹å…¶åç»­æ“ä½œä¹Ÿä¸æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæ‚¨æ— éœ€æ‰§è¡Œäº‹ä»¶å†…çš„ä»»ä½•å…¶ä»–æ“ä½œï¼Œå¦‚æ‰‹åŠ¿æˆ–æœ€ç»ˆçš„ up æ“ä½œäº‹ä»¶ã€‚
äº‹ä»¶å¤„ç†ç¨‹åº ç›´æ¥å¼•ç”¨å®˜æ–¹æ–‡æ¡£æè¿°ï¼š
å¦‚æœæ‚¨ä» View æ„å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™å¯å®šä¹‰å‡ ç§å›è°ƒæ–¹æ³•ï¼Œç”¨ä½œé»˜è®¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚åœ¨æœ‰å…³è‡ªå®šä¹‰ View ç»„ä»¶çš„æ–‡æ¡£ä¸­ï¼Œæ‚¨å°†äº†è§£ä¸€äº›ç”¨äºäº‹ä»¶å¤„ç†çš„å¸¸è§å›è°ƒï¼ŒåŒ…æ‹¬ï¼š
onKeyDown(int, KeyEvent)ï¼šåœ¨å‘ç”Ÿæ–°çš„æŒ‰é”®äº‹ä»¶æ—¶è°ƒç”¨ã€‚ onKeyUp(int, KeyEvent)ï¼šåœ¨å‘ç”Ÿ key up äº‹ä»¶æ—¶è°ƒç”¨ã€‚ onTrackballEvent(MotionEvent)ï¼šåœ¨å‘ç”Ÿè½¨è¿¹çƒåŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨ã€‚ onTouchEvent(MotionEvent)ï¼šåœ¨å‘ç”Ÿè§¦å±åŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨ã€‚ onFocusChanged(boolean, int, Rect)ï¼šåœ¨ View å¯¹è±¡è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨ã€‚ è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹æ³•å€¼å¾—æ‚¨æ³¨æ„ï¼Œå°½ç®¡å®ƒä»¬å¹¶é View ç±»çš„ä¸€éƒ¨åˆ†ï¼Œä½†å¯èƒ½ä¼šç›´æ¥å½±å“æ‰€èƒ½é‡‡å–çš„äº‹ä»¶å¤„ç†æ–¹å¼ã€‚å› æ­¤ï¼Œåœ¨ç®¡ç†å¸ƒå±€å†…æ›´å¤æ‚çš„äº‹ä»¶æ—¶ï¼Œä¸å¦¨è€ƒè™‘ä½¿ç”¨ä»¥ä¸‹å…¶ä»–æ–¹æ³•ï¼š
Activity.dispatchTouchEvent(MotionEvent)ï¼šæ­¤æ–¹æ³•å…è®¸ Activity åœ¨æ‰€æœ‰è§¦æ‘¸äº‹ä»¶åˆ†æ´¾ç»™çª—å£ä¹‹å‰æˆªè·å®ƒä»¬ã€‚ ViewGroup.onInterceptTouchEvent(MotionEvent)ï¼šæ­¤æ–¹æ³•å…è®¸ ViewGroup ç›‘è§†åˆ†æ´¾ç»™å­çº§ View çš„äº‹ä»¶ã€‚ ViewParent.requestDisallowInterceptTouchEvent(boolean)ï¼šå¯¹çˆ¶çº§ View è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯æŒ‡ç¤ºä¸åº”ä½¿ç”¨ onInterceptTouchEvent(MotionEvent) æˆªè·è§¦æ‘¸äº‹ä»¶ã€‚ è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ onTouchEvent(MotionEvent) å³åœ¨å‘ç”Ÿè§¦å±åŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨çš„å›è°ƒæ–¹æ³•ï¼›
è§¦æ‘¸æ‰‹åŠ¿ æ‰‹åŠ¿å¯ä»¥è®©ç”¨æˆ·é€šè¿‡è§¦æ‘¸æ¥ä¸å±å¹•å…ƒç´ è¿›è¡Œäº¤äº’ï¼›
ç”¨æˆ·äº¤æˆ·è§’åº¦çš„æ‰‹åŠ¿åˆ’åˆ†ï¼š
æ‰‹åŠ¿ç±»å‹ å…·ä½“æ‰‹åŠ¿-ä¸åŒç±»å‹ä¹‹é—´æœ‰é‡å¤ è§£é‡Š å¯¼èˆªæ‰‹åŠ¿ å®ç°å¯¼èˆªä½œç”¨ ç‚¹å‡» - Tap å¦‚ï¼šç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢ æ»šåŠ¨å’Œæ‹–ç§» - Scroll&amp;Pan å¦‚ï¼šæ»‘åŠ¨å›¾ç‰‡åˆ—è¡¨æˆ–æ‹–åŠ¨ä»¥æµè§ˆåœ°å›¾Scroll - å¿«é€Ÿæ‹–åŠ¨å¹¶æŠ¬èµ·æ‰‹æŒ‡æ—¶å‘ç”Ÿçš„ä¸€ç§æ»šåŠ¨ Pan-æ‹–ç§»ï¼Œæ…¢é€Ÿç§»åŠ¨ æ‹–åŠ¨/æ‹–æ‹½ - Drag ç”¨æˆ·åœ¨è§¦æ‘¸å±ä¸Šæ‹–åŠ¨æ‰‹æŒ‡æ—¶å‘ç”Ÿçš„ä¸€ç§æ»šåŠ¨å¦‚ï¼šæŒ‰ä½åº•éƒ¨sheetå¹¶å‘å±å¹•é¡¶éƒ¨æ‹–åŠ¨ è½»æ‰« - Swipe å•ä¸ªæ‰‹æŒ‡è§¦æ‘¸å±å¹•å¹¶å¿«é€Ÿåœ°æœä»»æ„ä¸€ä¸ªæ–¹å‘æ»‘åŠ¨å¦‚ï¼šå·¦å³æ»‘åŠ¨ä»¥åœ¨ä¸åŒçš„Tabé¡µä¸­åˆ‡æ¢ æåˆ/ç¼©æ”¾ - Pinch åŒæŒ‡æˆ–å¤šæŒ‡æåˆå¦‚ï¼šåœ¨ä¸€ä¸ªå›¾ç‰‡åˆ—è¡¨ä¸­ç¼©æ”¾ä¸€ä¸ªitemè¿›å…¥å¤§å›¾æŸ¥çœ‹ç•Œé¢ åŠ¨ä½œæ‰‹åŠ¿ æ‰§è¡ŒæŸç§åŠ¨ä½œ ç‚¹å‡» - Tap é•¿æŒ‰ - Long press å¦‚ï¼šé•¿æŒ‰é€‰ä¸­ è½»æ‰« - Swipe å¦‚ï¼šè½»æ‰«itemå±•ç°åˆ é™¤/æ”¶è—æŒ‰é’® å˜æ¢æ‰‹åŠ¿ ç”¨äºæ”¹å˜å…ƒç´ å¤§å°ï¼Œä½ç½®ï¼Œæ—‹è½¬è§’åº¦ï¼Œå®ç°å˜æ¢æ•ˆæœ åŒå‡» - Double tap å¦‚ï¼šåŒå‡»ç¼©æ”¾å›¾ç‰‡ æåˆ/ç¼©æ”¾ - Pinch å¦‚ï¼šç¼©æ”¾æŸ¥çœ‹å›¾ç‰‡ç»†èŠ‚ ç»„åˆæ‰‹åŠ¿ å¦‚ï¼šåœ°å›¾ä¸­çš„æ”¾å¤§ç¼©å°&æ—‹è½¬ é€‰å–å¹¶æ‹–åŠ¨ - Pick up&amp;Move é•¿æŒ‰é€‰æ‹©å…ƒç´  + æ‹–åŠ¨å…ƒç´  æ¥æºåŠæ‰‹åŠ¿çš„åŠ¨ç”»æ•ˆæœå¯ä»¥çœ‹è¿™é‡Œï¼š material.io
...</p></div><footer class=entry-footer><span title='2018-02-20 10:13:24 +0000 UTC'>February 20, 2018</span>&nbsp;Â·&nbsp;<span>7 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></footer><a class=entry-link aria-label="post link to Androidäº‹ä»¶åŠæ‰‹åŠ¿" href=https://anlyjiang.github.io/posts/android-shi-jian-ji-shou-shi/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://anlyjiang.github.io/posts/page/2/>Â«&nbsp;Prev&nbsp;</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://anlyjiang.github.io/>æ¸…æ°´æ± å¡˜</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>