<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½• | æ¸…æ°´æ± å¡˜</title><meta name=keywords content="Android,é—®é¢˜è§£å†³"><meta name=description content="é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚
ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ
é”™è¯¯æ—¥å¿—
APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š NoSuchMethodError, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ Disposable.disposed()
E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.github.hanlyjiang.sample, PID: 7357
    java.lang.NoSuchMethodError: No static method disposed()Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes (declaration of 'io.reactivex.rxjava3.disposables.Disposable' appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw==/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg==/base.apk)
        at com.github.hanlyjiang.lib_mod.ViewTest.disposable(ViewTest.java:8)
        at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0(MainActivity.java:15)
        at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0)
        at android.view.View.performClick(View.java:7456)
        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)
        at android.view.View.performClickInternal(View.java:7433)
        at android.view.View.access$3700(View.java:836)
        at android.view.View$PerformClick.run(View.java:28832)
        at android.os.Handler.handleCallback(Handler.java:938)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loopOnce(Looper.java:201)
        at android.os.Looper.loop(Looper.java:288)
        at android.app.ActivityThread.main(ActivityThread.java:7902)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933)

â° Tip"><meta name=author content="é‡ç”Ÿè²è—•"><link rel=canonical href=https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://hanlyjiang.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hanlyjiang.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hanlyjiang.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://hanlyjiang.github.io/apple-touch-icon.png><link rel=mask-icon href=https://hanlyjiang.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/"><meta property="og:site_name" content="æ¸…æ°´æ± å¡˜"><meta property="og:title" content=" AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•"><meta property="og:description" content="é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚
ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ é”™è¯¯æ—¥å¿— APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š NoSuchMethodError, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ Disposable.disposed()
E/AndroidRuntime: FATAL EXCEPTION: main Process: com.github.hanlyjiang.sample, PID: 7357 java.lang.NoSuchMethodError: No static method disposed()Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes (declaration of 'io.reactivex.rxjava3.disposables.Disposable' appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw==/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg==/base.apk) at com.github.hanlyjiang.lib_mod.ViewTest.disposable(ViewTest.java:8) at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0(MainActivity.java:15) at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0) at android.view.View.performClick(View.java:7456) at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119) at android.view.View.performClickInternal(View.java:7433) at android.view.View.access$3700(View.java:836) at android.view.View$PerformClick.run(View.java:28832) at android.os.Handler.handleCallback(Handler.java:938) at android.os.Handler.dispatchMessage(Handler.java:99) at android.os.Looper.loopOnce(Looper.java:201) at android.os.Looper.loop(Looper.java:288) at android.app.ActivityThread.main(ActivityThread.java:7902) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933) â° Tip"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-13T23:18:16+00:00"><meta property="article:modified_time" content="2022-03-13T23:18:16+00:00"><meta property="article:tag" content="Android"><meta property="article:tag" content="é—®é¢˜è§£å†³"><meta name=twitter:card content="summary"><meta name=twitter:title content=" AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•"><meta name=twitter:description content="é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚
ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ
é”™è¯¯æ—¥å¿—
APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š NoSuchMethodError, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ Disposable.disposed()
E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.github.hanlyjiang.sample, PID: 7357
    java.lang.NoSuchMethodError: No static method disposed()Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes (declaration of 'io.reactivex.rxjava3.disposables.Disposable' appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw==/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg==/base.apk)
        at com.github.hanlyjiang.lib_mod.ViewTest.disposable(ViewTest.java:8)
        at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0(MainActivity.java:15)
        at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0)
        at android.view.View.performClick(View.java:7456)
        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)
        at android.view.View.performClickInternal(View.java:7433)
        at android.view.View.access$3700(View.java:836)
        at android.view.View$PerformClick.run(View.java:28832)
        at android.os.Handler.handleCallback(Handler.java:938)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loopOnce(Looper.java:201)
        at android.os.Looper.loop(Looper.java:288)
        at android.app.ActivityThread.main(ActivityThread.java:7902)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933)

â° Tip"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hanlyjiang.github.io/posts/"},{"@type":"ListItem","position":2,"name":" AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•","item":"https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":" AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•","name":" AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•","description":"é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚\nğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ é”™è¯¯æ—¥å¿— APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š NoSuchMethodError, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ Disposable.disposed()\nE/AndroidRuntime: FATAL EXCEPTION: main Process: com.github.hanlyjiang.sample, PID: 7357 java.lang.NoSuchMethodError: No static method disposed()Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes (declaration of \u0026#39;io.reactivex.rxjava3.disposables.Disposable\u0026#39; appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw==/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg==/base.apk) at com.github.hanlyjiang.lib_mod.ViewTest.disposable(ViewTest.java:8) at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0(MainActivity.java:15) at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0) at android.view.View.performClick(View.java:7456) at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119) at android.view.View.performClickInternal(View.java:7433) at android.view.View.access$3700(View.java:836) at android.view.View$PerformClick.run(View.java:28832) at android.os.Handler.handleCallback(Handler.java:938) at android.os.Handler.dispatchMessage(Handler.java:99) at android.os.Looper.loopOnce(Looper.java:201) at android.os.Looper.loop(Looper.java:288) at android.app.ActivityThread.main(ActivityThread.java:7902) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933) â° Tip\n","keywords":["Android","é—®é¢˜è§£å†³"],"articleBody":"é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚\nğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ é”™è¯¯æ—¥å¿— APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š NoSuchMethodError, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ Disposable.disposed()\nE/AndroidRuntime: FATAL EXCEPTION: main Process: com.github.hanlyjiang.sample, PID: 7357 java.lang.NoSuchMethodError: No static method disposed()Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes (declaration of 'io.reactivex.rxjava3.disposables.Disposable' appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw==/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg==/base.apk) at com.github.hanlyjiang.lib_mod.ViewTest.disposable(ViewTest.java:8) at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0(MainActivity.java:15) at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick(Unknown Source:0) at android.view.View.performClick(View.java:7456) at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119) at android.view.View.performClickInternal(View.java:7433) at android.view.View.access$3700(View.java:836) at android.view.View$PerformClick.run(View.java:28832) at android.os.Handler.handleCallback(Handler.java:938) at android.os.Handler.dispatchMessage(Handler.java:99) at android.os.Looper.loopOnce(Looper.java:201) at android.os.Looper.loop(Looper.java:288) at android.app.ActivityThread.main(ActivityThread.java:7902) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933) â° Tip\nå®é™…ä¸Šè¿˜æœ‰é‡åˆ°è¿‡ä¸€ä¸ª AbstractMethodError çš„é”™è¯¯\nå‡ºç°åœºæ™¯ AAR å¼•å…¥åˆ°APPæ¨¡å— æ‰“åŒ…APKï¼ˆä¸é€šè¿‡AndroidStudioç›´æ¥è¿è¡Œï¼‰ å®‰è£…å¹¶è¿è¡Œ è§£å†³æ–¹æ¡ˆ å¯¹äºéœ€è¦è§£å†³é—®é¢˜çš„ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒå°è¯•ä¸‹é¢ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚\nè§£æ³•1 gradle.properties æ–‡ä»¶ä¸­æ·»åŠ å±æ€§ï¼š\nandroid.enableDexingArtifactTransform.desugaring=false è§£æ³•2 ä¿®æ”¹ aar çš„ä¾èµ–æ–¹å¼ï¼Œå°†name+extçš„æ–¹å¼ä¿®æ”¹ä¸º files\nimplementation(name: 'libmod-release', ext: 'aar') ä¿®æ”¹ä¹‹å\nimplementation(files('libs/libmod-release.aar')) æ¡ˆä¾‹è§‚å¯Ÿ æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œæ‰¾åˆ°æˆ‘ä»¬çš„ä»£ç ï¼Œå¾—åˆ°å¦‚ä¸‹è°ƒç”¨å…³ç³»ï¼š\nViewTest.disposable -\u003e Disposable.disposed() ä¸ºäº†æ–¹ä¾¿åˆ†æåŠæ¼”ç¤ºï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ä½äºï¼š colorless-hanly/NoSuchMethodError: NoSuchMethodError (github.com)ï¼Œè¿è¡Œæ­¤å·¥ç¨‹èƒ½å¤ç°è¯¥é—®é¢˜ã€‚\nclasså­—èŠ‚ç æ²¡æœ‰é—®é¢˜ æˆ‘ä»¬çš„AARæä¾›ç»™APPæ¨¡å—æ—¶ï¼Œæ˜¯ä»¥ class ç±»æ–‡ä»¶æä¾›çš„ï¼Œé€šè¿‡åç¼–è¯‘æŸ¥çœ‹å…¶å†…å®¹ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚\næ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹æœ€åè¿è¡Œçš„APKå¯¹åº”çš„DEXï¼Œå¹¶é€šè¿‡AndroidStudio æŸ¥çœ‹å…¶å¯¹åº”çš„å­—èŠ‚ç ã€‚\nViewTest.disposable é¦–å…ˆæˆ‘ä»¬æ ¹æ®æŠ¥é”™ä¿¡æ¯æ‰¾åˆ°å‡ºé”™çš„ViewTest.disposableç±»ï¼Œå¹¶æŸ¥çœ‹å…¶å­—èŠ‚ç \nJava ä»£ç ï¼š\npublic class ViewTest { public static Disposable disposable() { return Disposable.disposed(); } } å­—èŠ‚ç ï¼š\n.class public Lcom/github/hanlyjiang/lib_mod/ViewTest; .super Ljava/lang/Object; .source \"ViewTest.java\" # direct methods .method public constructor \u003cinit\u003e()V .registers 1 .line 5 invoke-direct {p0}, Ljava/lang/Object;-\u003e\u003cinit\u003e()V return-void .end method .method public static disposable()Lio/reactivex/rxjava3/disposables/Disposable; .registers 1 .line 8 invoke-static {}, Lio/reactivex/rxjava3/disposables/Disposable;-\u003edisposed()Lio/reactivex/rxjava3/disposables/Disposable; move-result-object v0 return-object v0 .end method çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚\nDisposable.disposed() æˆ‘ä»¬ç»§ç»­æŸ¥çœ‹ Disposable æ¥å£çš„å­—èŠ‚ç ï¼Œå‘ç°å±…ç„¶æ²¡æœ‰æˆ‘ä»¬è°ƒç”¨çš„ disposed æ–¹æ³•ã€‚\nä½†æ˜¯ï¼Œå¾ˆå¿«å°±åœ¨æœ‰ä¸€ä¸ªå«åš Disposable$-CC çš„ç±»ä¸­æ‰¾åˆ°äº†æˆ‘ä»¬çš„ disposed æ–¹æ³•ï¼ŒåŒæ—¶å…¶ä¸­è¿˜åŒ…æ‹¬äº† Disposable æ¥å£ä¸­çš„æ‰€æœ‰é™æ€æ–¹æ³•\nè¿™é‡Œæˆ‘ä»¬ç²˜è´´ä¸‹ Disposable æ¥å£çš„å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰ä¸¤ä¸ªæ¥å£æ–¹æ³•å®šä¹‰ï¼Œè¿˜æœ‰è‹¥å¹²staticæ–¹æ³•çš„å®šä¹‰åŠå®ç°ã€‚è€Œæˆ‘ä»¬çš„é™æ€æ–¹æ³•å…¨éƒ¨ä½äºå­—èŠ‚ç ä¸­ Disposable$-CC è¿™ä¸ªç±»ä¸­ï¼Œè€Œä¸¤ä¸ªæ¥å£æ–¹æ³•è¿˜ä¿ç•™åœ¨ Disposable ç±»ä¸­ã€‚\npublic interface Disposable { void dispose(); boolean isDisposed(); static Disposable fromRunnable(@NonNull Runnable run) { Objects.requireNonNull(run, \"run is null\"); return new RunnableDisposable(run); } static Disposable fromAction(@NonNull Action action) { Objects.requireNonNull(action, \"action is null\"); return new ActionDisposable(action); } static Disposable fromFuture(@NonNull Future\u003c?\u003e future) { Objects.requireNonNull(future, \"future is null\"); return fromFuture(future, true); } static Disposable fromFuture(@NonNull Future\u003c?\u003e future, boolean allowInterrupt) { Objects.requireNonNull(future, \"future is null\"); return new FutureDisposable(future, allowInterrupt); } static Disposable fromSubscription(@NonNull Subscription subscription) { Objects.requireNonNull(subscription, \"subscription is null\"); return new SubscriptionDisposable(subscription); } static Disposable fromAutoCloseable(@NonNull AutoCloseable autoCloseable) { Objects.requireNonNull(autoCloseable, \"autoCloseable is null\"); return new AutoCloseableDisposable(autoCloseable); } static AutoCloseable toAutoCloseable(@NonNull Disposable disposable) { Objects.requireNonNull(disposable, \"disposable is null\"); return disposable::dispose; } static Disposable empty() { return fromRunnable(Functions.EMPTY_RUNNABLE); } static Disposable disposed() { return EmptyDisposable.INSTANCE; } } æ­£ç¡®çš„ViewTest.disposableå­—èŠ‚ç  å‰é¢æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬å­—èŠ‚ç ä¸­è°ƒç”¨çš„æ–¹æ³•æ˜¯ Disposable;-\u003edisposed()ï¼Œè€Œå®é™…ä¸Šè¯¥æ–¹æ³•ä½äº Disposable$-CC;-\u003edisposed(),ç°åœ¨æˆ‘ä»¬çœ‹ä¸‹æ­£å¸¸çš„å¯ä»¥è¿è¡Œé€šè¿‡çš„apkä¸­dexå¯¹åº”çš„å­—èŠ‚ç ã€‚\nç»è¿‡å¯¹æ¯”ï¼Œå‘ç°Disposable è¿˜æ˜¯è¢«æ‹†åˆ†ä¸ºäº† Disposable å’Œ Disposable$-CC è€Œ ViewTest.disposable å¯¹åº”çš„å­—èŠ‚ç å´æœ‰åŒºåˆ«ï¼Œæ­£å¸¸å¯ä»¥è°ƒç”¨é€šè¿‡çš„å­—èŠ‚ç å’Œå¼‚å¸¸çš„å¯¹æ¯”å¦‚ä¸‹ï¼š // æ­£ç¡®çš„ invoke-static {}, Lio/reactivex/rxjava3/disposables/Disposable$-CC;-\u003edisposed()Lio/reactivex/rxjava3/disposables/Disposable; // é”™è¯¯çš„ invoke-static {}, Lio/reactivex/rxjava3/disposables/Disposable;-\u003edisposed()Lio/reactivex/rxjava3/disposables/Disposable; å¯ä»¥å‘ç°ï¼Œèƒ½æ­£å¸¸è¿è¡Œçš„æ–¹æ³•è°ƒç”¨ç¡®å®æŒ‡å‘äº† Disposable$-CC;-\u003edisposed()ã€‚\næ€»ç»“ ä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼š\nDisposable ä¼šè¢«æ‹†åˆ†ä¸º Disposable å’Œ Disposable$-CC Disposable åŒ…å«äº†æ¥å£æ–¹æ³•çš„å£°æ˜ Disposable$-CC ä¸­åˆ™åŒ…å«äº†é™æ€æ–¹æ³•çš„å£°æ˜åŠå®ç° å¯¹äºè°ƒç”¨åˆ° Disposable çš„é™æ€æ–¹æ³•çš„éƒ¨åˆ†ï¼Œæœ€ç»ˆç¼–è¯‘å®Œæˆåï¼Œä¼šæ›¿æ¢ä¸ºæŒ‡å‘Disposable$-CC è€Œæˆ‘ä»¬å‡ºé”™çš„æƒ…å†µä¸‹ï¼Œæ˜¯æ²¡æœ‰æ­£ç¡®æŒ‡å‘çš„ï¼Œæ‰€ä»¥ç¡®å®ä¼šå‡ºç°æ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•çš„æƒ…å†µã€‚\nåŸå› åˆ†æ class -\u003e dex \u0026 Java8 è¯­è¨€ç‰¹æ€§æ”¯æŒ ä»¥ä¸‹ä¸ºAndroid å®˜æ–¹æ–‡æ¡£ä¸Šçš„ç›¸å…³æè¿°ï¼š\nä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½å’Œ API Android Gradle æ’ä»¶å¯¹ä½¿ç”¨æŸäº› Java 8 è¯­è¨€åŠŸèƒ½ä»¥åŠåˆ©ç”¨è¿™äº›åŠŸèƒ½çš„ç¬¬ä¸‰æ–¹åº“æä¾›å†…ç½®æ”¯æŒã€‚å¦‚å›¾ æ‰€ç¤ºï¼Œé»˜è®¤å·¥å…·é“¾å®ç°æ–°è¯­è¨€åŠŸèƒ½çš„æ–¹æ³•æ˜¯åœ¨ä½¿ç”¨ D8/R8 å°†ç±»æ–‡ä»¶ç¼–è¯‘æˆ dex ä»£ç çš„è¿‡ç¨‹ä¸­æ‰§è¡Œå­—èŠ‚ç è½¬æ¢ï¼Œè¿™ç§è½¬æ¢ç§°ä¸º desugarã€‚\nJava 8 åŠæ›´é«˜ç‰ˆæœ¬ API è„±ç³–æ”¯æŒï¼ˆAndroid Gradle æ’ä»¶ 4.0.0 åŠæ›´é«˜ç‰ˆæœ¬ï¼‰ å¦‚æœæ‚¨ä½¿ç”¨ Android Gradle æ’ä»¶ 4.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬æ„å»ºåº”ç”¨ï¼Œæ’ä»¶æ‰©å±•äº†å¯¹ä½¿ç”¨å¤šç§ Java 8 è¯­è¨€ API çš„æ”¯æŒï¼Œè€Œæ— éœ€ä¸ºåº”ç”¨è®¾ç½®æœ€ä½ API çº§åˆ«ã€‚\nä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°å¯¹è¾ƒä½å¹³å°ç‰ˆæœ¬çš„è¿™ç§é¢å¤–æ”¯æŒï¼Œæ˜¯å› ä¸ºè„±ç³–å¼•æ“ç»è¿‡æ’ä»¶ 4.0.0 åŠæ›´é«˜ç‰ˆæœ¬æ‰©å±•åï¼Œä¹Ÿèƒ½ä½¿ Java è¯­è¨€ API è„±ç³–ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨æ”¯æŒè¾ƒä½ Android ç‰ˆæœ¬çš„åº”ç”¨ä¸­æ·»åŠ è¿‡å»ä»…åœ¨æœ€æ–° Android ç‰ˆæœ¬ä¸­å¯ç”¨çš„æ ‡å‡†è¯­è¨€ APIï¼ˆå¦‚ java.util.streamsï¼‰ã€‚\nä½¿ç”¨ Android Gradle æ’ä»¶ 4.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬æ„å»ºåº”ç”¨æ—¶ï¼Œæ”¯æŒä¸‹é¢ä¸€ç»„ APIï¼š\né¡ºåºæµ (java.util.stream) java.time çš„å­é›† java.util.function java.util.{Map,Collection,Comparator} çš„æœ€è¿‘æ–°å¢å†…å®¹ å¯é€‰å†…å®¹ï¼ˆjava.util.Optionalã€java.util.OptionalInt å’Œ java.util.OptionalDoubleï¼‰ä»¥åŠå¯¹ä¸Šè¿° API å¾ˆæœ‰ç”¨çš„ä¸€äº›å…¶ä»–æ–°ç±» java.util.concurrent.atomic çš„ä¸€äº›æ–°å¢å†…å®¹ï¼ˆAtomicIntegerã€AtomicLong å’Œ AtomicReference çš„æ–°æ–¹æ³•ï¼‰ ConcurrentHashMapï¼ˆåŒ…å« Android 5.0 çš„é—®é¢˜ä¿®å¤ï¼‰ å¦‚éœ€æŸ¥çœ‹å—æ”¯æŒçš„ API çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…é€šè¿‡è„±ç³–è·å¾— Java 8 åŠæ›´é«˜ç‰ˆæœ¬ APIã€‚\nä¸ºäº†æ”¯æŒè¿™äº›è¯­è¨€ APIï¼Œæ’ä»¶ç¼–è¯‘äº†ä¸€ä¸ªå•ç‹¬çš„ DEX æ–‡ä»¶ï¼ˆå…¶ä¸­åŒ…å«ç¼ºå¤± API çš„å®ç°ï¼‰ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ä¸­ã€‚è„±ç³–è¿‡ç¨‹ä¼šé‡æ–°ç¼–å†™åº”ç”¨çš„ä»£ç ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶æ”¹ç”¨æ­¤åº“ã€‚\nç¼–è¯‘ä½¿ç”¨äº† Java 8 è¯­è¨€åŠŸèƒ½çš„å­—èŠ‚ç  d8 é€šè¿‡ä¸€ä¸ªå«åšâ€œè„±ç³–â€çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œä½¿æ‚¨èƒ½å¤Ÿåœ¨ä»£ç ä¸­ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½ï¼Œæ­¤è¿‡ç¨‹ä¼šå°†è¿™äº›å®ç”¨çš„è¯­è¨€åŠŸèƒ½è½¬æ¢ä¸ºå¯ä»¥åœ¨ Android å¹³å°ä¸Šè¿è¡Œçš„å­—èŠ‚ç ã€‚\nAndroid Studio å’Œ Android Gradle æ’ä»¶åŒ…å«äº† d8 ä¸ºæ‚¨å¯ç”¨è„±ç³–æ‰€éœ€çš„ç±»è·¯å¾„èµ„æºã€‚\nAndroid Studio å’Œ Android Gradle æ’ä»¶åŒ…å«äº† d8 ä¸ºæ‚¨å¯ç”¨è„±ç³–æ‰€éœ€çš„ç±»è·¯å¾„èµ„æºã€‚ä¸è¿‡ï¼Œä»å‘½ä»¤è¡Œä½¿ç”¨ d8 æ—¶ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨æ·»åŠ è¿™äº›èµ„æºã€‚\nå…¶ä¸­ä¸€ä¸ªèµ„æºå°±æ˜¯ç›®æ ‡ Android SDK ä¸­çš„ android.jarã€‚æ­¤èµ„æºåŒ…å«ä¸€ç»„ Android å¹³å° APIï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ --lib æ ‡è®°æ¥æŒ‡å®šè¯¥èµ„æºçš„è·¯å¾„ã€‚\nå¦ä¸€ä¸ªèµ„æºæ˜¯æ‚¨é¡¹ç›®çš„éƒ¨åˆ†å·²ç¼–è¯‘çš„ Java å­—èŠ‚ç ï¼Œæ‚¨ç›®å‰ä¸æ‰“ç®—å°†è¿™éƒ¨åˆ†å­—èŠ‚ç ç¼–è¯‘ä¸º DEX å­—èŠ‚ç ï¼Œä½†åœ¨å°†å…¶ä»–ç±»ç¼–è¯‘ä¸º DEX å­—èŠ‚ç æ—¶éœ€è¦ç”¨åˆ°è¿™äº›å­—èŠ‚ç ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»£ç ä½¿ç”¨é»˜è®¤å’Œé™æ€æ¥å£æ–¹æ³•ï¼ˆä¸€ç§ Java 8 è¯­è¨€åŠŸèƒ½ï¼‰ï¼Œåˆ™æ‚¨éœ€è¦ä½¿ç”¨æ­¤æ ‡è®°æ¥æŒ‡å®šæ‚¨é¡¹ç›®çš„æ‰€æœ‰ Java å­—èŠ‚ç çš„è·¯å¾„ï¼Œå³ä½¿æ‚¨ä¸æ‰“ç®—å°†æ‰€æœ‰ Java å­—èŠ‚ç éƒ½ç¼–è¯‘ä¸º DEX å­—èŠ‚ç ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸º d8 éœ€è¦æ ¹æ®è¿™äº›ä¿¡æ¯æ¥ç†è§£æ‚¨é¡¹ç›®çš„ä»£ç å¹¶è§£æå¯¹æ¥å£æ–¹æ³•çš„è°ƒç”¨ã€‚\né€šè¿‡ä»¥ä¸Šæè¿°æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š\nAndroid é€šè¿‡ D8 å°† class è½¬æ¢ä¸ºå¯åœ¨Androidå¹³å°ä¸Šæ‰§è¡Œçš„dexï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º desugar ï¼ˆè„±ç³–ï¼‰ã€‚ è„±ç³–è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡æ–°ç¼–å†™åº”ç”¨çš„ä»£ç ã€‚ è„±ç³–æ—¶éœ€è¦æŒ‡å®šè„±ç³–æ‰€éœ€è¦çš„ç±»è·¯å¾„èµ„æºã€‚ å¯¹åº”æˆ‘ä»¬çš„é—®é¢˜ å¾…è¡¥å……\né€šè¿‡ d8 æ‰‹åŠ¨å¯¹classè¿›è¡Œdexè½¬æ¢ï¼Œç„¶åè§‚å¯Ÿè½¬æ¢å·®å¼‚ã€‚\nd8 MainActivity.class --intermediate --file-per-class --output ~/build/intermediate/dex --lib android_sdk/platforms/api-level/android.jar --classpath ~/build/javac/debug å°†ç±»æ–‡ä»¶ç¼–è¯‘æˆ dex ä»£ç çš„è¿‡ç¨‹ä¸­æ‰§è¡Œå­—èŠ‚ç è½¬æ¢ï¼Œè¿™ç§è½¬æ¢ç§°ä¸º desugarã€‚AGP ä½¿ç”¨ D8 å®Œæˆdesugar ï¼Œä¸ºäº†èƒ½æ­£ç¡®çš„å¤„ç†classï¼Œéœ€è¦æ ¹æ®POMä¾èµ–ä¿¡æ¯æ¥å¯»æ‰¾å¯¹åº”çš„ä¾èµ–ï¼Œç„¶åå°†æ‰€æœ‰ä¾èµ–é¡¹ç›®éƒ½åŠ å…¥åˆ° desurge classpathï¼Œç„¶åæ‰èƒ½æ­£ç¡®å¤„ç†ã€‚è€Œ aar å¼•å…¥æ—¶ä¸å…·å¤‡è¿™äº›POMä¾èµ–ä¿¡æ¯ï¼Œæ‰€ä»¥æ— æ³•è¿˜åŸã€‚\nè¿›ä¸€æ­¥äº†è§£ d8 | Android å¼€å‘è€… | Android Developers (google.cn) ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½å’Œ API | Android å¼€å‘è€… | Android Developers (google.cn) ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½å’Œ API | Android å¼€å‘è€… | Android Developers (google.cn) Android Gradle æ’ä»¶ç‰ˆæœ¬è¯´æ˜ | Android å¼€å‘è€… | Android Developers (google.cn) ","wordCount":"594","inLanguage":"en","datePublished":"2022-03-13T23:18:16Z","dateModified":"2022-03-13T23:18:16Z","author":{"@type":"Person","name":"é‡ç”Ÿè²è—•"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://hanlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/"},"publisher":{"@type":"Organization","name":"æ¸…æ°´æ± å¡˜","logo":{"@type":"ImageObject","url":"https://hanlyjiang.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://hanlyjiang.github.io/ accesskey=h title="æ¸…æ°´æ± å¡˜ (Alt + H)">æ¸…æ°´æ± å¡˜</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•</h1><div class=post-meta><span title='2022-03-13 23:18:16 +0000 UTC'>March 13, 2022</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>é‡ç”Ÿè²è—•</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#-%e6%98%af%e4%bb%80%e4%b9%88%e9%97%ae%e9%a2%98 aria-label="ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ">ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ</a><ul><li><a href=#%e9%94%99%e8%af%af%e6%97%a5%e5%bf%97 aria-label=é”™è¯¯æ—¥å¿—>é”™è¯¯æ—¥å¿—</a></li><li><a href=#%e5%87%ba%e7%8e%b0%e5%9c%ba%e6%99%af aria-label=å‡ºç°åœºæ™¯>å‡ºç°åœºæ™¯</a></li></ul></li><li><a href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label=è§£å†³æ–¹æ¡ˆ>è§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#%e8%a7%a3%e6%b3%951 aria-label=è§£æ³•1>è§£æ³•1</a></li><li><a href=#%e8%a7%a3%e6%b3%952 aria-label=è§£æ³•2>è§£æ³•2</a></li></ul></li><li><a href=#%e6%a1%88%e4%be%8b%e8%a7%82%e5%af%9f aria-label=æ¡ˆä¾‹è§‚å¯Ÿ>æ¡ˆä¾‹è§‚å¯Ÿ</a><ul><li><a href=#class%e5%ad%97%e8%8a%82%e7%a0%81%e6%b2%a1%e6%9c%89%e9%97%ae%e9%a2%98 aria-label=classå­—èŠ‚ç æ²¡æœ‰é—®é¢˜>classå­—èŠ‚ç æ²¡æœ‰é—®é¢˜</a></li><li><a href=#viewtestdisposable aria-label=ViewTest.disposable>ViewTest.disposable</a></li><li><a href=#disposabledisposed aria-label=Disposable.disposed()>Disposable.disposed()</a></li><li><a href=#%e6%ad%a3%e7%a1%ae%e7%9a%84viewtestdisposable%e5%ad%97%e8%8a%82%e7%a0%81 aria-label=æ­£ç¡®çš„ViewTest.disposableå­—èŠ‚ç >æ­£ç¡®çš„ViewTest.disposableå­—èŠ‚ç </a></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=æ€»ç»“>æ€»ç»“</a></li></ul></li><li><a href=#%e5%8e%9f%e5%9b%a0%e5%88%86%e6%9e%90 aria-label=åŸå› åˆ†æ>åŸå› åˆ†æ</a><ul><li><a href=#class---dex--java8-%e8%af%ad%e8%a8%80%e7%89%b9%e6%80%a7%e6%94%af%e6%8c%81 aria-label="class -> dex & Java8 è¯­è¨€ç‰¹æ€§æ”¯æŒ">class -> dex & Java8 è¯­è¨€ç‰¹æ€§æ”¯æŒ</a></li><li><a href=#%e5%af%b9%e5%ba%94%e6%88%91%e4%bb%ac%e7%9a%84%e9%97%ae%e9%a2%98 aria-label=å¯¹åº”æˆ‘ä»¬çš„é—®é¢˜>å¯¹åº”æˆ‘ä»¬çš„é—®é¢˜</a></li></ul></li><li><a href=#%e8%bf%9b%e4%b8%80%e6%ad%a5%e4%ba%86%e8%a7%a3 aria-label=è¿›ä¸€æ­¥äº†è§£>è¿›ä¸€æ­¥äº†è§£</a></li></ul></div></details></div><div class=post-content><p>é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚</p><h2 id=-æ˜¯ä»€ä¹ˆé—®é¢˜>ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#-æ˜¯ä»€ä¹ˆé—®é¢˜>#</a></h2><h3 id=é”™è¯¯æ—¥å¿—>é”™è¯¯æ—¥å¿—<a hidden class=anchor aria-hidden=true href=#é”™è¯¯æ—¥å¿—>#</a></h3><p>APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š <code>NoSuchMethodError</code>, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ <code>Disposable.disposed()</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>E/AndroidRuntime: FATAL EXCEPTION: main
</span></span><span style=display:flex><span>    Process: com.github.hanlyjiang.sample, PID: <span style=color:#ae81ff>7357</span>
</span></span><span style=display:flex><span>    java.lang.NoSuchMethodError: No static method disposed<span style=color:#f92672>()</span>Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes <span style=color:#f92672>(</span>declaration of <span style=color:#e6db74>&#39;io.reactivex.rxjava3.disposables.Disposable&#39;</span> appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw<span style=color:#f92672>==</span>/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg<span style=color:#f92672>==</span>/base.apk<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at com.github.hanlyjiang.lib_mod.ViewTest.disposable<span style=color:#f92672>(</span>ViewTest.java:8<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0<span style=color:#f92672>(</span>MainActivity.java:15<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick<span style=color:#f92672>(</span>Unknown Source:0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.view.View.performClick<span style=color:#f92672>(</span>View.java:7456<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at com.google.android.material.button.MaterialButton.performClick<span style=color:#f92672>(</span>MaterialButton.java:1119<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.view.View.performClickInternal<span style=color:#f92672>(</span>View.java:7433<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.view.View.access$3700<span style=color:#f92672>(</span>View.java:836<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.view.View$PerformClick.run<span style=color:#f92672>(</span>View.java:28832<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.os.Handler.handleCallback<span style=color:#f92672>(</span>Handler.java:938<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.os.Handler.dispatchMessage<span style=color:#f92672>(</span>Handler.java:99<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.os.Looper.loopOnce<span style=color:#f92672>(</span>Looper.java:201<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.os.Looper.loop<span style=color:#f92672>(</span>Looper.java:288<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at android.app.ActivityThread.main<span style=color:#f92672>(</span>ActivityThread.java:7902<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at java.lang.reflect.Method.invoke<span style=color:#f92672>(</span>Native Method<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run<span style=color:#f92672>(</span>RuntimeInit.java:548<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        at com.android.internal.os.ZygoteInit.main<span style=color:#f92672>(</span>ZygoteInit.java:933<span style=color:#f92672>)</span>
</span></span></code></pre></div><blockquote><p><strong>â° Tip</strong></p><p>å®é™…ä¸Šè¿˜æœ‰é‡åˆ°è¿‡ä¸€ä¸ª <code>AbstractMethodError</code> çš„é”™è¯¯</p></blockquote><h3 id=å‡ºç°åœºæ™¯>å‡ºç°åœºæ™¯<a hidden class=anchor aria-hidden=true href=#å‡ºç°åœºæ™¯>#</a></h3><ul><li>AAR å¼•å…¥åˆ°APPæ¨¡å—</li><li>æ‰“åŒ…APKï¼ˆä¸é€šè¿‡AndroidStudioç›´æ¥è¿è¡Œï¼‰</li><li>å®‰è£…å¹¶è¿è¡Œ</li></ul><h2 id=è§£å†³æ–¹æ¡ˆ>è§£å†³æ–¹æ¡ˆ<a hidden class=anchor aria-hidden=true href=#è§£å†³æ–¹æ¡ˆ>#</a></h2><p>å¯¹äºéœ€è¦è§£å†³é—®é¢˜çš„ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒå°è¯•ä¸‹é¢ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚</p><h3 id=è§£æ³•1>è§£æ³•1<a hidden class=anchor aria-hidden=true href=#è§£æ³•1>#</a></h3><p><code>gradle.properties</code> æ–‡ä»¶ä¸­æ·»åŠ å±æ€§ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>android.enableDexingArtifactTransform.desugaring</span><span style=color:#f92672>=</span><span style=color:#e6db74>false</span>
</span></span></code></pre></div><h3 id=è§£æ³•2>è§£æ³•2<a hidden class=anchor aria-hidden=true href=#è§£æ³•2>#</a></h3><p>ä¿®æ”¹ aar çš„ä¾èµ–æ–¹å¼ï¼Œå°†name+extçš„æ–¹å¼ä¿®æ”¹ä¸º files</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>	implementation<span style=color:#f92672>(</span>name: <span style=color:#e6db74>&#39;libmod-release&#39;</span><span style=color:#f92672>,</span> ext: <span style=color:#e6db74>&#39;aar&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p>ä¿®æ”¹ä¹‹å</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>	implementation<span style=color:#f92672>(</span>files<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;libs/libmod-release.aar&#39;</span><span style=color:#f92672>))</span>
</span></span></code></pre></div><h2 id=æ¡ˆä¾‹è§‚å¯Ÿ>æ¡ˆä¾‹è§‚å¯Ÿ<a hidden class=anchor aria-hidden=true href=#æ¡ˆä¾‹è§‚å¯Ÿ>#</a></h2><p>æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œæ‰¾åˆ°æˆ‘ä»¬çš„ä»£ç ï¼Œå¾—åˆ°å¦‚ä¸‹è°ƒç”¨å…³ç³»ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>ViewTest.<span style=color:#a6e22e>disposable</span> <span style=color:#f92672>-&gt;</span> Disposable.<span style=color:#a6e22e>disposed</span>()
</span></span></code></pre></div><p>ä¸ºäº†æ–¹ä¾¿åˆ†æåŠæ¼”ç¤ºï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ä½äºï¼š <a href=https://github.com/colorless-hanly/NoSuchMethodError>colorless-hanly/NoSuchMethodError: NoSuchMethodError (github.com)</a>ï¼Œè¿è¡Œæ­¤å·¥ç¨‹èƒ½å¤ç°è¯¥é—®é¢˜ã€‚</p><h3 id=classå­—èŠ‚ç æ²¡æœ‰é—®é¢˜>classå­—èŠ‚ç æ²¡æœ‰é—®é¢˜<a hidden class=anchor aria-hidden=true href=#classå­—èŠ‚ç æ²¡æœ‰é—®é¢˜>#</a></h3><p>æˆ‘ä»¬çš„AARæä¾›ç»™APPæ¨¡å—æ—¶ï¼Œæ˜¯ä»¥ class ç±»æ–‡ä»¶æä¾›çš„ï¼Œé€šè¿‡åç¼–è¯‘æŸ¥çœ‹å…¶å†…å®¹ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹æœ€åè¿è¡Œçš„APKå¯¹åº”çš„DEXï¼Œå¹¶é€šè¿‡AndroidStudio æŸ¥çœ‹å…¶å¯¹åº”çš„å­—èŠ‚ç ã€‚</p><h3 id=viewtestdisposable><code>ViewTest.disposable</code><a hidden class=anchor aria-hidden=true href=#viewtestdisposable>#</a></h3><p>é¦–å…ˆæˆ‘ä»¬æ ¹æ®æŠ¥é”™ä¿¡æ¯æ‰¾åˆ°å‡ºé”™çš„<code>ViewTest.disposable</code>ç±»ï¼Œå¹¶æŸ¥çœ‹å…¶å­—èŠ‚ç </p><p><strong>Java ä»£ç ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ViewTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>disposable</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Disposable.<span style=color:#a6e22e>disposed</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>å­—èŠ‚ç ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>.<span style=color:#a6e22e>class</span> <span style=color:#66d9ef>public</span> Lcom<span style=color:#f92672>/</span>github<span style=color:#f92672>/</span>hanlyjiang<span style=color:#f92672>/</span>lib_mod<span style=color:#f92672>/</span>ViewTest;
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>super</span> Ljava<span style=color:#f92672>/</span>lang<span style=color:#f92672>/</span>Object;
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>source</span> <span style=color:#e6db74>&#34;ViewTest.java&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> direct methods
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>method</span> <span style=color:#66d9ef>public</span> constructor <span style=color:#f92672>&lt;</span>init<span style=color:#f92672>&gt;</span>()V
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>registers</span> 1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>line</span> 5
</span></span><span style=display:flex><span>    invoke<span style=color:#f92672>-</span>direct {p0}, Ljava<span style=color:#f92672>/</span>lang<span style=color:#f92672>/</span>Object;<span style=color:#f92672>-&gt;&lt;</span>init<span style=color:#f92672>&gt;</span>()V
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span><span style=color:#f92672>-</span><span style=color:#66d9ef>void</span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>end</span> method
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>method</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#a6e22e>disposable</span>()Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable;
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>registers</span> 1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>line</span> 8
</span></span><span style=display:flex><span>    invoke<span style=color:#f92672>-</span><span style=color:#66d9ef>static</span> {}, Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable;<span style=color:#f92672>-&gt;</span>disposed()Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    move<span style=color:#f92672>-</span>result<span style=color:#f92672>-</span>object v0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span><span style=color:#f92672>-</span>object v0
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>end</span> method
</span></span></code></pre></div><p>çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><h3 id=disposabledisposed><code>Disposable.disposed()</code><a hidden class=anchor aria-hidden=true href=#disposabledisposed>#</a></h3><p>æˆ‘ä»¬ç»§ç»­æŸ¥çœ‹ Disposable æ¥å£çš„å­—èŠ‚ç ï¼Œå‘ç°å±…ç„¶<strong>æ²¡æœ‰æˆ‘ä»¬è°ƒç”¨çš„ disposed æ–¹æ³•</strong>ã€‚</p><p><img alt=202203132238351 loading=lazy src=https://s2.loli.net/2022/05/26/m2OoeUC3WaEuySc.png></p><p>ä½†æ˜¯ï¼Œå¾ˆå¿«å°±åœ¨æœ‰ä¸€ä¸ªå«åš <code>Disposable$-CC</code> çš„ç±»ä¸­æ‰¾åˆ°äº†æˆ‘ä»¬çš„ <code>disposed</code> æ–¹æ³•ï¼ŒåŒæ—¶å…¶ä¸­è¿˜åŒ…æ‹¬äº† <code>Disposable</code> æ¥å£ä¸­çš„æ‰€æœ‰é™æ€æ–¹æ³•</p><p><img alt=202203132240481 loading=lazy src=https://s2.loli.net/2022/05/26/ljBCpFPid92AczY.png></p><p>è¿™é‡Œæˆ‘ä»¬ç²˜è´´ä¸‹ Disposable æ¥å£çš„å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰ä¸¤ä¸ªæ¥å£æ–¹æ³•å®šä¹‰ï¼Œè¿˜æœ‰è‹¥å¹²staticæ–¹æ³•çš„å®šä¹‰åŠå®ç°ã€‚è€Œæˆ‘ä»¬çš„é™æ€æ–¹æ³•å…¨éƒ¨ä½äºå­—èŠ‚ç ä¸­ <code>Disposable$-CC</code> è¿™ä¸ªç±»ä¸­ï¼Œè€Œä¸¤ä¸ªæ¥å£æ–¹æ³•è¿˜ä¿ç•™åœ¨ <code>Disposable</code> ç±»ä¸­ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Disposable</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>dispose</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isDisposed</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>fromRunnable</span>(<span style=color:#a6e22e>@NonNull</span> Runnable run) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(run, <span style=color:#e6db74>&#34;run is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> RunnableDisposable(run);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>fromAction</span>(<span style=color:#a6e22e>@NonNull</span> Action action) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(action, <span style=color:#e6db74>&#34;action is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ActionDisposable(action);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>fromFuture</span>(<span style=color:#a6e22e>@NonNull</span> Future<span style=color:#f92672>&lt;?&gt;</span> future) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(future, <span style=color:#e6db74>&#34;future is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fromFuture(future, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>fromFuture</span>(<span style=color:#a6e22e>@NonNull</span> Future<span style=color:#f92672>&lt;?&gt;</span> future, <span style=color:#66d9ef>boolean</span> allowInterrupt) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(future, <span style=color:#e6db74>&#34;future is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> FutureDisposable(future, allowInterrupt);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>fromSubscription</span>(<span style=color:#a6e22e>@NonNull</span> Subscription subscription) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(subscription, <span style=color:#e6db74>&#34;subscription is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> SubscriptionDisposable(subscription);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>fromAutoCloseable</span>(<span style=color:#a6e22e>@NonNull</span> AutoCloseable autoCloseable) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(autoCloseable, <span style=color:#e6db74>&#34;autoCloseable is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> AutoCloseableDisposable(autoCloseable);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> AutoCloseable <span style=color:#a6e22e>toAutoCloseable</span>(<span style=color:#a6e22e>@NonNull</span> Disposable disposable) {
</span></span><span style=display:flex><span>        Objects.<span style=color:#a6e22e>requireNonNull</span>(disposable, <span style=color:#e6db74>&#34;disposable is null&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> disposable::dispose;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>empty</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fromRunnable(Functions.<span style=color:#a6e22e>EMPTY_RUNNABLE</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Disposable <span style=color:#a6e22e>disposed</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> EmptyDisposable.<span style=color:#a6e22e>INSTANCE</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æ­£ç¡®çš„viewtestdisposableå­—èŠ‚ç >æ­£ç¡®çš„<code>ViewTest.disposable</code>å­—èŠ‚ç <a hidden class=anchor aria-hidden=true href=#æ­£ç¡®çš„viewtestdisposableå­—èŠ‚ç >#</a></h3><p>å‰é¢æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬å­—èŠ‚ç ä¸­è°ƒç”¨çš„æ–¹æ³•æ˜¯ <code>Disposable;->disposed()</code>ï¼Œè€Œå®é™…ä¸Šè¯¥æ–¹æ³•ä½äº <code>Disposable$-CC;->disposed()</code>,ç°åœ¨æˆ‘ä»¬çœ‹ä¸‹æ­£å¸¸çš„å¯ä»¥è¿è¡Œé€šè¿‡çš„apkä¸­dexå¯¹åº”çš„å­—èŠ‚ç ã€‚</p><ul><li>ç»è¿‡å¯¹æ¯”ï¼Œå‘ç°Disposable è¿˜æ˜¯è¢«æ‹†åˆ†ä¸ºäº† Disposable å’Œ Disposable$-CC</li><li>è€Œ ViewTest.disposable å¯¹åº”çš„å­—èŠ‚ç å´æœ‰åŒºåˆ«ï¼Œæ­£å¸¸å¯ä»¥è°ƒç”¨é€šè¿‡çš„å­—èŠ‚ç å’Œå¼‚å¸¸çš„å¯¹æ¯”å¦‚ä¸‹ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// æ­£ç¡®çš„</span>
</span></span><span style=display:flex><span>invoke<span style=color:#f92672>-</span><span style=color:#66d9ef>static</span> {}, Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable$<span style=color:#f92672>-</span>CC;<span style=color:#f92672>-&gt;</span>disposed()Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// é”™è¯¯çš„</span>
</span></span><span style=display:flex><span>invoke<span style=color:#f92672>-</span><span style=color:#66d9ef>static</span> {}, Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable;<span style=color:#f92672>-&gt;</span>disposed()Lio<span style=color:#f92672>/</span>reactivex<span style=color:#f92672>/</span>rxjava3<span style=color:#f92672>/</span>disposables<span style=color:#f92672>/</span>Disposable;
</span></span></code></pre></div><p>å¯ä»¥å‘ç°ï¼Œèƒ½æ­£å¸¸è¿è¡Œçš„æ–¹æ³•è°ƒç”¨ç¡®å®æŒ‡å‘äº† <code>Disposable$-CC;->disposed()</code>ã€‚</p><h3 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h3><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼š</p><ul><li>Disposable ä¼šè¢«æ‹†åˆ†ä¸º <code>Disposable</code> å’Œ <code>Disposable$-CC</code><ul><li><code>Disposable</code> åŒ…å«äº†æ¥å£æ–¹æ³•çš„å£°æ˜</li><li><code>Disposable$-CC</code> ä¸­åˆ™åŒ…å«äº†é™æ€æ–¹æ³•çš„å£°æ˜åŠå®ç°</li></ul></li><li>å¯¹äºè°ƒç”¨åˆ° Disposable çš„é™æ€æ–¹æ³•çš„éƒ¨åˆ†ï¼Œæœ€ç»ˆç¼–è¯‘å®Œæˆåï¼Œä¼šæ›¿æ¢ä¸ºæŒ‡å‘<code>Disposable$-CC</code></li></ul><p>è€Œæˆ‘ä»¬å‡ºé”™çš„æƒ…å†µä¸‹ï¼Œæ˜¯æ²¡æœ‰æ­£ç¡®æŒ‡å‘çš„ï¼Œæ‰€ä»¥ç¡®å®ä¼šå‡ºç°æ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•çš„æƒ…å†µã€‚</p><h2 id=åŸå› åˆ†æ>åŸå› åˆ†æ<a hidden class=anchor aria-hidden=true href=#åŸå› åˆ†æ>#</a></h2><h3 id=class---dex--java8-è¯­è¨€ç‰¹æ€§æ”¯æŒ>class -> dex & Java8 è¯­è¨€ç‰¹æ€§æ”¯æŒ<a hidden class=anchor aria-hidden=true href=#class---dex--java8-è¯­è¨€ç‰¹æ€§æ”¯æŒ>#</a></h3><p>ä»¥ä¸‹ä¸ºAndroid å®˜æ–¹æ–‡æ¡£ä¸Šçš„ç›¸å…³æè¿°ï¼š</p><blockquote><ul><li><strong><a href=https://developer.android.google.cn/studio/write/java8-support>ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½å’Œ API</a></strong></li></ul><p>Android Gradle æ’ä»¶å¯¹ä½¿ç”¨æŸäº› Java 8 è¯­è¨€åŠŸèƒ½ä»¥åŠåˆ©ç”¨è¿™äº›åŠŸèƒ½çš„ç¬¬ä¸‰æ–¹åº“æä¾›å†…ç½®æ”¯æŒã€‚å¦‚å›¾ æ‰€ç¤ºï¼Œé»˜è®¤å·¥å…·é“¾å®ç°æ–°è¯­è¨€åŠŸèƒ½çš„æ–¹æ³•æ˜¯åœ¨<strong>ä½¿ç”¨ D8/R8 å°†ç±»æ–‡ä»¶ç¼–è¯‘æˆ dex ä»£ç çš„è¿‡ç¨‹ä¸­æ‰§è¡Œå­—èŠ‚ç è½¬æ¢ï¼Œè¿™ç§è½¬æ¢ç§°ä¸º <code>desugar</code></strong>ã€‚</p><p><img alt=202203132254856 loading=lazy src=https://s2.loli.net/2022/05/26/PLiSGTwhZADqjFm.png></p></blockquote><blockquote><ul><li><strong><a href=https://developer.android.google.cn/studio/write/java8-support#library-desugaring>Java 8 åŠæ›´é«˜ç‰ˆæœ¬ API è„±ç³–æ”¯æŒï¼ˆAndroid Gradle æ’ä»¶ 4.0.0 åŠæ›´é«˜ç‰ˆæœ¬ï¼‰</a></strong></li></ul><p>å¦‚æœæ‚¨ä½¿ç”¨ Android Gradle æ’ä»¶ 4.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬æ„å»ºåº”ç”¨ï¼Œæ’ä»¶æ‰©å±•äº†å¯¹ä½¿ç”¨å¤šç§ Java 8 è¯­è¨€ API çš„æ”¯æŒï¼Œè€Œæ— éœ€ä¸ºåº”ç”¨è®¾ç½®æœ€ä½ API çº§åˆ«ã€‚</p><p>ä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°å¯¹è¾ƒä½å¹³å°ç‰ˆæœ¬çš„è¿™ç§é¢å¤–æ”¯æŒï¼Œæ˜¯å› ä¸ºè„±ç³–å¼•æ“ç»è¿‡æ’ä»¶ 4.0.0 åŠæ›´é«˜ç‰ˆæœ¬æ‰©å±•åï¼Œä¹Ÿèƒ½ä½¿ Java è¯­è¨€ API è„±ç³–ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨æ”¯æŒè¾ƒä½ Android ç‰ˆæœ¬çš„åº”ç”¨ä¸­æ·»åŠ è¿‡å»ä»…åœ¨æœ€æ–° Android ç‰ˆæœ¬ä¸­å¯ç”¨çš„æ ‡å‡†è¯­è¨€ APIï¼ˆå¦‚ <code>java.util.streams</code>ï¼‰ã€‚</p><p>ä½¿ç”¨ Android Gradle æ’ä»¶ 4.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬æ„å»ºåº”ç”¨æ—¶ï¼Œæ”¯æŒä¸‹é¢ä¸€ç»„ APIï¼š</p><ul><li>é¡ºåºæµ (<code>java.util.stream</code>)</li><li><code>java.time</code> çš„å­é›†</li><li><code>java.util.function</code></li><li><code>java.util.{Map,Collection,Comparator}</code> çš„æœ€è¿‘æ–°å¢å†…å®¹</li><li>å¯é€‰å†…å®¹ï¼ˆ<code>java.util.Optional</code>ã€<code>java.util.OptionalInt</code> å’Œ <code>java.util.OptionalDouble</code>ï¼‰ä»¥åŠå¯¹ä¸Šè¿° API å¾ˆæœ‰ç”¨çš„ä¸€äº›å…¶ä»–æ–°ç±»</li><li><code>java.util.concurrent.atomic</code> çš„ä¸€äº›æ–°å¢å†…å®¹ï¼ˆ<code>AtomicInteger</code>ã€<code>AtomicLong</code> å’Œ <code>AtomicReference</code> çš„æ–°æ–¹æ³•ï¼‰</li><li><code>ConcurrentHashMap</code>ï¼ˆåŒ…å« Android 5.0 çš„é—®é¢˜ä¿®å¤ï¼‰</li></ul><p>å¦‚éœ€æŸ¥çœ‹å—æ”¯æŒçš„ API çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…<a href=https://developer.android.google.cn/studio/write/java8-support-table>é€šè¿‡è„±ç³–è·å¾— Java 8 åŠæ›´é«˜ç‰ˆæœ¬ API</a>ã€‚</p><p>ä¸ºäº†æ”¯æŒè¿™äº›è¯­è¨€ APIï¼Œæ’ä»¶ç¼–è¯‘äº†ä¸€ä¸ªå•ç‹¬çš„ DEX æ–‡ä»¶ï¼ˆå…¶ä¸­åŒ…å«ç¼ºå¤± API çš„å®ç°ï¼‰ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ä¸­ã€‚è„±ç³–è¿‡ç¨‹ä¼šé‡æ–°ç¼–å†™åº”ç”¨çš„ä»£ç ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶æ”¹ç”¨æ­¤åº“ã€‚</p></blockquote><blockquote><ul><li><strong><a href=https://developer.android.google.cn/studio/command-line/d8>ç¼–è¯‘ä½¿ç”¨äº† Java 8 è¯­è¨€åŠŸèƒ½çš„å­—èŠ‚ç </a></strong></li></ul><p><code>d8</code> é€šè¿‡ä¸€ä¸ªå«åšâ€œè„±ç³–â€çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œä½¿æ‚¨èƒ½å¤Ÿåœ¨ä»£ç ä¸­<a href=https://developer.android.google.cn/studio/write/java8-support>ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½</a>ï¼Œæ­¤è¿‡ç¨‹ä¼šå°†è¿™äº›å®ç”¨çš„è¯­è¨€åŠŸèƒ½è½¬æ¢ä¸ºå¯ä»¥åœ¨ Android å¹³å°ä¸Šè¿è¡Œçš„å­—èŠ‚ç ã€‚</p><p>Android Studio å’Œ Android Gradle æ’ä»¶åŒ…å«äº† <code>d8</code> ä¸ºæ‚¨å¯ç”¨è„±ç³–æ‰€éœ€çš„ç±»è·¯å¾„èµ„æºã€‚</p><p>Android Studio å’Œ Android Gradle æ’ä»¶åŒ…å«äº† <code>d8</code> ä¸ºæ‚¨å¯ç”¨è„±ç³–æ‰€éœ€çš„ç±»è·¯å¾„èµ„æºã€‚ä¸è¿‡ï¼Œä»å‘½ä»¤è¡Œä½¿ç”¨ <code>d8</code> æ—¶ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨æ·»åŠ è¿™äº›èµ„æºã€‚</p><p>å…¶ä¸­ä¸€ä¸ªèµ„æºå°±æ˜¯ç›®æ ‡ Android SDK ä¸­çš„ <code>android.jar</code>ã€‚æ­¤èµ„æºåŒ…å«ä¸€ç»„ Android å¹³å° APIï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>--lib</code> æ ‡è®°æ¥æŒ‡å®šè¯¥èµ„æºçš„è·¯å¾„ã€‚</p><p>å¦ä¸€ä¸ªèµ„æºæ˜¯æ‚¨é¡¹ç›®çš„éƒ¨åˆ†å·²ç¼–è¯‘çš„ Java å­—èŠ‚ç ï¼Œæ‚¨ç›®å‰ä¸æ‰“ç®—å°†è¿™éƒ¨åˆ†å­—èŠ‚ç ç¼–è¯‘ä¸º DEX å­—èŠ‚ç ï¼Œä½†åœ¨å°†å…¶ä»–ç±»ç¼–è¯‘ä¸º DEX å­—èŠ‚ç æ—¶éœ€è¦ç”¨åˆ°è¿™äº›å­—èŠ‚ç ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»£ç ä½¿ç”¨<a href=https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html>é»˜è®¤å’Œé™æ€æ¥å£æ–¹æ³•</a>ï¼ˆä¸€ç§ Java 8 è¯­è¨€åŠŸèƒ½ï¼‰ï¼Œåˆ™æ‚¨éœ€è¦ä½¿ç”¨æ­¤æ ‡è®°æ¥æŒ‡å®šæ‚¨é¡¹ç›®çš„æ‰€æœ‰ Java å­—èŠ‚ç çš„è·¯å¾„ï¼Œå³ä½¿æ‚¨ä¸æ‰“ç®—å°†æ‰€æœ‰ Java å­—èŠ‚ç éƒ½ç¼–è¯‘ä¸º DEX å­—èŠ‚ç ä¹Ÿæ˜¯å¦‚æ­¤ã€‚<strong>è¿™æ˜¯å› ä¸º <code>d8</code> éœ€è¦æ ¹æ®è¿™äº›ä¿¡æ¯æ¥ç†è§£æ‚¨é¡¹ç›®çš„ä»£ç å¹¶è§£æå¯¹æ¥å£æ–¹æ³•çš„è°ƒç”¨</strong>ã€‚</p></blockquote><p>é€šè¿‡ä»¥ä¸Šæè¿°æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><ul><li>Android é€šè¿‡ D8 å°† class è½¬æ¢ä¸ºå¯åœ¨Androidå¹³å°ä¸Šæ‰§è¡Œçš„dexï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º <strong>desugar ï¼ˆè„±ç³–ï¼‰</strong>ã€‚</li><li>è„±ç³–è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡æ–°ç¼–å†™åº”ç”¨çš„ä»£ç ã€‚</li><li>è„±ç³–æ—¶éœ€è¦æŒ‡å®šè„±ç³–æ‰€éœ€è¦çš„ç±»è·¯å¾„èµ„æºã€‚</li></ul><h3 id=å¯¹åº”æˆ‘ä»¬çš„é—®é¢˜>å¯¹åº”æˆ‘ä»¬çš„é—®é¢˜<a hidden class=anchor aria-hidden=true href=#å¯¹åº”æˆ‘ä»¬çš„é—®é¢˜>#</a></h3><blockquote><p>å¾…è¡¥å……</p><p>é€šè¿‡ d8 æ‰‹åŠ¨å¯¹classè¿›è¡Œdexè½¬æ¢ï¼Œç„¶åè§‚å¯Ÿè½¬æ¢å·®å¼‚ã€‚</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>d8 MainActivity.class --intermediate --file-per-class --output ~/build/intermediate/dex
</span></span><span style=display:flex><span>--lib android_sdk/platforms/api-level/android.jar
</span></span><span style=display:flex><span>--classpath ~/build/javac/debug
</span></span></code></pre></div><p>å°†ç±»æ–‡ä»¶ç¼–è¯‘æˆ dex ä»£ç çš„è¿‡ç¨‹ä¸­æ‰§è¡Œå­—èŠ‚ç è½¬æ¢ï¼Œè¿™ç§è½¬æ¢ç§°ä¸º <code>desugar</code>ã€‚AGP ä½¿ç”¨ D8 å®Œæˆdesugar ï¼Œä¸ºäº†èƒ½æ­£ç¡®çš„å¤„ç†classï¼Œéœ€è¦æ ¹æ®POMä¾èµ–ä¿¡æ¯æ¥å¯»æ‰¾å¯¹åº”çš„ä¾èµ–ï¼Œç„¶åå°†æ‰€æœ‰ä¾èµ–é¡¹ç›®éƒ½åŠ å…¥åˆ° desurge classpathï¼Œç„¶åæ‰èƒ½æ­£ç¡®å¤„ç†ã€‚è€Œ aar å¼•å…¥æ—¶ä¸å…·å¤‡è¿™äº›POMä¾èµ–ä¿¡æ¯ï¼Œæ‰€ä»¥æ— æ³•è¿˜åŸã€‚</p><h2 id=è¿›ä¸€æ­¥äº†è§£>è¿›ä¸€æ­¥äº†è§£<a hidden class=anchor aria-hidden=true href=#è¿›ä¸€æ­¥äº†è§£>#</a></h2><ul><li><a href=https://developer.android.google.cn/studio/command-line/d8>d8 | Android å¼€å‘è€… | Android Developers (google.cn)</a></li><li><a href=https://developer.android.google.cn/studio/write/java8-support>ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½å’Œ API | Android å¼€å‘è€… | Android Developers (google.cn)</a></li><li><a href=https://developer.android.google.cn/studio/write/java8-support#library-desugaring>ä½¿ç”¨ Java 8 è¯­è¨€åŠŸèƒ½å’Œ API | Android å¼€å‘è€… | Android Developers (google.cn)</a></li><li><a href=https://developer.android.google.cn/studio/releases/gradle-plugin>Android Gradle æ’ä»¶ç‰ˆæœ¬è¯´æ˜ | Android å¼€å‘è€… | Android Developers (google.cn)</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://hanlyjiang.github.io/tags/android/>Android</a></li><li><a href=https://hanlyjiang.github.io/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/>é—®é¢˜è§£å†³</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://hanlyjiang.github.io/>æ¸…æ°´æ± å¡˜</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>