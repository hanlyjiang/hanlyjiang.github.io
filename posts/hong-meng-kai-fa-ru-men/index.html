<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>鸿蒙开发基础知识 | 清水池塘</title><meta name=keywords content><meta name=description content='基于官方文档整理的鸿蒙开发的基础知识
Ability框架
简介
整体内容

同Android 对比关系：

FeatureAbility - Activity
ServiceAbility - Service
DataAbility - ContentProvider
CES - 广播
ANS - 通知
线程通信

InnerEvent - Message
EventHandler - Handler
EventRunner - Looper
EventQueue - MessageQueue



Ability说明
同Android 单独提供 Activity，Service，ContentProvider 的基类不一样，鸿蒙这三个组件全都是继承自 Ability，那么如何区分一个Ability到底是哪种组件呢？


继承后实现时选择性实现对应组件的生命周期方法；


在 config.json 中定义ability时，需要声明对应的类型（page-FA；service - ServiceAbility； data - DataAbility）
{
    "name": "com.hanlyjiang.ohosdemo.MainJSAbility2",
    "icon": "$media:icon",
    "description": "$string:mainjsability2_description",
    "label": "$string:entry_MainJSAbility2",
    "type": "page",
    "launchType": "standard",
},
{
    "name": "com.hanlyjiang.ohosdemo.ServiceAbility",
    "icon": "$media:icon",
    "description": "$string:serviceability_description",
    "type": "service"
},
{
    "name": "com.hanlyjiang.ohosdemo.DataAbility",
    "icon": "$media:icon",
    "description": "$string:dataability_description",
    "type": "data",
    "uri": "dataability://com.hanlyjiang.ohosdemo.DataAbility"
}


FA（FeatureAbility）
FA 生命周期

  
      
          生命周期回调
          说明
      
  
  
      
          onStart
          首次创建触发，仅执行一次 需要setMainRoute
      
      
          onActive
          进入前台可交互状态后调用
      
      
          onInactive
          Page失去焦点时调用
      
      
          onBackground
          Page不再可见 资源释放及耗时保存操作
      
      
          onForeground
          重新回到前台（获得焦点 重新申请资源
      
      
          onStop
          销毁页面时调用 释放系统资源
      
  

同Android对比，关系如下：'><meta name=author content="野生莲藕"><link rel=canonical href=https://hanlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/><link crossorigin=anonymous href=/assets/css/stylesheet.e3ad983e2ed74d47928d2fcfb404b2d2a87f0ad3e1c106708add8cededbe9a25.css integrity="sha256-462YPi7XTUeSjS/PtASy0qh/CtPhwQZwit2M7e2+miU=" rel="preload stylesheet" as=style><link rel=icon href=https://hanlyjiang.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hanlyjiang.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hanlyjiang.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://hanlyjiang.github.io/apple-touch-icon.png><link rel=mask-icon href=https://hanlyjiang.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hanlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://hanlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/"><meta property="og:site_name" content="清水池塘"><meta property="og:title" content="鸿蒙开发基础知识"><meta property="og:description" content='基于官方文档整理的鸿蒙开发的基础知识
Ability框架 简介 整体内容 同Android 对比关系：
FeatureAbility - Activity ServiceAbility - Service DataAbility - ContentProvider CES - 广播 ANS - 通知 线程通信 InnerEvent - Message EventHandler - Handler EventRunner - Looper EventQueue - MessageQueue Ability说明 同Android 单独提供 Activity，Service，ContentProvider 的基类不一样，鸿蒙这三个组件全都是继承自 Ability，那么如何区分一个Ability到底是哪种组件呢？
继承后实现时选择性实现对应组件的生命周期方法；
在 config.json 中定义ability时，需要声明对应的类型（page-FA；service - ServiceAbility； data - DataAbility）
{ "name": "com.hanlyjiang.ohosdemo.MainJSAbility2", "icon": "$media:icon", "description": "$string:mainjsability2_description", "label": "$string:entry_MainJSAbility2", "type": "page", "launchType": "standard", }, { "name": "com.hanlyjiang.ohosdemo.ServiceAbility", "icon": "$media:icon", "description": "$string:serviceability_description", "type": "service" }, { "name": "com.hanlyjiang.ohosdemo.DataAbility", "icon": "$media:icon", "description": "$string:dataability_description", "type": "data", "uri": "dataability://com.hanlyjiang.ohosdemo.DataAbility" } FA（FeatureAbility） FA 生命周期 生命周期回调 说明 onStart 首次创建触发，仅执行一次 需要setMainRoute onActive 进入前台可交互状态后调用 onInactive Page失去焦点时调用 onBackground Page不再可见 资源释放及耗时保存操作 onForeground 重新回到前台（获得焦点 重新申请资源 onStop 销毁页面时调用 释放系统资源 同Android对比，关系如下：'><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-30T10:13:11+00:00"><meta property="article:modified_time" content="2021-11-30T10:13:11+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="鸿蒙开发基础知识"><meta name=twitter:description content='基于官方文档整理的鸿蒙开发的基础知识
Ability框架
简介
整体内容

同Android 对比关系：

FeatureAbility - Activity
ServiceAbility - Service
DataAbility - ContentProvider
CES - 广播
ANS - 通知
线程通信

InnerEvent - Message
EventHandler - Handler
EventRunner - Looper
EventQueue - MessageQueue



Ability说明
同Android 单独提供 Activity，Service，ContentProvider 的基类不一样，鸿蒙这三个组件全都是继承自 Ability，那么如何区分一个Ability到底是哪种组件呢？


继承后实现时选择性实现对应组件的生命周期方法；


在 config.json 中定义ability时，需要声明对应的类型（page-FA；service - ServiceAbility； data - DataAbility）
{
    "name": "com.hanlyjiang.ohosdemo.MainJSAbility2",
    "icon": "$media:icon",
    "description": "$string:mainjsability2_description",
    "label": "$string:entry_MainJSAbility2",
    "type": "page",
    "launchType": "standard",
},
{
    "name": "com.hanlyjiang.ohosdemo.ServiceAbility",
    "icon": "$media:icon",
    "description": "$string:serviceability_description",
    "type": "service"
},
{
    "name": "com.hanlyjiang.ohosdemo.DataAbility",
    "icon": "$media:icon",
    "description": "$string:dataability_description",
    "type": "data",
    "uri": "dataability://com.hanlyjiang.ohosdemo.DataAbility"
}


FA（FeatureAbility）
FA 生命周期

  
      
          生命周期回调
          说明
      
  
  
      
          onStart
          首次创建触发，仅执行一次 需要setMainRoute
      
      
          onActive
          进入前台可交互状态后调用
      
      
          onInactive
          Page失去焦点时调用
      
      
          onBackground
          Page不再可见 资源释放及耗时保存操作
      
      
          onForeground
          重新回到前台（获得焦点 重新申请资源
      
      
          onStop
          销毁页面时调用 释放系统资源
      
  

同Android对比，关系如下：'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hanlyjiang.github.io/posts/"},{"@type":"ListItem","position":2,"name":"鸿蒙开发基础知识","item":"https://hanlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"鸿蒙开发基础知识","name":"鸿蒙开发基础知识","description":"基于官方文档整理的鸿蒙开发的基础知识\nAbility框架 简介 整体内容 同Android 对比关系：\nFeatureAbility - Activity ServiceAbility - Service DataAbility - ContentProvider CES - 广播 ANS - 通知 线程通信 InnerEvent - Message EventHandler - Handler EventRunner - Looper EventQueue - MessageQueue Ability说明 同Android 单独提供 Activity，Service，ContentProvider 的基类不一样，鸿蒙这三个组件全都是继承自 Ability，那么如何区分一个Ability到底是哪种组件呢？\n继承后实现时选择性实现对应组件的生命周期方法；\n在 config.json 中定义ability时，需要声明对应的类型（page-FA；service - ServiceAbility； data - DataAbility）\n{ \u0026#34;name\u0026#34;: \u0026#34;com.hanlyjiang.ohosdemo.MainJSAbility2\u0026#34;, \u0026#34;icon\u0026#34;: \u0026#34;$media:icon\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;$string:mainjsability2_description\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;$string:entry_MainJSAbility2\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;page\u0026#34;, \u0026#34;launchType\u0026#34;: \u0026#34;standard\u0026#34;, }, { \u0026#34;name\u0026#34;: \u0026#34;com.hanlyjiang.ohosdemo.ServiceAbility\u0026#34;, \u0026#34;icon\u0026#34;: \u0026#34;$media:icon\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;$string:serviceability_description\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;service\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;com.hanlyjiang.ohosdemo.DataAbility\u0026#34;, \u0026#34;icon\u0026#34;: \u0026#34;$media:icon\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;$string:dataability_description\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;data\u0026#34;, \u0026#34;uri\u0026#34;: \u0026#34;dataability://com.hanlyjiang.ohosdemo.DataAbility\u0026#34; } FA（FeatureAbility） FA 生命周期 生命周期回调 说明 onStart 首次创建触发，仅执行一次 需要setMainRoute onActive 进入前台可交互状态后调用 onInactive Page失去焦点时调用 onBackground Page不再可见 资源释放及耗时保存操作 onForeground 重新回到前台（获得焦点 重新申请资源 onStop 销毁页面时调用 释放系统资源 同Android对比，关系如下：\n","keywords":[],"articleBody":"基于官方文档整理的鸿蒙开发的基础知识\nAbility框架 简介 整体内容 同Android 对比关系：\nFeatureAbility - Activity ServiceAbility - Service DataAbility - ContentProvider CES - 广播 ANS - 通知 线程通信 InnerEvent - Message EventHandler - Handler EventRunner - Looper EventQueue - MessageQueue Ability说明 同Android 单独提供 Activity，Service，ContentProvider 的基类不一样，鸿蒙这三个组件全都是继承自 Ability，那么如何区分一个Ability到底是哪种组件呢？\n继承后实现时选择性实现对应组件的生命周期方法；\n在 config.json 中定义ability时，需要声明对应的类型（page-FA；service - ServiceAbility； data - DataAbility）\n{ \"name\": \"com.hanlyjiang.ohosdemo.MainJSAbility2\", \"icon\": \"$media:icon\", \"description\": \"$string:mainjsability2_description\", \"label\": \"$string:entry_MainJSAbility2\", \"type\": \"page\", \"launchType\": \"standard\", }, { \"name\": \"com.hanlyjiang.ohosdemo.ServiceAbility\", \"icon\": \"$media:icon\", \"description\": \"$string:serviceability_description\", \"type\": \"service\" }, { \"name\": \"com.hanlyjiang.ohosdemo.DataAbility\", \"icon\": \"$media:icon\", \"description\": \"$string:dataability_description\", \"type\": \"data\", \"uri\": \"dataability://com.hanlyjiang.ohosdemo.DataAbility\" } FA（FeatureAbility） FA 生命周期 生命周期回调 说明 onStart 首次创建触发，仅执行一次 需要setMainRoute onActive 进入前台可交互状态后调用 onInactive Page失去焦点时调用 onBackground Page不再可见 资源释放及耗时保存操作 onForeground 重新回到前台（获得焦点 重新申请资源 onStop 销毁页面时调用 释放系统资源 同Android对比，关系如下：\n鸿蒙 安卓 onStart onCreate onActive onResume onInactive onPause onBackground onStop onForeground onRestart onStop onDestory Service Ability 同 Android Service，没有界面，可后台运行；\n但是鸿蒙可以启动/绑定远程设备上的服务（指定设备ID）。\nUI开发框架 ArkUI 官方文档： JS FA概述\nArkUI-JS UI 了解更多：\nHarmonyOS应用开发-服务开发-工具-HUAWEI DevEco Studio使用指南-工程管理-HarmonyOS工程介绍 JS API 参考：HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-文件组织 整体上类似 VUE \u0026 微信小程序\n关键词 AceAbility：加载JS的Ability的基类实现 setInstanceName： 指定AceAbility加载的js目录（加载多个通过此方法指定js目录） 项目结构 AceAbility 子类（上面对应的是MainJSAbility） default 目录 app.js ： 全局的JavaScript逻辑文件和应用的生命周期管理 pages/index.js : JS FA(JS 界面) - ==可以有多个page== config.json： js 声明 app.js 应用生命周期回调\nexport default { onCreate() { console.info('AceApplication onCreate'); }, onDestroy() { console.info('AceApplication onDestroy'); } }; index.js(JS FA) 页面生命生命周期回调 页面业务逻辑(数据绑定，事件处理等) export default { data: { title: \"\" }, onInit() { console.log(\"JS Page onInit\") }, onActive(){ console.log(\"JS Page onActive\") }, onInactive(){ console.log(\"JS Page onInactive\") }, onShow(){ console.log(\"JS Page onShow\") }, onHide(){ console.log(\"JS Page onHide\") }, onDestroy(){ console.log(\"JS Page onDestroy\") } } 生命周期 详细参考： HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-生命周期\nOHSO_DEMO: Application initialized OHSO_DEMO: MainAbility onStart OHSO_DEMO: MainAbility onActive // 打开JS PAGE OHSO_DEMO: MainAbility onInactive OHSO_DEMO: MainJSAbility onStart JSApp: app Log: AceApplication onCreate（app.js） OHSO_DEMO: MainJSAbility onActive JSApp: app Log: JS Page onInit JSApp: app Log: JS Page onActive JSApp: app Log: JS Page onShow OHSO_DEMO: MainAbility onBackground // 切换最近任务 OHSO_DEMO: MainJSAbility onInactive JSApp: app Log: JS Page onInactive OHSO_DEMO: MainJSAbility onBackground JSApp: app Log: JS Page onHide // 恢复 OHSO_DEMO: MainJSAbility onForeground JSApp: app Log: JS Page onShow OHSO_DEMO: MainJSAbility onActive JSApp: app Log: JS Page onActive // 回退（退出JS PAGE） JSApp: app Log: JS Page onHide JSApp: app Log: JS Page onDestroy OHSO_DEMO: MainJSAbility onInactive OHSO_DEMO: MainAbility onInactive OHSO_DEMO: MainAbility onActive OHSO_DEMO: MainJSAbility onBackground OHSO_DEMO: MainJSAbility onStop JSApp: app Log: AceApplication onDestroy （app.js） JS 的生命周期在Java Ability的内部。 HML HML（HarmonyOS Markup Language）是一套类HTML的标记语言。通过组件、事件构建出页面的内容。页面具备数据绑定、事件绑定、列表渲染、条件渲染等高级能力。\n具体可参考： HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-语法-HML语法参考\nindex.CSS 参考： HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-语法-CSS语法参考\n鸿蒙特性 鸿蒙特有的功能和特性，主要包括：服务卡片，流转，华为分享及平行视界。\n服务卡片 服务卡片（以下简称“卡片”）是FA的一种界面展示形式，将FA的重要信息或操作前置到卡片，以达到服务直达，减少体验层级的目的。服务卡片也是一个FA，只不过是显示在其他应用中的界面。\n卡片常用于嵌入到其他应用（当前只支持系统应用）中作为其界面的一部分显示，并支持拉起页面，发送消息等基础的交互功能。卡片使用方负责显示卡片。\nJava/JS卡片场景能力差异如下表所示：\n场景 Java卡片 JS卡片 支持的版本 实时刷新（类似时钟） Java使用ComponentProvider做实时刷新代价比较大 JS可以做到端侧刷新，但是需要定制化组件 HarmonyOS 2.0及以上 开发方式 Java UI在卡片提供方需要同时对数据和组件进行处理，生成ComponentProvider远端渲染 JS卡片在使用方加载渲染，提供方只要处理数据、组件和逻辑分离 HarmonyOS 2.0及以上 组件支持 Text、Image、DirectionalLayout、PositionLayout、DependentLayout div、list、list-item、swiper、stack、image、text、span、progress、button（定制：chart 、clock、calendar） HarmonyOS 2.0及以上 卡片内动效 不支持 暂不开放 HarmonyOS 2.0及以上 阴影模糊 不支持 支持 HarmonyOS 2.0及以上 动态适应布局 不支持 支持 HarmonyOS 2.0及以上 自定义卡片跳转页面 不支持 支持 HarmonyOS 2.0及以上 综上所述，==JS卡片比Java卡片支持的控件和能力都更丰富==：\nJava卡片：适合作为一个直达入口，没有复杂的页面和事件。 JS卡片：适合有复杂界面的卡片。 卡片开发（link） 需要通过一些参数进行配置。\n配置； FA中实现特定的回调方法用来处理卡片的界面相关事件 待补充\n服务流转 HarmonyOS应用开发-服务开发-专题-流转-流转架构\n两种类型：\n跨端迁移 多端协同 基本概念 流转：在HarmonyOS中泛指多设备分布式操作。流转能力打破设备界限，多设备联动，使用户应用程序可分可合、可流转，实现如邮件跨设备编辑、多设备协同健身、多屏游戏等分布式业务。流转为开发者提供更广的使用场景和更新的产品视角，强化产品优势，实现体验升级。流转按照体验可分为跨端迁移和多端协同。 跨端迁移：一种实现用户应用程序流转的技术方案，指在A端运行的FA迁移到B端上，完成迁移后， B端FA继续任务，而A端应用退出。在用户使用设备的过程中，当使用情境发生变化时（例如：从室内走到户外或者周围有更合适的设备等），之前使用的设备可能已经不适合继续当前的任务，此时，用户可以选择新的设备来继续当前的任务。常见的跨端迁移场景实例： 视频来电时从手机迁移到智慧屏，视频聊天体验更佳，手机视频应用退出。 手机上阅读应用浏览文章，迁移到平板上继续查看，手机阅读应用退出。 多端协同：一种实现用户应用程序流转的技术方案，指多端上的不同FA/PA同时运行、或者交替运行实现完整的业务；或者，多端上的相同FA/PA同时运行实现完整的业务。多个设备作为一个整体为用户提供比单设备更加高效、沉浸的体验。例如：用户通过智慧屏的应用A拍照后，A可调用手机的应用B进行人像美颜，最终将美颜后的照片保存在智慧屏的应用A。常见的多端协同场景实例还有： 手机侧应用A做游戏手柄，智慧屏侧应用B做游戏显示，为用户组成一个全新的游戏体验。 平板侧应用A做答题板，智慧屏侧应用B做直播，为用户组成一个全新的上网课体验。 任务流转管理服务 在流转发起端，接受用户应用程序注册，提供流转入口、状态显示、退出流转等管理能力。流转任务管理服务提供的注册、解注册、显示设备列表、上报业务状态是实现跨端迁移的前提。\n任务流转管理服务由一个实现了流转 IContinuationRegisterManager 接口的管理器提供，包括如下接口：\nregister：注册并连接到流转任务管理服务。 showDeviceList：显示组网内可选择设备列表信息。 updateConnectStatus：通知流转任务管理服务更新当前用户程序的连接状态，并在流转任务管理服务界面展示给用户。 disconnect：在应用退出时，主动调用断开和流转任务管理服务的连接。 unregister：从流转任务管理服务解注册。 一般流程是: FA start时注册，然后显示设备列表，用户选择设备后更新连接状态。页面销毁时断开连接并解除注册。\n部分设备上有内置的流转管理服务，部分设备没有。\n当前仅手机、平板设备支持流转任务管理服务。 如果没有内置的流转任务管理服务，则需要开发者自行通过 DeviceManager 实现流转任务管理 跨端迁移流程： 说明\n跨端迁移后，设备A上的应用需要自行退出。\n多端协同流程 说明\n设备A和B进行多端协同后，设备A和设备C重复如上流程，可实现设备A、B、C进行多端协同，此时设备A是中心控制点。\n跨端迁移开发流程 流程 整体流程如下：\n限制 每个应用注册流转任务管理服务的Ability数量上限为5个，后续新增注册的Ability会将最开始注册的覆盖。 一个应用可能包含多个FA，仅需要在支持跨端迁移的FA及其所包含的AbilitySlice中，调用或实现相关接口。 跨端迁移不支持两个设备之间分别登录不同的帐号，也就是要求多个设备是同帐号。 跨端迁移不支持对PA的迁移，只支持对FA的迁移。 跨端迁移完成时，系统不会主动关闭发起迁移的FA，开发者可以根据业务需要，主动调用terminateAbility或stopAbility关闭FA，并调用updateConnectStatus()更新设备的连接状态。 通过continueAbility进行跨端迁移过程中，远端FA首先接收到发起端FA传输的数据，再执行启动，即onRestoreData()发生在onStart()之前。 跨端迁移的数据大小限制200KB以内，即onSaveData只能传递200KB以内的数据。 迁移传输的数据，当前仅支持基础类型数据传递和系统Sequenceable对象，不支持自定义对象及文件数据传递。 FA流转过程中，在流转未完成时再次调用continueAbility发起流转，接口将会抛出状态异常，应用需要加以限制处理。 跨端迁移要求HarmonyOS 2.0以上版本才能支持，注册到流转任务管理服务时jsonParams中需要增加{\"harmonyVersion\":\"2.0.0\"}过滤条件。 多端协同开发流程 流程 相对跨端迁移，多了 DeviceManager 的参与，用于初始化和关闭分布式环境。另外，跨端迁移只涉及FA，而多端协同需要PA参与。\n协同实际上的流程就是，通过startAbility 启动FA，及PA，通过connectAbility连接到PA，然后通过远程PA来进行协作。\n限制 每个应用注册流转任务管理服务的Ability数量上限为5个，后续新增注册的Ability会将最开始注册的覆盖。 startAbility、connectAbility中跨设备传递的intent数据大小限制200KB以内。 不支持使用connectAbility触发远端PA的免安装。 connectAbility中跨设备传递的remoteObject数据大小限制200KB以内。 多端协同要求HarmonyOS 2.0以上版本才能支持，注册到流转任务管理服务时jsonParams中需要增加{“harmonyVersion”:“2.0.0”}过滤条件。 stopAbility不支持两个设备之间分别登录不同的帐号，也就是要求多个设备是同帐号。 示例 参考官方示例：\nability/DistributedScheduler · HarmonyOS/harmonyos_app_samples - 码云 - 开源中国 (gitee.com) HarmonyOS应用开发-服务开发-专题-流转-HarmonyOS端发起多端协同-多端协同开发指导 其他 日志输出 HiLog static final HiLogLabel label = new HiLogLabel(HiLog.LOG_APP, MY_MODULE, \"MY_TAG\"); //MY_MODULE=0x00201 HiLog.warn(label, \"Failed to visit %{private}s, reason:%{public}d.\", url, errno); 输出如下：\nResult: 05-26 11:01:06.870 1051 1051 W 00201/test: Failed to visit , reason:503. 注意： 隐藏了本该被输出的 url\n对应概念/类 LayoutBoost -\u003e LayoutInflater 常见问题 隐藏 ActionBar 将如下配置段添加到 module 中，或者添加到 ability 中。\n\"metaData\": { \"customizeData\": [ { \"name\": \"hwc-theme\", \"value\": \"androidhwext:style/Theme.Emui.Light.NoTitleBar\" } ] } 按理应该提供直接对Ability设置主题的配置方式，但是不知道配置项。\nHDC 使用 hdc 路径： $USER_HOME/Library/Huawei/sdk/toolchains/\n查看帮助： hdc help\n一般用法如下：\nhdc [options] [arguments] 查看设备列表： hdc list targets -v 查看日志： hilog\nhdc hilog | grep com.hanlyjiang.ohosdemo 查看可调试应用PID列表： hdc listpid\n使用手机内的android命令 使用 hdc shell 进入手机shell环境，然后可执行对应的android命令\n如下，通过dumpsys activity services -p com.hanlyjiang.ohosdemo可以看到实际上 鸿蒙为我们的 com.hanlyjiang.ohosdemo.pa.ServiceAbility 生成了一个对应的shellService（com.hanlyjiang.ohosdemo/.pa.ServiceAbilityShellService）\n$ dumpsys activity services -p com.hanlyjiang.ohosdemo ACTIVITY MANAGER SERVICES (dumpsys activity services) User 0 active services: * ServiceRecord{b2375c9 u0 com.hanlyjiang.ohosdemo/.pa.ServiceAbilityShellService} intent={pkg=com.hanlyjiang.ohosdemo cmp=com.hanlyjiang.ohosdemo/.pa.ServiceAbilityShellService} packageName=com.hanlyjiang.ohosdemo processName=com.hanlyjiang.ohosdemo baseDir=/data/app/com.hanlyjiang.ohosdemo-XmLCnshi-zSpv76TYXTvwA==/base.apk dataDir=/data/user/0/com.hanlyjiang.ohosdemo app=ProcessRecord{b340b59 7888:com.hanlyjiang.ohosdemo/u0a191} createTime=-10m43s889ms startingBgTimeout=-- lastActivity=-10m43s889ms restartTime=-10m43s889ms createdFromFg=true startRequested=true delayedStop=false stopIfKilled=true callStart=true lastStartId=1 ","wordCount":"644","inLanguage":"en","datePublished":"2021-11-30T10:13:11Z","dateModified":"2021-11-30T10:13:11Z","author":{"@type":"Person","name":"野生莲藕"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://hanlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/"},"publisher":{"@type":"Organization","name":"清水池塘","logo":{"@type":"ImageObject","url":"https://hanlyjiang.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://hanlyjiang.github.io/ accesskey=h title="清水池塘 (Alt + H)">清水池塘</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hanlyjiang.github.io/ title=首页><span><i class='fas fa-home'></i>首页</span></a></li><li><a href=https://hanlyjiang.github.io/archives/ title=归档><span><i class='fas fa-tags'></i>归档</span></a></li><li><a href=https://hanlyjiang.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://hanlyjiang.github.io/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://hanlyjiang.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://hanlyjiang.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">鸿蒙开发基础知识</h1><div class=post-meta><span title='2021-11-30 10:13:11 +0000 UTC'>November 30, 2021</span>&nbsp;·&nbsp;<span>4 min</span>&nbsp;·&nbsp;<span>644 words</span>&nbsp;·&nbsp;<span>野生莲藕</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#ability%e6%a1%86%e6%9e%b6 aria-label=Ability框架>Ability框架</a><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a><ul><li><a href=#%e6%95%b4%e4%bd%93%e5%86%85%e5%ae%b9 aria-label=整体内容>整体内容</a></li><li><a href=#ability%e8%af%b4%e6%98%8e aria-label=Ability说明>Ability说明</a></li></ul></li><li><a href=#fafeatureability aria-label=FA（FeatureAbility）>FA（FeatureAbility）</a><ul><li><a href=#fa-%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f aria-label="FA 生命周期">FA 生命周期</a></li></ul></li><li><a href=#service-ability aria-label="Service Ability">Service Ability</a></li></ul></li><li><a href=#ui%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6 aria-label=UI开发框架>UI开发框架</a><ul><li><a href=#arkui aria-label=ArkUI>ArkUI</a></li><li><a href=#arkui-js-ui aria-label="ArkUI-JS UI">ArkUI-JS UI</a><ul><li><a href=#%e5%85%b3%e9%94%ae%e8%af%8d aria-label=关键词>关键词</a></li><li><a href=#%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84 aria-label=项目结构>项目结构</a></li><li><a href=#appjs aria-label=app.js>app.js</a></li><li><a href=#indexjsjs-fa aria-label="index.js(JS FA)">index.js(JS FA)</a></li><li><a href=#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f aria-label=生命周期>生命周期</a></li><li><a href=#hml aria-label=HML>HML</a></li><li><a href=#indexcss aria-label=index.CSS>index.CSS</a></li></ul></li></ul></li><li><a href=#%e9%b8%bf%e8%92%99%e7%89%b9%e6%80%a7 aria-label=鸿蒙特性>鸿蒙特性</a><ul><li><a href=#%e6%9c%8d%e5%8a%a1%e5%8d%a1%e7%89%87 aria-label=服务卡片>服务卡片</a><ul><li><a href=#%e5%8d%a1%e7%89%87%e5%bc%80%e5%8f%91link aria-label=卡片开发（link）>卡片开发（link）</a></li></ul></li><li><a href=#%e6%9c%8d%e5%8a%a1%e6%b5%81%e8%bd%ac aria-label=服务流转>服务流转</a><ul><li><a href=#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5 aria-label=基本概念>基本概念</a><ul><li><a href=#%e4%bb%bb%e5%8a%a1%e6%b5%81%e8%bd%ac%e7%ae%a1%e7%90%86%e6%9c%8d%e5%8a%a1 aria-label=任务流转管理服务>任务流转管理服务</a></li><li><a href=#%e8%b7%a8%e7%ab%af%e8%bf%81%e7%a7%bb%e6%b5%81%e7%a8%8b aria-label=跨端迁移流程：>跨端迁移流程：</a></li><li><a href=#%e5%a4%9a%e7%ab%af%e5%8d%8f%e5%90%8c%e6%b5%81%e7%a8%8b aria-label=多端协同流程>多端协同流程</a></li></ul></li><li><a href=#%e8%b7%a8%e7%ab%af%e8%bf%81%e7%a7%bb%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b aria-label=跨端迁移开发流程>跨端迁移开发流程</a><ul><li><a href=#%e6%b5%81%e7%a8%8b aria-label=流程>流程</a></li><li><a href=#%e9%99%90%e5%88%b6 aria-label=限制>限制</a></li></ul></li><li><a href=#%e5%a4%9a%e7%ab%af%e5%8d%8f%e5%90%8c%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b aria-label=多端协同开发流程>多端协同开发流程</a><ul><li><a href=#%e6%b5%81%e7%a8%8b-1 aria-label=流程>流程</a></li><li><a href=#%e9%99%90%e5%88%b6-1 aria-label=限制>限制</a></li></ul></li><li><a href=#%e7%a4%ba%e4%be%8b aria-label=示例>示例</a></li></ul></li></ul></li><li><a href=#%e5%85%b6%e4%bb%96 aria-label=其他>其他</a><ul><li><a href=#%e6%97%a5%e5%bf%97%e8%be%93%e5%87%ba aria-label=日志输出>日志输出</a><ul><li><a href=#hilog aria-label=HiLog>HiLog</a></li></ul></li><li><a href=#%e5%af%b9%e5%ba%94%e6%a6%82%e5%bf%b5%e7%b1%bb aria-label=对应概念/类>对应概念/类</a></li><li><a href=#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label=常见问题>常见问题</a><ul><li><a href=#%e9%9a%90%e8%97%8f-actionbar aria-label="隐藏 ActionBar">隐藏 ActionBar</a></li></ul></li><li><a href=#hdc-%e4%bd%bf%e7%94%a8 aria-label="HDC 使用">HDC 使用</a><ul><li><a href=#%e4%bd%bf%e7%94%a8%e6%89%8b%e6%9c%ba%e5%86%85%e7%9a%84android%e5%91%bd%e4%bb%a4 aria-label=使用手机内的android命令>使用手机内的android命令</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><p>基于官方文档整理的鸿蒙开发的基础知识</p><h1 id=ability框架>Ability框架<a hidden class=anchor aria-hidden=true href=#ability框架>#</a></h1><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><h3 id=整体内容>整体内容<a hidden class=anchor aria-hidden=true href=#整体内容>#</a></h3><p>同<code>Android</code> 对比关系：</p><ul><li><code>FeatureAbility</code> - <code>Activity</code></li><li><code>ServiceAbility</code> - <code>Service</code></li><li><code>DataAbility</code> - <code>ContentProvider</code></li><li><code>CES</code> - 广播</li><li><code>ANS</code> - 通知</li><li>线程通信<ul><li><code>InnerEvent</code> - <code>Message</code></li><li><code>EventHandler</code> - <code>Handler</code></li><li><code>EventRunner</code> - <code>Looper</code></li><li><code>EventQueue</code> - <code>MessageQueue</code></li></ul></li></ul><h3 id=ability说明>Ability说明<a hidden class=anchor aria-hidden=true href=#ability说明>#</a></h3><p>同Android 单独提供 Activity，Service，ContentProvider 的基类不一样，鸿蒙这三个组件全都是继承自 Ability，那么如何区分一个Ability到底是哪种组件呢？</p><ul><li><p>继承后实现时选择性实现对应组件的生命周期方法；</p></li><li><p>在 <code>config.json</code> 中定义ability时，需要声明对应的类型（page-FA；service - ServiceAbility； data - DataAbility）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;com.hanlyjiang.ohosdemo.MainJSAbility2&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;icon&#34;</span>: <span style=color:#e6db74>&#34;$media:icon&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;$string:mainjsability2_description&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;label&#34;</span>: <span style=color:#e6db74>&#34;$string:entry_MainJSAbility2&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;page&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;launchType&#34;</span>: <span style=color:#e6db74>&#34;standard&#34;</span>,
</span></span><span style=display:flex><span>}<span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;com.hanlyjiang.ohosdemo.ServiceAbility&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;icon&#34;</span>: <span style=color:#e6db74>&#34;$media:icon&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;$string:serviceability_description&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;service&#34;</span>
</span></span><span style=display:flex><span>}<span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;com.hanlyjiang.ohosdemo.DataAbility&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;icon&#34;</span>: <span style=color:#e6db74>&#34;$media:icon&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;$string:dataability_description&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;data&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;uri&#34;</span>: <span style=color:#e6db74>&#34;dataability://com.hanlyjiang.ohosdemo.DataAbility&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul><h2 id=fafeatureability>FA（FeatureAbility）<a hidden class=anchor aria-hidden=true href=#fafeatureability>#</a></h2><h3 id=fa-生命周期>FA 生命周期<a hidden class=anchor aria-hidden=true href=#fa-生命周期>#</a></h3><table><thead><tr><th>生命周期回调</th><th>说明</th></tr></thead><tbody><tr><td>onStart</td><td>首次创建触发，仅执行一次 需要setMainRoute</td></tr><tr><td>onActive</td><td>进入前台可交互状态后调用</td></tr><tr><td>onInactive</td><td>Page失去焦点时调用</td></tr><tr><td>onBackground</td><td>Page不再可见 资源释放及耗时保存操作</td></tr><tr><td>onForeground</td><td>重新回到前台（获得焦点 重新申请资源</td></tr><tr><td>onStop</td><td>销毁页面时调用 释放系统资源</td></tr></tbody></table><p>同<code>Android</code>对比，关系如下：</p><p><img alt=image-20211028144542021 loading=lazy src=https://gitee.com/hanlyjiang/image-repo/raw/master/image/202111301012429.png></p><table><thead><tr><th>鸿蒙</th><th>安卓</th></tr></thead><tbody><tr><td>onStart</td><td>onCreate</td></tr><tr><td>onActive</td><td>onResume</td></tr><tr><td>onInactive</td><td>onPause</td></tr><tr><td>onBackground</td><td>onStop</td></tr><tr><td>onForeground</td><td>onRestart</td></tr><tr><td>onStop</td><td>onDestory</td></tr></tbody></table><h2 id=service-ability>Service Ability<a hidden class=anchor aria-hidden=true href=#service-ability>#</a></h2><p>同 Android Service，没有界面，可后台运行；</p><p>但是鸿蒙可以启动/绑定远程设备上的服务（指定设备ID）。</p><p><img alt=点击放大 loading=lazy src=https://gitee.com/hanlyjiang/image-repo/raw/master/image/202111301012611.jpg></p><h1 id=ui开发框架>UI开发框架<a hidden class=anchor aria-hidden=true href=#ui开发框架>#</a></h1><h2 id=arkui>ArkUI<a hidden class=anchor aria-hidden=true href=#arkui>#</a></h2><blockquote><p>官方文档： <a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-js-fa-overview-0000000000585484>JS FA概述</a></p></blockquote><h2 id=arkui-js-ui>ArkUI-JS UI<a hidden class=anchor aria-hidden=true href=#arkui-js-ui>#</a></h2><blockquote><p>了解更多：</p><ul><li><a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/project_overview-0000001053822398>HarmonyOS应用开发-服务开发-工具-HUAWEI DevEco Studio使用指南-工程管理-HarmonyOS工程介绍</a></li><li>JS API 参考：<a href=https://developer.harmonyos.com/cn/docs/documentation/doc-references/js-framework-file-0000000000611396>HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-文件组织</a></li></ul></blockquote><p>整体上类似 VUE & 微信小程序</p><h3 id=关键词>关键词<a hidden class=anchor aria-hidden=true href=#关键词>#</a></h3><ul><li><code>AceAbility</code>：加载JS的Ability的基类实现</li><li><code>setInstanceName</code>： 指定AceAbility加载的js目录（加载多个通过此方法指定js目录）</li></ul><h3 id=项目结构>项目结构<a hidden class=anchor aria-hidden=true href=#项目结构>#</a></h3><ul><li><code>AceAbility</code> 子类（上面对应的是<code>MainJSAbility</code>）</li><li><code>default</code> 目录<ul><li><code>app.js</code> ： 全局的JavaScript逻辑文件和应用的生命周期管理</li><li><code>pages/index.js</code> : JS FA(JS 界面) - ==可以有多个page==</li></ul></li><li><code>config.json</code>： js 声明</li></ul><h3 id=appjs>app.js<a hidden class=anchor aria-hidden=true href=#appjs>#</a></h3><p>应用生命周期回调</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onCreate</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#39;AceApplication onCreate&#39;</span>);
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onDestroy</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#39;AceApplication onDestroy&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h3 id=indexjsjs-fa>index.js(JS FA)<a hidden class=anchor aria-hidden=true href=#indexjsjs-fa>#</a></h3><ul><li>页面生命生命周期回调</li><li>页面业务逻辑(数据绑定，事件处理等)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onInit</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;JS Page onInit&#34;</span>)
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onActive</span>(){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;JS Page onActive&#34;</span>)
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onInactive</span>(){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;JS Page onInactive&#34;</span>)
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onShow</span>(){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;JS Page onShow&#34;</span>)
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onHide</span>(){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;JS Page onHide&#34;</span>)
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onDestroy</span>(){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;JS Page onDestroy&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=生命周期>生命周期<a hidden class=anchor aria-hidden=true href=#生命周期>#</a></h3><p>详细参考： <a href=https://developer.harmonyos.com/cn/docs/documentation/doc-references/js-framework-lifecycle-0000001113708038>HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-生命周期</a></p><p><img alt=img loading=lazy src=https://gitee.com/hanlyjiang/image-repo/raw/master/image/202111301012303.png></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>OHSO_DEMO:  Application initialized
</span></span><span style=display:flex><span>OHSO_DEMO:  MainAbility onStart
</span></span><span style=display:flex><span>OHSO_DEMO:  MainAbility onActive
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 打开JS PAGE
</span></span><span style=display:flex><span>OHSO_DEMO:  MainAbility onInactive
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onStart
</span></span><span style=display:flex><span>JSApp:  app Log: AceApplication onCreate（app.js）
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onActive
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onInit
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onActive
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onShow
</span></span><span style=display:flex><span>OHSO_DEMO:  MainAbility onBackground
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 切换最近任务
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onInactive
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onInactive
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onBackground
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onHide
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 恢复
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onForeground
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onShow
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onActive
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onActive
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 回退（退出JS PAGE）
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onHide
</span></span><span style=display:flex><span>JSApp:  app Log: JS Page onDestroy
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onInactive
</span></span><span style=display:flex><span>OHSO_DEMO:  MainAbility onInactive
</span></span><span style=display:flex><span>OHSO_DEMO:  MainAbility onActive
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onBackground
</span></span><span style=display:flex><span>OHSO_DEMO:  MainJSAbility onStop
</span></span><span style=display:flex><span>JSApp:  app Log: AceApplication onDestroy （app.js）
</span></span></code></pre></div><ul><li>JS 的生命周期在Java Ability的内部。</li></ul><h3 id=hml>HML<a hidden class=anchor aria-hidden=true href=#hml>#</a></h3><blockquote><p>HML（HarmonyOS Markup Language）是一套类HTML的标记语言。通过组件、事件构建出页面的内容。页面具备数据绑定、事件绑定、列表渲染、条件渲染等高级能力。</p></blockquote><p>具体可参考： <a href=https://developer.harmonyos.com/cn/docs/documentation/doc-references/js-framework-syntax-hml-0000000000611413>HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-语法-HML语法参考</a></p><h3 id=indexcss>index.CSS<a hidden class=anchor aria-hidden=true href=#indexcss>#</a></h3><p>参考： <a href=https://developer.harmonyos.com/cn/docs/documentation/doc-references/js-framework-syntax-css-0000000000611425>HarmonyOS应用开发-服务开发-JS API参考-手机、平板、智慧屏和智能穿戴开发-基于JS扩展的类Web开发范式-框架说明-语法-CSS语法参考</a></p><h1 id=鸿蒙特性>鸿蒙特性<a hidden class=anchor aria-hidden=true href=#鸿蒙特性>#</a></h1><p>鸿蒙特有的功能和特性，主要包括：服务卡片，流转，华为分享及平行视界。</p><h2 id=服务卡片>服务卡片<a hidden class=anchor aria-hidden=true href=#服务卡片>#</a></h2><p>服务卡片（以下简称“卡片”）是<a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/glossary-0000000000029587#section5406185415236>FA</a>的一种界面展示形式，将FA的重要信息或操作前置到卡片，以达到服务直达，减少体验层级的目的。服务卡片也是一个FA，只不过是显示在其他应用中的界面。</p><p>卡片常用于嵌入到其他应用（当前只支持系统应用）中作为其界面的一部分显示，并支持拉起页面，发送消息等基础的交互功能。卡片使用方负责显示卡片。</p><p><img alt=img loading=lazy src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20210729150026.11448964563455945776572720158002:50520728101546:2800:FB99718B0883EC644C7B007DADE0F73F9A35B89CB4A68390F037D3A25D19B8B5.png?needInitFileName=true?needInitFileName=true"></p><p>Java/JS卡片场景能力差异如下表所示：</p><table><thead><tr><th>场景</th><th>Java卡片</th><th>JS卡片</th><th>支持的版本</th></tr></thead><tbody><tr><td>实时刷新（类似时钟）</td><td>Java使用ComponentProvider做实时刷新代价比较大</td><td>JS可以做到端侧刷新，但是需要定制化组件</td><td>HarmonyOS 2.0及以上</td></tr><tr><td>开发方式</td><td>Java UI在卡片提供方需要同时对数据和组件进行处理，生成ComponentProvider远端渲染</td><td>JS卡片在使用方加载渲染，提供方只要处理数据、组件和逻辑分离</td><td>HarmonyOS 2.0及以上</td></tr><tr><td>组件支持</td><td>Text、Image、DirectionalLayout、PositionLayout、DependentLayout</td><td>div、list、list-item、swiper、stack、image、text、span、progress、button（定制：chart 、clock、calendar）</td><td>HarmonyOS 2.0及以上</td></tr><tr><td>卡片内动效</td><td>不支持</td><td>暂不开放</td><td>HarmonyOS 2.0及以上</td></tr><tr><td>阴影模糊</td><td>不支持</td><td>支持</td><td>HarmonyOS 2.0及以上</td></tr><tr><td>动态适应布局</td><td>不支持</td><td>支持</td><td>HarmonyOS 2.0及以上</td></tr><tr><td>自定义卡片跳转页面</td><td>不支持</td><td>支持</td><td>HarmonyOS 2.0及以上</td></tr></tbody></table><p>综上所述，==JS卡片比Java卡片支持的控件和能力都更丰富==：</p><ul><li>Java卡片：适合作为一个直达入口，没有复杂的页面和事件。</li><li>JS卡片：适合有复杂界面的卡片。</li></ul><h3 id=卡片开发link>卡片开发（<a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-service-widget-provider-js-0000001150602175>link</a>）<a hidden class=anchor aria-hidden=true href=#卡片开发link>#</a></h3><p>需要通过一些参数进行配置。</p><ol><li>配置；</li><li>FA中实现特定的回调方法用来处理卡片的界面相关事件</li></ol><blockquote><p>待补充</p></blockquote><h2 id=服务流转>服务流转<a hidden class=anchor aria-hidden=true href=#服务流转>#</a></h2><blockquote><p><a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/hop-architecture-0000001143104837>HarmonyOS应用开发-服务开发-专题-流转-流转架构</a></p></blockquote><p>两种类型：</p><ul><li>跨端迁移</li><li>多端协同</li></ul><h3 id=基本概念>基本概念<a hidden class=anchor aria-hidden=true href=#基本概念>#</a></h3><ul><li>流转：在HarmonyOS中泛指多设备分布式操作。流转能力打破设备界限，多设备联动，使用户应用程序可分可合、可流转，实现如邮件跨设备编辑、多设备协同健身、多屏游戏等分布式业务。流转为开发者提供更广的使用场景和更新的产品视角，强化产品优势，实现体验升级。流转按照体验可分为<strong>跨端迁移</strong>和<strong>多端协同</strong>。</li><li><strong>跨端迁移</strong>：一种实现用户应用程序流转的技术方案，指在A端运行的FA迁移到B端上，完成迁移后， B端FA继续任务，而A端应用退出。在用户使用设备的过程中，当使用情境发生变化时（例如：从室内走到户外或者周围有更合适的设备等），之前使用的设备可能已经不适合继续当前的任务，此时，用户可以选择新的设备来继续当前的任务。常见的跨端迁移场景实例：<ul><li>视频来电时从手机迁移到智慧屏，视频聊天体验更佳，手机视频应用退出。</li><li>手机上阅读应用浏览文章，迁移到平板上继续查看，手机阅读应用退出。</li></ul></li><li><strong>多端协同</strong>：一种实现用户应用程序流转的技术方案，指多端上的不同FA/PA同时运行、或者交替运行实现完整的业务；或者，多端上的相同FA/PA同时运行实现完整的业务。多个设备作为一个整体为用户提供比单设备更加高效、沉浸的体验。例如：用户通过智慧屏的应用A拍照后，A可调用手机的应用B进行人像美颜，最终将美颜后的照片保存在智慧屏的应用A。常见的多端协同场景实例还有：<ul><li>手机侧应用A做游戏手柄，智慧屏侧应用B做游戏显示，为用户组成一个全新的游戏体验。</li><li>平板侧应用A做答题板，智慧屏侧应用B做直播，为用户组成一个全新的上网课体验。</li></ul></li></ul><h4 id=任务流转管理服务>任务流转管理服务<a hidden class=anchor aria-hidden=true href=#任务流转管理服务>#</a></h4><p>在流转发起端，接受用户应用程序注册，提供流转入口、状态显示、退出流转等管理能力。流转任务管理服务提供的注册、解注册、显示设备列表、上报业务状态是实现跨端迁移的前提。</p><p><em>任务流转管理服务</em>由一个实现了流转 <code>IContinuationRegisterManager</code> 接口的管理器提供，包括如下接口：</p><ul><li><code>register</code>：注册并连接到流转任务管理服务。</li><li><code>showDeviceList</code>：显示组网内可选择设备列表信息。</li><li><code>updateConnectStatus</code>：通知流转任务管理服务更新当前用户程序的连接状态，并在流转任务管理服务界面展示给用户。</li><li><code>disconnect</code>：在应用退出时，主动调用断开和流转任务管理服务的连接。</li><li><code>unregister</code>：从流转任务管理服务解注册。</li></ul><p>一般流程是: FA start时注册，然后显示设备列表，用户选择设备后更新连接状态。页面销毁时断开连接并解除注册。</p><p><strong>部分设备上有内置的流转管理服务，部分设备没有。</strong></p><ul><li>当前仅手机、平板设备支持流转任务管理服务。</li><li>如果没有内置的流转任务管理服务，则需要开发者自行通过 DeviceManager 实现流转任务管理</li></ul><h4 id=跨端迁移流程><a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/hop-architecture-0000001143104837>跨端迁移流程：</a><a hidden class=anchor aria-hidden=true href=#跨端迁移流程>#</a></h4><p><img alt=点击放大 loading=lazy src=https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20211101142614.png></p><blockquote><p><strong>说明</strong></p><p>跨端迁移后，设备A上的应用需要自行退出。</p></blockquote><h4 id=多端协同流程><a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/hop-architecture-0000001143104837>多端协同流程</a><a hidden class=anchor aria-hidden=true href=#多端协同流程>#</a></h4><p><img alt=点击放大 loading=lazy src=https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20211101142633.png></p><blockquote><p><strong>说明</strong></p><p>设备A和B进行多端协同后，设备A和设备C重复如上流程，可实现设备A、B、C进行多端协同，此时设备A是中心控制点。</p></blockquote><h3 id=跨端迁移开发流程>跨端迁移开发流程<a hidden class=anchor aria-hidden=true href=#跨端迁移开发流程>#</a></h3><h4 id=流程>流程<a hidden class=anchor aria-hidden=true href=#流程>#</a></h4><p>整体流程如下：</p><h4 id=限制>限制<a hidden class=anchor aria-hidden=true href=#限制>#</a></h4><ul><li>每个应用注册流转任务管理服务的<code>Ability</code>数量上限为5个，后续新增注册的Ability会将最开始注册的覆盖。</li><li>一个应用可能包含多个FA，仅需要在支持跨端迁移的FA及其所包含的<code>AbilitySlice</code>中，调用或实现相关接口。</li><li>跨端迁移不支持两个设备之间分别登录不同的帐号，也就是要求多个设备是同帐号。</li><li><strong>跨端迁移不支持对PA的迁移，只支持对FA的迁移</strong>。</li><li>跨端迁移完成时，系统不会主动关闭发起迁移的FA，开发者可以根据业务需要，主动调用<code>terminateAbility</code>或<code>stopAbility</code>关闭FA，并调用<code>updateConnectStatus()</code>更新设备的连接状态。</li><li>通过<code>continueAbility</code>进行跨端迁移过程中，远端FA首先接收到发起端FA传输的数据，再执行启动，即<code>onRestoreData()</code>发生在<code>onStart()</code>之前。</li><li><strong>跨端迁移的数据大小限制200KB以内，即<code>onSaveData</code>只能传递200KB以内的数据。</strong></li><li>迁移传输的数据，当前仅支持基础类型数据传递和系统<code>Sequenceable</code>对象，不支持自定义对象及文件数据传递。</li><li>FA流转过程中，在流转未完成时再次调用<code>continueAbility</code>发起流转，接口将会抛出状态异常，应用需要加以限制处理。</li><li>跨端迁移要求HarmonyOS 2.0以上版本才能支持，注册到流转任务管理服务时jsonParams中需要增加<code>{"harmonyVersion":"2.0.0"}</code>过滤条件。</li></ul><h3 id=多端协同开发流程>多端协同开发流程<a hidden class=anchor aria-hidden=true href=#多端协同开发流程>#</a></h3><h4 id=流程-1>流程<a hidden class=anchor aria-hidden=true href=#流程-1>#</a></h4><p>相对跨端迁移，多了 DeviceManager 的参与，用于初始化和关闭分布式环境。另外，跨端迁移只涉及FA，而多端协同需要PA参与。</p><p><img alt=img loading=lazy src=https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20211102112816.png></p><p>协同实际上的流程就是，通过startAbility 启动FA，及PA，通过connectAbility连接到PA，然后通过远程PA来进行协作。</p><h4 id=限制-1>限制<a hidden class=anchor aria-hidden=true href=#限制-1>#</a></h4><ul><li>每个应用注册流转任务管理服务的Ability数量上限为5个，后续新增注册的Ability会将最开始注册的覆盖。</li><li><strong>startAbility、connectAbility中跨设备传递的intent数据大小限制200KB以内。</strong></li><li>不支持使用connectAbility触发远端PA的免安装。</li><li><strong>connectAbility中跨设备传递的remoteObject数据大小限制200KB以内。</strong></li><li>多端协同要求HarmonyOS 2.0以上版本才能支持，注册到流转任务管理服务时jsonParams中需要增加{&ldquo;harmonyVersion&rdquo;:&ldquo;2.0.0&rdquo;}过滤条件。</li><li>stopAbility不支持两个设备之间分别登录不同的帐号，也就是要求多个设备是同帐号。</li></ul><h3 id=示例>示例<a hidden class=anchor aria-hidden=true href=#示例>#</a></h3><p>参考官方示例：</p><ul><li><a href=https://gitee.com/harmonyos/harmonyos_app_samples/tree/master/ability/DistributedScheduler>ability/DistributedScheduler · HarmonyOS/harmonyos_app_samples - 码云 - 开源中国 (gitee.com)</a></li><li><a href=https://developer.harmonyos.com/cn/docs/documentation/doc-guides/hop-multi-device-collaboration-guidelines-0000001139737211#section27065313575>HarmonyOS应用开发-服务开发-专题-流转-HarmonyOS端发起多端协同-多端协同开发指导</a></li></ul><h1 id=其他>其他<a hidden class=anchor aria-hidden=true href=#其他>#</a></h1><h2 id=日志输出>日志输出<a hidden class=anchor aria-hidden=true href=#日志输出>#</a></h2><h3 id=hilog>HiLog<a hidden class=anchor aria-hidden=true href=#hilog>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> HiLogLabel label <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HiLogLabel(HiLog.<span style=color:#a6e22e>LOG_APP</span>, MY_MODULE, <span style=color:#e6db74>&#34;MY_TAG&#34;</span>); <span style=color:#75715e>//MY_MODULE=0x00201</span>
</span></span><span style=display:flex><span>    HiLog.<span style=color:#a6e22e>warn</span>(label, <span style=color:#e6db74>&#34;Failed to visit %{private}s, reason:%{public}d.&#34;</span>, url, errno);
</span></span></code></pre></div><p>输出如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Result: 05-26 11:01:06.870 <span style=color:#ae81ff>1051</span> <span style=color:#ae81ff>1051</span> W 00201/test: Failed to visit &lt;private&gt;, reason:503.
</span></span></code></pre></div><blockquote><p>注意： 隐藏了本该被输出的 url</p></blockquote><h2 id=对应概念类>对应概念/类<a hidden class=anchor aria-hidden=true href=#对应概念类>#</a></h2><ul><li><code>LayoutBoost</code> -> <code>LayoutInflater</code></li></ul><h2 id=常见问题>常见问题<a hidden class=anchor aria-hidden=true href=#常见问题>#</a></h2><h3 id=隐藏-actionbar>隐藏 ActionBar<a hidden class=anchor aria-hidden=true href=#隐藏-actionbar>#</a></h3><p>将如下配置段添加到 module 中，或者添加到 ability 中。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>	<span style=color:#e6db74>&#34;metaData&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;customizeData&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>              <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;hwc-theme&#34;</span>,
</span></span><span style=display:flex><span>              <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;androidhwext:style/Theme.Emui.Light.NoTitleBar&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          ]
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><blockquote><p>按理应该提供直接对Ability设置主题的配置方式，但是不知道配置项。</p></blockquote><h2 id=hdc-使用>HDC 使用<a hidden class=anchor aria-hidden=true href=#hdc-使用>#</a></h2><p>hdc 路径： <code>$USER_HOME/Library/Huawei/sdk/toolchains/</code></p><ul><li><p>查看帮助： <code>hdc help</code></p><p>一般用法如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>hdc <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> &lt;command&gt; <span style=color:#f92672>[</span>arguments<span style=color:#f92672>]</span>
</span></span></code></pre></div></li><li><p>查看设备列表： <code>hdc list targets -v</code></p></li><li><p>查看日志： hilog</p><pre tabindex=0><code>hdc hilog | grep com.hanlyjiang.ohosdemo
</code></pre></li><li><p>查看可调试应用PID列表： <code>hdc listpid</code></p></li></ul><h3 id=使用手机内的android命令>使用手机内的<code>android</code>命令<a hidden class=anchor aria-hidden=true href=#使用手机内的android命令>#</a></h3><p>使用 hdc shell 进入手机shell环境，然后可执行对应的android命令</p><p>如下，通过<code>dumpsys activity services -p com.hanlyjiang.ohosdemo</code>可以看到实际上 鸿蒙为我们的 <code>com.hanlyjiang.ohosdemo.pa.ServiceAbility</code> 生成了一个对应的shellService（<code>com.hanlyjiang.ohosdemo/.pa.ServiceAbilityShellService</code>）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ dumpsys activity services -p com.hanlyjiang.ohosdemo
</span></span><span style=display:flex><span>ACTIVITY MANAGER SERVICES <span style=color:#f92672>(</span>dumpsys activity services<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  User <span style=color:#ae81ff>0</span> active services:
</span></span><span style=display:flex><span>  * ServiceRecord<span style=color:#f92672>{</span>b2375c9 u0 com.hanlyjiang.ohosdemo/.pa.ServiceAbilityShellService<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    intent<span style=color:#f92672>={</span>pkg<span style=color:#f92672>=</span>com.hanlyjiang.ohosdemo cmp<span style=color:#f92672>=</span>com.hanlyjiang.ohosdemo/.pa.ServiceAbilityShellService<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    packageName<span style=color:#f92672>=</span>com.hanlyjiang.ohosdemo
</span></span><span style=display:flex><span>    processName<span style=color:#f92672>=</span>com.hanlyjiang.ohosdemo
</span></span><span style=display:flex><span>    baseDir<span style=color:#f92672>=</span>/data/app/com.hanlyjiang.ohosdemo-XmLCnshi-zSpv76TYXTvwA<span style=color:#f92672>==</span>/base.apk
</span></span><span style=display:flex><span>    dataDir<span style=color:#f92672>=</span>/data/user/0/com.hanlyjiang.ohosdemo
</span></span><span style=display:flex><span>    app<span style=color:#f92672>=</span>ProcessRecord<span style=color:#f92672>{</span>b340b59 7888:com.hanlyjiang.ohosdemo/u0a191<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    createTime<span style=color:#f92672>=</span>-10m43s889ms startingBgTimeout<span style=color:#f92672>=</span>--
</span></span><span style=display:flex><span>    lastActivity<span style=color:#f92672>=</span>-10m43s889ms restartTime<span style=color:#f92672>=</span>-10m43s889ms createdFromFg<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>    startRequested<span style=color:#f92672>=</span>true delayedStop<span style=color:#f92672>=</span>false stopIfKilled<span style=color:#f92672>=</span>true callStart<span style=color:#f92672>=</span>true lastStartId<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://hanlyjiang.github.io/posts/clion-da-jian-arduino-kai-fa-huan-jing/><span class=title>« Prev</span><br><span>CLion搭建Arduino开发环境</span>
</a><a class=next href=https://hanlyjiang.github.io/posts/arduino-lcd-ku-an-zhuang-yu-shi-yong/><span class=title>Next »</span><br><span>Arduino LCD库安装与使用</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://hanlyjiang.github.io/>清水池塘</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>