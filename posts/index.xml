<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Posts on æ¸…æ°´æ± å¡˜</title><link>https://anlyjiang.github.io/posts/</link><description>Recent content in Posts on æ¸…æ°´æ± å¡˜</description><generator>Hugo -- 0.152.2</generator><language>zh-cn</language><lastBuildDate>Sat, 16 Apr 2022 22:57:53 +0000</lastBuildDate><atom:link href="https://anlyjiang.github.io/posts/index.xml" rel="self" type="application/rss+xml"/><item><title> PopupWindow é¡¶éƒ¨å¤šè¡Œæ˜¾ç¤º</title><link>https://anlyjiang.github.io/posts/popupwindow-ding-bu-duo-xing-xian-shi/</link><pubDate>Sat, 16 Apr 2022 22:57:53 +0000</pubDate><guid>https://anlyjiang.github.io/posts/popupwindow-ding-bu-duo-xing-xian-shi/</guid><description>&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä»¥è§£å†³ PopupWindow æ˜¾ç¤ºçš„ä¸€ä¸ªé—®é¢˜ä½œä¸ºç›®æ ‡æ¥è¿›è¡Œåˆ†æã€‚&lt;/p&gt;
&lt;h2 id="é—®é¢˜æè¿°"&gt;é—®é¢˜æè¿°&lt;/h2&gt;
&lt;h3 id="æƒ³è¦çš„æ•ˆæœ"&gt;æƒ³è¦çš„æ•ˆæœ&lt;/h3&gt;
&lt;p&gt;åœ¨æ§ä»¶ä¸Šæ–¹æ˜¾ç¤ºï¼Œå¯èƒ½æ˜¯å•è¡Œï¼Œä¹Ÿå¯èƒ½æ˜¯å¤šè¡Œã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id="å®ç°æ–¹å¼"&gt;å®ç°æ–¹å¼&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;showAsDropdown&lt;/code&gt; æ—¶ï¼Œå¯é€šè¿‡ yOffset å‚æ•°æŒ‡å®šYè½´æ–¹å‘ä¸Šçš„åç§»é‡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;åç§»é‡ = anchorView.height + popupWindow.height&lt;/code&gt;&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;å¯¹äºç¬¬ 2 ç§å•è¡Œçš„å¼¹å‡ºæ¡†æ¥è¯´ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒç®€å•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;RawPopupWindowActivity&lt;/span&gt; : DemoButtonsActivity() {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; popupWindow: PopupWindow? = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;override&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;onCreate&lt;/span&gt;(savedInstanceState: Bundle?) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;super&lt;/span&gt;.onCreate(savedInstanceState)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; addButton(&lt;span style="color:#e6db74"&gt;&amp;#34;å•è¡ŒPopup&amp;#34;&lt;/span&gt;) { v &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; showPopup(v, &lt;span style="color:#a6e22e"&gt;Constants&lt;/span&gt;.TEXT_SHORT) }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; addButton(&lt;span style="color:#e6db74"&gt;&amp;#34;å¤šè¡ŒPopup&amp;#34;&lt;/span&gt;) { v &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; showPopup(v, &lt;span style="color:#a6e22e"&gt;Constants&lt;/span&gt;.TEXT_MEDIUM) }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; addButton(&lt;span style="color:#e6db74"&gt;&amp;#34;å¤šè¡ŒPopup&amp;#34;&lt;/span&gt;) { v &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; showPopup(v, &lt;span style="color:#a6e22e"&gt;Constants&lt;/span&gt;.TEXT_LONG) }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;showPopup&lt;/span&gt;(anchorView: View, content: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; popupWindow&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; dismiss()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; popupWindow = PopupWindow(applicationContext).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isOutsideTouchable = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; PopupHelper(applicationContext).run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; contentView = binding.root
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; setText(content)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; width = &lt;span style="color:#a6e22e"&gt;WindowManager&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;LayoutParams&lt;/span&gt;.WRAP_CONTENT
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; height = &lt;span style="color:#a6e22e"&gt;WindowManager&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;LayoutParams&lt;/span&gt;.WRAP_CONTENT
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; setBackgroundDrawable(ColorDrawable(&lt;span style="color:#a6e22e"&gt;Color&lt;/span&gt;.TRANSPARENT))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æµ‹é‡é«˜åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; contentView.measure(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;View&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;MeasureSpec&lt;/span&gt;.makeMeasureSpec(width, &lt;span style="color:#a6e22e"&gt;View&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;MeasureSpec&lt;/span&gt;.UNSPECIFIED),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;View&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;MeasureSpec&lt;/span&gt;.makeMeasureSpec(height, &lt;span style="color:#a6e22e"&gt;View&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;MeasureSpec&lt;/span&gt;.UNSPECIFIED)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ˜¾ç¤ºæ—¶å‘ä¸Šç§»åŠ¨ anchorView.height + contentView.measuredHeight
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; showAsDropDown(anchorView, &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;, -(anchorView.height + contentView.measuredHeight))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="å®ç°æ•ˆæœåŠé—®é¢˜"&gt;å®ç°æ•ˆæœåŠé—®é¢˜&lt;/h3&gt;
&lt;p&gt;æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;</description></item><item><title>Android Jacocoè¦†ç›–ç‡ç»Ÿè®¡é…ç½®</title><link>https://anlyjiang.github.io/posts/android-jacoco-fu-gai-lu-tong-ji-pei-zhi/</link><pubDate>Sat, 19 Mar 2022 22:29:12 +0000</pubDate><guid>https://anlyjiang.github.io/posts/android-jacoco-fu-gai-lu-tong-ji-pei-zhi/</guid><description>&lt;p&gt;Android Jacoco è¦†ç›–ç‡ç»Ÿè®¡Gradleé…ç½®ï¼ŒåŒ…æ‹¬ç”Ÿæˆæœ¬åœ°å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œä»ªå™¨å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œåˆå¹¶ä¸¤ç§æµ‹è¯•çš„æŠ¥å‘Šï¼Œåˆå¹¶ä¸¤ç§æµ‹è¯•çš„æ‰§è¡Œæ•°æ®å¹¶åœ¨AndroidStudioçš„ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹æ¯ä¸€è¡Œçš„è¦†ç›–ç‡æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id="å¦‚ä½•è®©æµ‹è¯•ä»»åŠ¡ç”Ÿæˆ-jacoco-è¦†ç›–ç‡ç»Ÿè®¡æ•°æ®"&gt;å¦‚ä½•è®©æµ‹è¯•ä»»åŠ¡ç”Ÿæˆ Jacoco è¦†ç›–ç‡ç»Ÿè®¡æ•°æ®ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä»…ä»…ä»Gradleä»»åŠ¡æ¥è¯´ï¼Œä¸è€ƒè™‘ AndroidStudio/IDEAã€‚&lt;/p&gt;
&lt;h3 id="æœ¬åœ°å•å…ƒæµ‹è¯•test"&gt;æœ¬åœ°å•å…ƒæµ‹è¯•ï¼ˆTestï¼‰&lt;/h3&gt;
&lt;p&gt;å¯¹äºæœ¬åœ°å•å…ƒæµ‹è¯•æ¥è¯´ï¼ŒåŸå…ˆæœ‰ä¸€ä¸ª &lt;code&gt;testDebugUnitTest&lt;/code&gt; çš„æµ‹è¯•ä»»åŠ¡ï¼Œå¦‚æœä¸åšé…ç½®ï¼Œè¯¥ä»»åŠ¡åªä¼šç”Ÿæˆæµ‹è¯•é€šè¿‡æƒ…å†µçš„æŠ¥å‘Šã€‚åªè¦åº”ç”¨ jacoco æ’ä»¶ï¼Œç„¶åè¿è¡Œ &lt;code&gt;testDebugUnitTest&lt;/code&gt; ä»»åŠ¡æ—¶ï¼Œå°±ä¼šåŒæ—¶ç”Ÿæˆjacocoè¦†ç›–ç‡ç»Ÿè®¡&lt;strong&gt;æ‰§è¡Œæ•°æ®æ–‡ä»¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// build.gradle
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;apply(plugin = &lt;span style="color:#e6db74"&gt;&amp;#34;jacoco&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹æ‰€ä»¥èƒ½è¿™æ ·æ˜¯å› ä¸º jacoco æ’ä»¶ä¼šç»™æ‰€æœ‰ Test ç±»å‹çš„ä»»åŠ¡æ·»åŠ  jacoco çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è¾“å‡ºå…¶æ‰§è¡Œæ•°æ®æ–‡ä»¶è·¯å¾„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;testDebugUnitTest&amp;#34;&lt;/span&gt;).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; doLast {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.extensions.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jacoco&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; JacocoTaskExtension).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logger.lifecycle(&lt;span style="color:#e6db74"&gt;&amp;#34;testDebugUnitTest dest: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${this.destinationFile?.absolutePath}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œæƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;testDebugUnitTest dest: /Users/hanlyjiang/Wksp/project/AndroidTestSample/app/build/outputs/unit_test_code_coverage/debugUnitTest/testDebugUnitTest.exec
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä»ªå™¨å•å…ƒæµ‹è¯•androidtest"&gt;ä»ªå™¨å•å…ƒæµ‹è¯•ï¼ˆAndroidTestï¼‰&lt;/h3&gt;
&lt;p&gt;ä»ªå™¨å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ•°æ®çš„ç»Ÿè®¡éœ€è¦æ‰“å¼€&lt;code&gt;testCoverageEnabled&lt;/code&gt;å¼€å…³ï¼Œç„¶åä¼šæœ‰ä¸€ä¸ª&lt;code&gt;createDebugCoverageReport&lt;/code&gt; çš„ä»»åŠ¡ç”Ÿæˆï¼ŒåŒæ—¶ä¹Ÿä¼šç”Ÿæˆhtmlçš„æŠ¥å‘Šã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// groovy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;android &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildTypes &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; debug &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; testCoverageEnabled &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// kotlin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;android &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildTypes &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; getByName&lt;span style="color:#f92672"&gt;(&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;debug&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;).&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apply&lt;/span&gt; &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isTestCoverageEnabled &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿æ¥è®¾å¤‡æ‰§è¡Œè¯¥ä»»åŠ¡å³å¯ç”Ÿæˆå¯¹åº”çš„æ‰§è¡Œæ•°æ®æ–‡ä»¶åŠå¯¹åº”çš„è¦†ç›–ç‡æŠ¥å‘Šã€‚&lt;/p&gt;</description></item><item><title>Android Jacocoè¦†ç›–ç‡ç»Ÿè®¡é…ç½®</title><link>https://anlyjiang.github.io/posts/android-jacoco-gradle-config/</link><pubDate>Sat, 19 Mar 2022 22:29:12 +0000</pubDate><guid>https://anlyjiang.github.io/posts/android-jacoco-gradle-config/</guid><description>&lt;p&gt;Android Jacoco è¦†ç›–ç‡ç»Ÿè®¡Gradleé…ç½®ï¼ŒåŒ…æ‹¬ç”Ÿæˆæœ¬åœ°å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œä»ªå™¨å•å…ƒæµ‹è¯•æŠ¥å‘Šï¼Œåˆå¹¶ä¸¤ç§æµ‹è¯•çš„æŠ¥å‘Šï¼Œåˆå¹¶ä¸¤ç§æµ‹è¯•çš„æ‰§è¡Œæ•°æ®å¹¶åœ¨AndroidStudioçš„ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹æ¯ä¸€è¡Œçš„è¦†ç›–ç‡æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id="å¦‚ä½•è®©æµ‹è¯•ä»»åŠ¡ç”Ÿæˆ-jacoco-è¦†ç›–ç‡ç»Ÿè®¡æ•°æ®"&gt;å¦‚ä½•è®©æµ‹è¯•ä»»åŠ¡ç”Ÿæˆ Jacoco è¦†ç›–ç‡ç»Ÿè®¡æ•°æ®ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä»…ä»…ä»Gradleä»»åŠ¡æ¥è¯´ï¼Œä¸è€ƒè™‘ AndroidStudio/IDEAã€‚&lt;/p&gt;
&lt;h3 id="æœ¬åœ°å•å…ƒæµ‹è¯•test"&gt;æœ¬åœ°å•å…ƒæµ‹è¯•ï¼ˆTestï¼‰&lt;/h3&gt;
&lt;p&gt;å¯¹äºæœ¬åœ°å•å…ƒæµ‹è¯•æ¥è¯´ï¼ŒåŸå…ˆæœ‰ä¸€ä¸ª &lt;code&gt;testDebugUnitTest&lt;/code&gt; çš„æµ‹è¯•ä»»åŠ¡ï¼Œå¦‚æœä¸åšé…ç½®ï¼Œè¯¥ä»»åŠ¡åªä¼šç”Ÿæˆæµ‹è¯•é€šè¿‡æƒ…å†µçš„æŠ¥å‘Šã€‚åªè¦åº”ç”¨ jacoco æ’ä»¶ï¼Œç„¶åè¿è¡Œ &lt;code&gt;testDebugUnitTest&lt;/code&gt; ä»»åŠ¡æ—¶ï¼Œå°±ä¼šåŒæ—¶ç”Ÿæˆjacocoè¦†ç›–ç‡ç»Ÿè®¡&lt;strong&gt;æ‰§è¡Œæ•°æ®æ–‡ä»¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// build.gradle
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;apply(plugin = &lt;span style="color:#e6db74"&gt;&amp;#34;jacoco&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹æ‰€ä»¥èƒ½è¿™æ ·æ˜¯å› ä¸º jacoco æ’ä»¶ä¼šç»™æ‰€æœ‰ Test ç±»å‹çš„ä»»åŠ¡æ·»åŠ  jacoco çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è¾“å‡ºå…¶æ‰§è¡Œæ•°æ®æ–‡ä»¶è·¯å¾„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;testDebugUnitTest&amp;#34;&lt;/span&gt;).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; doLast {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.extensions.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jacoco&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; JacocoTaskExtension).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logger.lifecycle(&lt;span style="color:#e6db74"&gt;&amp;#34;testDebugUnitTest dest: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${this.destinationFile?.absolutePath}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œæƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;testDebugUnitTest dest: /Users/hanlyjiang/Wksp/project/AndroidTestSample/app/build/outputs/unit_test_code_coverage/debugUnitTest/testDebugUnitTest.exec
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä»ªå™¨å•å…ƒæµ‹è¯•androidtest"&gt;ä»ªå™¨å•å…ƒæµ‹è¯•ï¼ˆAndroidTestï¼‰&lt;/h3&gt;
&lt;p&gt;ä»ªå™¨å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ•°æ®çš„ç»Ÿè®¡éœ€è¦æ‰“å¼€&lt;code&gt;testCoverageEnabled&lt;/code&gt;å¼€å…³ï¼Œç„¶åä¼šæœ‰ä¸€ä¸ª&lt;code&gt;createDebugCoverageReport&lt;/code&gt; çš„ä»»åŠ¡ç”Ÿæˆï¼ŒåŒæ—¶ä¹Ÿä¼šç”Ÿæˆhtmlçš„æŠ¥å‘Šã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// groovy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;android &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildTypes &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; debug &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; testCoverageEnabled &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// kotlin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;android &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildTypes &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; getByName&lt;span style="color:#f92672"&gt;(&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;debug&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;).&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apply&lt;/span&gt; &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isTestCoverageEnabled &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿æ¥è®¾å¤‡æ‰§è¡Œè¯¥ä»»åŠ¡å³å¯ç”Ÿæˆå¯¹åº”çš„æ‰§è¡Œæ•°æ®æ–‡ä»¶åŠå¯¹åº”çš„è¦†ç›–ç‡æŠ¥å‘Šã€‚&lt;/p&gt;</description></item><item><title> AAR Java8 æ¥å£ NoSuchMethodError é”™è¯¯è§£å†³è®°å½•</title><link>https://anlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/</link><pubDate>Sun, 13 Mar 2022 23:18:16 +0000</pubDate><guid>https://anlyjiang.github.io/posts/aar-java8-jie-kou-nosuchmethoderror-cuo-wu-jie-jue-ji-lu/</guid><description>&lt;p&gt;é‡åˆ°ä¸€ä¸ªåˆçœ‹æ—¶éå¸¸è¯¡å¼‚çš„é—®é¢˜ï¼Œç°å·²è§£å†³ï¼Œç‰¹è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id="-æ˜¯ä»€ä¹ˆé—®é¢˜"&gt;ğŸ™‹â€â™€ï¸ æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/h2&gt;
&lt;h3 id="é”™è¯¯æ—¥å¿—"&gt;é”™è¯¯æ—¥å¿—&lt;/h3&gt;
&lt;p&gt;APPè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æŠ¥äº†ä¸€ä¸ªè«åå…¶å¦™çš„é”™è¯¯ï¼š &lt;code&gt;NoSuchMethodError&lt;/code&gt;, æŠ¥é”™çš„åœ°æ–¹æ˜¯ rxjava3 çš„ &lt;code&gt;Disposable.disposed()&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;E/AndroidRuntime: FATAL EXCEPTION: main
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Process: com.github.hanlyjiang.sample, PID: &lt;span style="color:#ae81ff"&gt;7357&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; java.lang.NoSuchMethodError: No static method disposed&lt;span style="color:#f92672"&gt;()&lt;/span&gt;Lio/reactivex/rxjava3/disposables/Disposable; in class Lio/reactivex/rxjava3/disposables/Disposable; or its super classes &lt;span style="color:#f92672"&gt;(&lt;/span&gt;declaration of &lt;span style="color:#e6db74"&gt;&amp;#39;io.reactivex.rxjava3.disposables.Disposable&amp;#39;&lt;/span&gt; appears in /data/app/~~veR3ZUFYzXjZ48FDcAW0Nw&lt;span style="color:#f92672"&gt;==&lt;/span&gt;/com.github.hanlyjiang.sample-bhuZG0wVNdVKs_mfxOh5gg&lt;span style="color:#f92672"&gt;==&lt;/span&gt;/base.apk&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.github.hanlyjiang.lib_mod.ViewTest.disposable&lt;span style="color:#f92672"&gt;(&lt;/span&gt;ViewTest.java:8&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.github.hanlyjiang.sample.MainActivity.lambda$onCreate$0&lt;span style="color:#f92672"&gt;(&lt;/span&gt;MainActivity.java:15&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.github.hanlyjiang.sample.MainActivity$$ExternalSyntheticLambda0.onClick&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Unknown Source:0&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View.performClick&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:7456&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.google.android.material.button.MaterialButton.performClick&lt;span style="color:#f92672"&gt;(&lt;/span&gt;MaterialButton.java:1119&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View.performClickInternal&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:7433&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View.access$3700&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:836&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.view.View$PerformClick.run&lt;span style="color:#f92672"&gt;(&lt;/span&gt;View.java:28832&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Handler.handleCallback&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Handler.java:938&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Handler.dispatchMessage&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Handler.java:99&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Looper.loopOnce&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Looper.java:201&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.os.Looper.loop&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Looper.java:288&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at android.app.ActivityThread.main&lt;span style="color:#f92672"&gt;(&lt;/span&gt;ActivityThread.java:7902&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at java.lang.reflect.Method.invoke&lt;span style="color:#f92672"&gt;(&lt;/span&gt;Native Method&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run&lt;span style="color:#f92672"&gt;(&lt;/span&gt;RuntimeInit.java:548&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; at com.android.internal.os.ZygoteInit.main&lt;span style="color:#f92672"&gt;(&lt;/span&gt;ZygoteInit.java:933&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;â° Tip&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>Dagger åœ¨Androidåº“(SDK)æ¨¡å—ä¸­çš„ä½¿ç”¨å®è·µ</title><link>https://anlyjiang.github.io/posts/dagger-zai-android-ku-sdkmo-kuai-zhong-de-shi-yong-shi-jian/</link><pubDate>Sun, 06 Mar 2022 15:11:54 +0000</pubDate><guid>https://anlyjiang.github.io/posts/dagger-zai-android-ku-sdkmo-kuai-zhong-de-shi-yong-shi-jian/</guid><description>&lt;p&gt;æœ¬æ–‡ä¸»è¦æè¿°å¦‚ä½•ä½¿ç”¨Daggerè§£å†³å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚ä½•åœ¨åº“ï¼ˆSDKï¼‰æ¨¡å—ä¸­ä½¿ç”¨Daggerä¾èµ–æ³¨å…¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;MVPä¸­çš„Daggerä¾èµ–æ³¨å…¥å¦‚ä½•å®ç°æ— æ„Ÿæ³¨å…¥ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ¬æ–‡ä¸ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨Daggerï¼Œåªä¸“æ³¨äºæè¿°å¦‚ä¸Šä¸¤ä¸ªé—®é¢˜çš„è§£å†³çš„å‰å› åæœåŠè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id="èƒŒæ™¯"&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;æ¥æ‰‹å¼€å‘ä¸€ä¸ªSDKï¼Œå¤§è‡´æƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯¥SDKå†…éƒ¨æœ‰è‹¥å¹²ç•Œé¢ï¼ŒåŒ…æ‹¬Activityï¼ŒFragmentç­‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨MVPæ¶æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€æ¸å‘ç°å†…éƒ¨ä¾èµ–æ··ä¹±ï¼Œåœ¨å¾—ç©ºåï¼Œé‚å¯¹å…¶ä¾èµ–éƒ¨åˆ†è¿›è¡Œé‡æ„æ”¹é€ ã€‚&lt;/p&gt;
&lt;h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨ä¾èµ–æ³¨å…¥è¿›è¡Œæ”¹é€ "&gt;ä¸ºä»€ä¹ˆä½¿ç”¨ä¾èµ–æ³¨å…¥è¿›è¡Œæ”¹é€ ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æ˜¯ä¾èµ–æ··ä¹±ï¼Œå•ä¾‹çš„æ»¥ç”¨å¯¼è‡´ä¾èµ–å…³ç³»ä¸æ˜æ˜¾ï¼Œæ— æ³•ç®¡ç†ï¼Œæ— æ³•æµ‹è¯•&lt;/p&gt;
&lt;p&gt;æŸäº›å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šç±»ä¸­éƒ½éœ€è¦ä½¿ç”¨ï¼Œå¦‚ Retrofit çš„è¯·æ±‚å¯¹è±¡ï¼Œä»£è¡¨ä¿¡æ¯çš„æ ‡è¯†å­—æ®µç­‰ï¼Œæ­¤æ—¶ä¸ºäº†é¿å…é€šè¿‡æ„é€ å‡½æ•°æˆ–è€…setteræ–¹æ³•æ¥ä¼ é€’ï¼Œå°±ç›´æ¥èµ·äº†ä¸ªå•ä¾‹ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»ä¼¼çš„æƒ…å†µï¼Œæœ€ç»ˆå¯¼è‡´å•ä¾‹æœ‰10å¤šä¸ªï¼Œè°ƒç”¨å•ä¾‹ getInstance çš„åœ°æ–¹æ›´æ˜¯æ•°ä¸èƒœæ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¯¼è‡´æˆ‘ä»¬è¦å¯¹å¯¹åº”çš„ä»£ç è¿›è¡Œå•å…ƒæµ‹è¯•åšmockæ“ä½œå¼‚å¸¸å›°éš¾ï¼Œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å› ä¸ºä¾èµ–å…³ç³»å¤ªä¸æ˜æ˜¾ï¼Œå‡ ä¹å¾—ä¸€è¡Œè¡Œæ‰¾æ‰èƒ½æ‰¾åˆ°ç±»æˆ–æ–¹æ³•åˆ°åº•ä¾èµ–äº†å“ªäº›å¯¹è±¡&lt;/li&gt;
&lt;li&gt;åŒæ—¶mockçš„è¿‡ç¨‹ä¹Ÿå˜å¾—éº»çƒ¦ï¼Œç”±äºæ²¡æœ‰ä½œä¸ºç±»æˆå‘˜ï¼Œæ‰€ä»¥æ— æ³•ç®€å•é€šè¿‡mockæ›¿æ¢ å¯¹åº”æˆå‘˜ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä¾èµ–æ³¨å…¥æ”¹é€ çš„é—®é¢˜ç‚¹"&gt;ä¾èµ–æ³¨å…¥æ”¹é€ çš„é—®é¢˜ç‚¹&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æœ‰å¦‚ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä¹‹æ‰€ä»¥æç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºGoogle é’ˆå¯¹Androidï¼Œåœ¨Daggerçš„åŸºç¡€ä¸Šé’ˆå¯¹æ€§çš„æ„å»ºäº†ä¸€ä¸ªHilt çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œèƒ½å¤Ÿå‡å°‘Androidä¸­ç›´æ¥ä½¿ç”¨Daggerçš„æ¨¡æ¿ä»£ç ã€‚ä½†æ˜¯Hiltçš„ä½¿ä¸­æœ‰è¦æ±‚ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰ä½¿ç”¨ Hilt çš„åº”ç”¨éƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªå¸¦æœ‰ &lt;code&gt;@HiltAndroidApp&lt;/code&gt; æ³¨é‡Šçš„ &lt;code&gt;Application&lt;/code&gt; ç±»ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š &lt;a href="https://developer.android.google.cn/training/dependency-injection/hilt-android"&gt;ä½¿ç”¨ Hilt å®ç°ä¾èµ–é¡¹æ³¨å…¥ | Android å¼€å‘è€… | Android Developers (google.cn)&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯å¿…é¡»èƒ½æ§åˆ¶ä½Applicationï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ä½œä¸ºä¸€ä¸ªSDKçš„æä¾›æ–¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ˜¯æ²¡æœ‰æœºä¼šä¿®æ”¹Applicationçš„ä»£ç çš„&lt;/li&gt;
&lt;li&gt;è€Œä¸”ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½è¦æ±‚ä½¿ç”¨æ–¹å»åšè¿™ç§é™åˆ¶ï¼›åŒæ—¶ï¼Œå¦‚æœä½¿ç”¨æ–¹æœ‰ä½¿ç”¨ Hilt å‘¢ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯å¦ä¼šå¯¹å…¶äº§ç”Ÿå½±å“ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ•…ï¼Œæˆ‘ä»¬åªèƒ½ç›´æ¥ä½¿ç”¨Daggerã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è€Œå¦å¤–ä¸€ä¸ªé—®é¢˜åœ¨äºMVPçš„æ¶æ„é™åˆ¶ï¼ŒP å±‚éœ€è¦æŒæœ‰Vå±‚çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯Pä¾èµ–Vï¼Œè€ŒVé€šå¸¸æ˜¯Activityæˆ–è€…Fragmentï¼Œè€ŒActivityåŠFragmentçš„åˆ›å»ºè¿‡ç¨‹ç”±Androidç³»ç»Ÿæ§åˆ¶ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Daggeræ—¶æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›æ¨¡æ¿ä»£ç ï¼ˆä¸‹æ–¹ä¼šè¯´æ˜ï¼‰ï¼Œå°† ActivityåŠFragmentå¯¹è±¡æ³¨å…¥åˆ° Dagger çš„ä¾èµ–å›¾è°±ä¸­ã€‚&lt;/p&gt;
&lt;h2 id="æ²¡æœ‰-application-çš„é—®é¢˜è§£å†³"&gt;æ²¡æœ‰ Application çš„é—®é¢˜è§£å†³&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬è¦è§£å†³çš„æ˜¯æ²¡æœ‰Applicationçš„é—®é¢˜ï¼Œé‚£ä¹ˆæ²¡æœ‰Applicationä¼šç»™æˆ‘ä»¬å¸¦æ¥å“ªäº›é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ— æ³•ä½¿ç”¨ Hilt&lt;/li&gt;
&lt;li&gt;æ— æ³•ç›´æ¥ä½¿ç”¨ dagger-android&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªé—®é¢˜å®é™…ä¸Šæ˜¯ç±»ä¼¼çš„ï¼ŒHiltåŠDagger-Androidéƒ½æ˜¯ç”¨äºè§£å†³ Android ç»„ä»¶ï¼ˆActivityï¼ŒFragmentï¼ŒServiceï¼ŒBroadcastReceiver ç­‰ï¼‰çš„ä¾èµ–æ³¨å…¥çš„ã€‚ä½†æ˜¯ä»–ä»¬éƒ½è¦æ±‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ Applicationã€‚&lt;/p&gt;</description></item><item><title>ä½¿ç”¨Kotlinç¼–å†™gradleè„šæœ¬</title><link>https://anlyjiang.github.io/posts/shi-yong-kotlin-bian-xie-gradle-jiao-ben/</link><pubDate>Thu, 24 Feb 2022 22:29:04 +0000</pubDate><guid>https://anlyjiang.github.io/posts/shi-yong-kotlin-bian-xie-gradle-jiao-ben/</guid><description>&lt;p&gt;å°†gradle è„šæœ¬ä» groovy è¿ç§»åˆ° kotlin dslã€‚&lt;/p&gt;
&lt;h2 id="æ¦‚è¿°"&gt;æ¦‚è¿°&lt;/h2&gt;
&lt;h3 id="ide-æ”¯æŒ"&gt;IDE æ”¯æŒ&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: right"&gt;&lt;/th&gt;
&lt;th style="text-align: center"&gt;Build import&lt;/th&gt;
&lt;th style="text-align: center"&gt;Syntax highlighting &lt;!-- raw HTML omitted --&gt;1&lt;!-- raw HTML omitted --&gt;&lt;/th&gt;
&lt;th style="text-align: center"&gt;Semantic editor &lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;IntelliJ IDEA&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;Android Studio&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;Eclipse IDE&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;âœ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;CLion&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;âœ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;Apache NetBeans&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;âœ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;Visual Studio Code (LSP)&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;âœ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: right"&gt;Visual Studio&lt;/td&gt;
&lt;td style="text-align: center"&gt;&lt;strong&gt;âœ“&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: center"&gt;âœ–&lt;/td&gt;
&lt;td style="text-align: center"&gt;âœ–&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;Gradle Kotlin DSL scripts ä¸­çš„Kotlinè¯­æ³•é«˜äº®&lt;/li&gt;
&lt;li&gt;Gradle Kotlin DSL scripts ä¸­æ”¯æŒä»£ç è¡¥å…¨ï¼Œå¯¼èˆªåˆ°æºç ï¼Œæ–‡æ¡£æŸ¥çœ‹ï¼Œé‡æ„ç­‰ç­‰ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="kotlin-dsl-è„šæœ¬å‘½å"&gt;Kotlin DSL è„šæœ¬å‘½å&lt;/h3&gt;
&lt;h4 id="å‘½å"&gt;å‘½å&lt;/h4&gt;
&lt;p&gt;Groovy DSL script æ–‡ä»¶ä½¿ç”¨ &lt;code&gt;.gradle&lt;/code&gt; æ‰©å±•æ–‡ä»¶å&lt;/p&gt;</description></item><item><title>CLionæ­å»ºArduinoå¼€å‘ç¯å¢ƒ</title><link>https://anlyjiang.github.io/posts/clion-da-jian-arduino-kai-fa-huan-jing/</link><pubDate>Thu, 02 Dec 2021 14:16:46 +0000</pubDate><guid>https://anlyjiang.github.io/posts/clion-da-jian-arduino-kai-fa-huan-jing/</guid><description>&lt;p&gt;è®°å½•ä¸‹ä½¿ç”¨Clioné…ç½®Arduinoå¼€å‘ç¯å¢ƒçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Arduino å¼€å‘çš„ç¯å¢ƒæœ‰ä¸‹é¢å‡ ç§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Arduino IDEï¼šç›®å‰æœ‰1.8.x å’Œ 2.0.0 Betaç‰ˆæœ¬ï¼›&lt;/li&gt;
&lt;li&gt;VSCode + PlatformIOï¼›&lt;/li&gt;
&lt;li&gt;CLion + PlatformIOï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç›®å‰å·²ç»è¯•è¿‡äº†å‰é¢ä¸¤ç§ï¼Œéƒ½æ„Ÿè§‰ä¸æ˜¯å¾ˆæ»¡æ„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Arduino IDEå¯¹ä»£ç è·³è½¬çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œ2.0æ”¯æŒï¼Œ1.8ä¸æ”¯æŒï¼Œ2.0çš„é€‰æ‹©Arduinoçš„å¼€å‘æ¿è¿˜æ­£å¸¸ï¼Œä½†æ˜¯é€‰æ‹©esp32çš„æ¿å­ä¸€ç›´æ˜¾ç¤ºçº¢è‰²çš„è­¦å‘Šï¼Œæ— æ³•è·³è½¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;VSCode åˆ™æ˜¯å®åœ¨ç”¨ä¸ä¹ æƒ¯ã€‚ï¼ˆä¸»è¦æ˜¯ä¸€ç›´ç”¨AndroidStudioï¼Œæ“ä½œç†Ÿç»œäº†ï¼Œä¸æ„¿æ„å­¦ğŸ˜«ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥å‡†å¤‡å°è¯•ä¸‹CLionã€‚æµ‹è¯•ä¹‹åï¼Œæ„Ÿè§‰åˆ°äº†ç†Ÿæ‚‰çš„å‘³é“ğŸ˜‹ã€‚&lt;/p&gt;
&lt;h2 id="ç¯å¢ƒè¯´æ˜"&gt;ç¯å¢ƒè¯´æ˜&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;macOS 12.0.1&lt;/li&gt;
&lt;li&gt;CLion 2021.2.3&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å®‰è£…-platformio"&gt;å®‰è£… PlatformIO&lt;/h2&gt;
&lt;h3 id="å®‰è£…clionæ’ä»¶"&gt;å®‰è£…CLionæ’ä»¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…æ’ä»¶ï¼Œå®‰è£…å®Œæˆä¹‹åï¼Œé‡å¯ä¸‹CLionã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;é‡å¯å®Œæˆä¹‹åï¼Œæ–°å»ºé¡¹ç›®æ—¶é€‰æ‹©ä¼šå‘ç°æç¤ºéœ€è¦å®‰è£…PlatformIO Core CLI&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id="å®‰è£…platform-core-cli"&gt;å®‰è£…Platform Core CLI&lt;/h3&gt;
&lt;p&gt;macOSä¸Šç›´æ¥ä½¿ç”¨ brew å®‰è£…å³å¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install platformio
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æµ‹è¯•ä¸€ä¸‹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pio home
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ‰“å¼€ä¸€ä¸ªç½‘é¡µ http://127.0.0.1:8008&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- raw HTML omitted --&gt;
&lt;h2 id="è¿è¡Œç¤ºä¾‹"&gt;è¿è¡Œç¤ºä¾‹&lt;/h2&gt;
&lt;h3 id="æ–°å»ºé¡¹ç›®"&gt;æ–°å»ºé¡¹ç›®&lt;/h3&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆæ¬¡åˆå§‹åŒ–çš„æŸç§æ¿å­çš„æ—¶å€™éœ€è¦ä¸‹è½½ä¸€äº›å·¥å…·é“¾ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå¤±è´¥ï¼Œä¿è¯ç½‘ç»œè‰¯å¥½çš„æƒ…å†µä¸‹å¤šè¯•å‡ æ¬¡-é€‰ä¸­ &lt;code&gt;platformio.ini&lt;/code&gt; æ–‡ä»¶å³é”®ï¼Œç„¶åé€‰æ‹© &lt;code&gt;PlatformIO&lt;/code&gt;-&lt;code&gt;Re-Init&lt;/code&gt;ã€‚&lt;/p&gt;</description></item><item><title>é¸¿è’™å¼€å‘åŸºç¡€çŸ¥è¯†</title><link>https://anlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/</link><pubDate>Tue, 30 Nov 2021 10:13:11 +0000</pubDate><guid>https://anlyjiang.github.io/posts/hong-meng-kai-fa-ru-men/</guid><description>&lt;p&gt;åŸºäºå®˜æ–¹æ–‡æ¡£æ•´ç†çš„é¸¿è’™å¼€å‘çš„åŸºç¡€çŸ¥è¯†&lt;/p&gt;
&lt;h1 id="abilityæ¡†æ¶"&gt;Abilityæ¡†æ¶&lt;/h1&gt;
&lt;h2 id="ç®€ä»‹"&gt;ç®€ä»‹&lt;/h2&gt;
&lt;h3 id="æ•´ä½“å†…å®¹"&gt;æ•´ä½“å†…å®¹&lt;/h3&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;åŒ&lt;code&gt;Android&lt;/code&gt; å¯¹æ¯”å…³ç³»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;FeatureAbility&lt;/code&gt; - &lt;code&gt;Activity&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ServiceAbility&lt;/code&gt; - &lt;code&gt;Service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DataAbility&lt;/code&gt; - &lt;code&gt;ContentProvider&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CES&lt;/code&gt; - å¹¿æ’­&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ANS&lt;/code&gt; - é€šçŸ¥&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹é€šä¿¡
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;InnerEvent&lt;/code&gt; - &lt;code&gt;Message&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EventHandler&lt;/code&gt; - &lt;code&gt;Handler&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EventRunner&lt;/code&gt; - &lt;code&gt;Looper&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;EventQueue&lt;/code&gt; - &lt;code&gt;MessageQueue&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="abilityè¯´æ˜"&gt;Abilityè¯´æ˜&lt;/h3&gt;
&lt;p&gt;åŒAndroid å•ç‹¬æä¾› Activityï¼ŒServiceï¼ŒContentProvider çš„åŸºç±»ä¸ä¸€æ ·ï¼Œé¸¿è’™è¿™ä¸‰ä¸ªç»„ä»¶å…¨éƒ½æ˜¯ç»§æ‰¿è‡ª Abilityï¼Œé‚£ä¹ˆå¦‚ä½•åŒºåˆ†ä¸€ä¸ªAbilityåˆ°åº•æ˜¯å“ªç§ç»„ä»¶å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç»§æ‰¿åå®ç°æ—¶é€‰æ‹©æ€§å®ç°å¯¹åº”ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ &lt;code&gt;config.json&lt;/code&gt; ä¸­å®šä¹‰abilityæ—¶ï¼Œéœ€è¦å£°æ˜å¯¹åº”çš„ç±»å‹ï¼ˆpage-FAï¼›service - ServiceAbilityï¼› data - DataAbilityï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;com.hanlyjiang.ohosdemo.MainJSAbility2&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;icon&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$media:icon&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;description&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$string:mainjsability2_description&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$string:entry_MainJSAbility2&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;page&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;launchType&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;standard&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;com.hanlyjiang.ohosdemo.ServiceAbility&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;icon&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$media:icon&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;description&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$string:serviceability_description&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;service&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;span style="color:#960050;background-color:#1e0010"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;com.hanlyjiang.ohosdemo.DataAbility&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;icon&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$media:icon&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;description&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;$string:dataability_description&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;data&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;uri&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;dataability://com.hanlyjiang.ohosdemo.DataAbility&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="fafeatureability"&gt;FAï¼ˆFeatureAbilityï¼‰&lt;/h2&gt;
&lt;h3 id="fa-ç”Ÿå‘½å‘¨æœŸ"&gt;FA ç”Ÿå‘½å‘¨æœŸ&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç”Ÿå‘½å‘¨æœŸå›è°ƒ&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;onStart&lt;/td&gt;
&lt;td&gt;é¦–æ¬¡åˆ›å»ºè§¦å‘ï¼Œä»…æ‰§è¡Œä¸€æ¬¡ éœ€è¦setMainRoute&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;onActive&lt;/td&gt;
&lt;td&gt;è¿›å…¥å‰å°å¯äº¤äº’çŠ¶æ€åè°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;onInactive&lt;/td&gt;
&lt;td&gt;Pageå¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;onBackground&lt;/td&gt;
&lt;td&gt;Pageä¸å†å¯è§ èµ„æºé‡Šæ”¾åŠè€—æ—¶ä¿å­˜æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;onForeground&lt;/td&gt;
&lt;td&gt;é‡æ–°å›åˆ°å‰å°ï¼ˆè·å¾—ç„¦ç‚¹ é‡æ–°ç”³è¯·èµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;onStop&lt;/td&gt;
&lt;td&gt;é”€æ¯é¡µé¢æ—¶è°ƒç”¨ é‡Šæ”¾ç³»ç»Ÿèµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åŒ&lt;code&gt;Android&lt;/code&gt;å¯¹æ¯”ï¼Œå…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;</description></item><item><title>Arduino LCDåº“å®‰è£…ä¸ä½¿ç”¨</title><link>https://anlyjiang.github.io/posts/arduino-lcd-ku-an-zhuang-yu-shi-yong/</link><pubDate>Tue, 30 Nov 2021 09:43:24 +0000</pubDate><guid>https://anlyjiang.github.io/posts/arduino-lcd-ku-an-zhuang-yu-shi-yong/</guid><description>&lt;p&gt;ä»githubä¸‹è½½ LiquidCrystal çš„åº“ï¼Œå®‰è£…åˆ°Arduino IDEï¼Œå¹¶ç‚¹äº®1602 LCDã€‚&lt;/p&gt;
&lt;p&gt;å‡†å¤‡ä½¿ç”¨Arduino UNOç‚¹äº®ä¸€ä¸ªLCD1602ï¼Œå‘ç°ArduinoIDEï¼ˆæˆ‘ç”¨çš„2.0Betaç‰ˆæœ¬ï¼‰ä¸­é»˜è®¤æ²¡æœ‰å®‰è£… LiquidCrystal çš„åº“ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;h2 id="å®‰è£…"&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;ç¬¬ä¸€ç§å®‰è£…æ–¹å¼æ˜¯ä»Arduino IDEçš„ Library Managerä¸­æœç´¢ğŸ”å¹¶å®‰è£…ã€‚å¦å¤–å°±æ˜¯æ‰‹åŠ¨å®‰è£…ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡å–æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è®¿é—®å…¶githubä»“åº“ï¼ˆhttps://github.com/arduino-libraries/LiquidCrystalï¼‰ï¼Œä¸‹è½½ä¸ºzipåŒ…ï¼Œä¸‹è½½å®Œæ¯•åå°±æ˜¯ &lt;code&gt;LiquidCrystal-master.zip&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰å¦‚ä¸‹è·¯å¾„æ‰¾åˆ°æ·»åŠ  ZIP åº“çš„èœå•&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‰æ‹©æˆ‘ä»¬çš„ &lt;code&gt;LiquidCrystal-master.zip&lt;/code&gt; æ–‡ä»¶ï¼Œå®‰è£…å®Œæ¯•åé‡å¯ä¸€ä¸‹ Arduino IDEã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‡æ–°æ‰“å¼€IDEï¼Œå³å¯çœ‹åˆ°ç¤ºä¾‹ä¸­å¤šäº†LiquidCrystal çš„ç¤ºä¾‹&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="è¿è¡Œç¤ºä¾‹"&gt;è¿è¡Œç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;å¼€ä¸€ä¸ª Blink çš„ç¤ºä¾‹ï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼æ¥çº¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="image-20211130094241742" loading="lazy" src="https://gitee.com/hanlyjiang/image-repo/raw/master/image/202111300942772.png"&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œä¹‹åæ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å¾…è¡¥å›¾ã€‚&lt;/em&gt; å¯å‚è€ƒï¼š &lt;a href="http://www.taichi-maker.com/homepage/reference-index/arduino-library-index/liquidcrystal-library/"&gt;http://www.taichi-maker.com/homepage/reference-index/arduino-library-index/liquidcrystal-library/&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Gradleå­¦ä¹ æŒ‡å—-å‰è¨€</title><link>https://anlyjiang.github.io/posts/gradle-xue-xi-zhi-nan-qian-yan/</link><pubDate>Thu, 07 Oct 2021 22:07:09 +0000</pubDate><guid>https://anlyjiang.github.io/posts/gradle-xue-xi-zhi-nan-qian-yan/</guid><description>&lt;p&gt;è¿™ä¸ªå¯¹äºå®‰å“å¼€å‘æ¥è¯´ï¼ŒGradleå¯ä»¥ä¸äº†è§£ï¼Œä½†æ˜¯åˆå¿…é¡»äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;è¯´ä¸éœ€è¦äº†è§£ï¼Œæ˜¯å› ä¸ºï¼š é€šè¿‡AndroidStudioå»ºç«‹å·¥ç¨‹çš„æ—¶å€™ï¼Œé»˜è®¤å°±åˆ›å»ºå¥½äº†Gradleçš„é¡¹ç›®ç»“æ„åŠå¯¹åº”çš„ä»»åŠ¡ï¼Œé€šè¿‡IDEæ¥æ·»åŠ æ¨¡å—çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨çš„æ·»åŠ Gradleçš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;è¯´éœ€è¦äº†è§£ï¼Œæ˜¯å› ä¸ºï¼šæœ‰æ—¶å€™ä¼šé‡åˆ°æ„å»ºé”™è¯¯ï¼Œè¿˜æœ‰æ—¶å€™éœ€è¦æ”¹ä¸€æ”¹æ„å»ºæµç¨‹çš„é»˜è®¤è¡Œä¸ºï¼Œå¦å¤–æœ‰äº›æ—¶å€™ï¼Œéœ€è¦è‡ªè¡Œæ‰©å±•ä¸€ä¸ªæ„å»ºä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Gradleå­¦ä¹ çš„ä¸€ä¸ªéš¾ç‚¹åœ¨äºï¼Œå…¶å­¦ä¹ èµ„æ–™éå¸¸é›¶æ•£ï¼Œå°‘æœ‰æˆä½“ç³»çš„å­¦ä¹ èµ„æ–™ã€‚å½“ç„¶ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯å¾ˆæˆä½“ç³»çš„ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰ä¸å¥½çš„åœ°æ–¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;çº¯è‹±æ–‡ï¼›&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬æ›´æ–°ä¹‹åï¼Œæ–‡æ¡£ç»“æ„æœ‰å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å®˜æ–¹æ–‡æ¡£å¯¹äºå®‰å“é¡¹ç›®çš„è¯´æ˜æ²¡æœ‰ï¼ˆå› ä¸ºandroidçš„æ’ä»¶æ˜¯googleè‡ªè¡Œæ‰©å±•çš„ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå‰æœŸgradleçš„è„šæœ¬éƒ½æ˜¯ä½¿ç”¨groovyæ¥ç¼–å†™ï¼Œæˆ‘ä»¬è¦å†™è„šæœ¬ï¼Œéœ€è¦å»å­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œè™½ç„¶è¿™ä¸ªè¯­è¨€å’Œjavaæ¯”è¾ƒæ¥è¿‘ï¼Œä½†æ˜¯ç”±äºæ²¡ä»€ä¹ˆå…¶ä»–ç”¨é€”ï¼ŒåŠ ä¸Šéœ€è¦ç¼–å†™gradleè„šæœ¬çš„åœºæ™¯ä¹Ÿä¸æ˜¯é‚£ä¹ˆå¸¸è§ï¼Œå°±ä¼šè®©è§‰å¾—æœ‰ç‚¹ä¸å€¼å¾—æŠ•å…¥ï¼Œè¿™ä¸¤ä¸ªå› ç´ ç»“åˆèµ·æ¥ï¼Œä¼šåŠé€€å¾ˆå¤šå®‰å“å¼€å‘äººå‘˜ã€‚ç°åœ¨ï¼Œgradleå¯ä»¥ä½¿ç”¨kotlinæ¥ç¼–å†™å…¶dslè„šæœ¬ï¼Œå­¦ä¹ æˆæœ¬ä¼šé™ä½å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;è§åˆ°å…¶wrapperçš„è®¾è®¡ä»¤æˆ‘å°è±¡æ·±åˆ»ï¼Œå¯¹æ¯”antåŠmavenéœ€è¦æ‰‹åŠ¨å»ä¸‹è½½ä¸€ä»½äºŒè¿›åˆ¶å‰¯æœ¬ï¼Œç„¶åé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œè€Œä½ è·å–åˆ°åˆ«äººçš„gradleé¡¹ç›®ä¹‹åï¼Œç›´æ¥ä½¿ç”¨wrapperè„šæœ¬ï¼Œå°±å¯ä»¥æ‰§è¡Œgradleä»»åŠ¡ï¼Œwrapperè„šæœ¬ä¼šè‡ªåŠ¨å¸®åŠ©ä½ å»è·å–ä¸€ä»½gradleçš„äºŒè¿›åˆ¶å‰¯æœ¬ï¼Œå°±å¥½åƒä½ ç›´æ¥æ‰§è¡Œgradleçš„äºŒè¿›åˆ¶å‘½ä»¤ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–gradleä¹Ÿæä¾›äº†æ–¹ä¾¿çš„æ‰©å±•æœºåˆ¶ï¼Œèƒ½å¯¹æ„å»ºæµç¨‹è¿›è¡Œå®šåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»å®‰å“å¼€å‘çš„è§†è§’ï¼Œå¯¹Gradleçš„ä½¿ç”¨åšä¸€ä¸ªæ•´ä½“çš„ä»‹ç»ã€‚å†…å®¹ä¸Šä¼šåŒ…æ‹¬Gradleçš„ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸€äº›å¸¸è§çš„Gradleä»»åŠ¡ä»‹ç»ï¼ŒAndroidçš„å¸¸è§Gradleé…ç½®ä»‹ç»ï¼ŒåŒæ—¶ä¹Ÿä¼šä»‹ç»è‡ªå®šä¹‰Gradleä»»åŠ¡åŠGradleæ’ä»¶ã€‚&lt;/p&gt;</description></item><item><title>ç®€åŒ–Androidåº“ä¸Šä¼ åˆ°Mavenä»“åº“çš„gradleé…ç½®</title><link>https://anlyjiang.github.io/posts/jian-hua-android-ku-shang-chuan-dao-maven-cang-ku-de-gradle-pei-zhi/</link><pubDate>Tue, 01 Jun 2021 10:26:00 +0000</pubDate><guid>https://anlyjiang.github.io/posts/jian-hua-android-ku-shang-chuan-dao-maven-cang-ku-de-gradle-pei-zhi/</guid><description>&lt;p&gt;é…ç½® android ä¸Šä¼ åˆ° maven ä¸­å¿ƒä»“åº“ï¼Œå‘ç°é…ç½®çš„ä»£ç æœ‰ç‚¹å¤šï¼Œè€Œä¸”å¦‚æœæœ‰å¤šä¸ªåº“æ¨¡å—éœ€è¦ä¸Šä¼ ï¼Œåˆ™éœ€è¦å¤åˆ¶ç²˜è´´ä¸å°‘é‡å¤çš„é…ç½®ä»£ç ï¼Œäºæ˜¯ç¼–å†™äº†ä¸€ä¸ª gradle æ’ä»¶ç”¨äºç®€åŒ–æå–è¿™ä¸ªé…ç½®è¿‡ç¨‹ï¼›&lt;/p&gt;
&lt;h2 id="æ’ä»¶ç”¨é€”åŠæ•ˆæœ"&gt;æ’ä»¶ç”¨é€”åŠæ•ˆæœ&lt;/h2&gt;
&lt;p&gt;æœ¬æ’ä»¶ç”¨äºç®€åŒ–Androidåº“ä¸Šä¼ åˆ°Mavenä¸­å¿ƒä»“åº“çš„é…ç½®ï¼Œé¿å…æ¯ä¸ªprojectçš„gradleä¸­éƒ½æ”¾ç½®ä¸€ä»½é‡å¤è¾ƒå¤šçš„é…ç½®ï¼›&lt;/p&gt;
&lt;p&gt;æ’ä»¶æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç®€åŒ– maven-publish æ’ä»¶çš„é…ç½®æµç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;æ·»åŠ ä¸Šä¼ åˆ°Mavenä¸­å¿ƒä»“åº“çš„ publish ä»»åŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒé…ç½®ä¸Šä¼ æ—¶æ˜¯å¦åŒ…å« javadoc åŠæºç ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ç›´æ¥ä½¿ç”¨maven-publishæ’ä»¶çš„é…ç½®"&gt;ç›´æ¥ä½¿ç”¨maven-publishæ’ä»¶çš„é…ç½®ï¼š&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.publish.maven.MavenPom
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;plugins {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;com.android.library&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;signing&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;maven-publish&lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;android {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; defaultConfig {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; versionName(&lt;span style="color:#e6db74"&gt;&amp;#34;1.0.0-SNAPSHOT&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dependencies {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tasks.register(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;, Javadoc&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; group = &lt;span style="color:#e6db74"&gt;&amp;#34;publishing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; dependsOn(&lt;span style="color:#e6db74"&gt;&amp;#34;assemble&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; source = android.sourceSets[&lt;span style="color:#e6db74"&gt;&amp;#34;main&amp;#34;&lt;/span&gt;].java.getSourceFiles()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; classpath &lt;span style="color:#f92672"&gt;+=&lt;/span&gt; project.files(android.bootClasspath + &lt;span style="color:#a6e22e"&gt;File&lt;/span&gt;.pathSeparator)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;JavaVersion&lt;/span&gt;.current().isJava9Compatible) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (options &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; StandardJavadocDocletOptions).addBooleanOption(&lt;span style="color:#e6db74"&gt;&amp;#34;html5&amp;#34;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; android.libraryVariants.forEach { libraryVariant &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; classpath &lt;span style="color:#f92672"&gt;+=&lt;/span&gt; libraryVariant.javaCompileProvider.&lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;().classpath
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; options.apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; encoding(&lt;span style="color:#e6db74"&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; charset(&lt;span style="color:#e6db74"&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; isFailOnError = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#66d9ef"&gt;this&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; StandardJavadocDocletOptions).apply {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// addStringOption(&amp;#34;Xdoclint:none&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; links&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;add(&lt;span style="color:#e6db74"&gt;&amp;#34;https://developer.android.google.cn/reference/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; links&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;add(&lt;span style="color:#e6db74"&gt;&amp;#34;http://docs.oracle.com/javase/8/docs/api/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tasks.register(&lt;span style="color:#e6db74"&gt;&amp;#34;jarSource&amp;#34;&lt;/span&gt;, Jar&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; group = &lt;span style="color:#e6db74"&gt;&amp;#34;publishing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; from(android.sourceSets[&lt;span style="color:#e6db74"&gt;&amp;#34;main&amp;#34;&lt;/span&gt;].java.srcDirs)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; archiveClassifier.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;sources&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tasks.register(&lt;span style="color:#e6db74"&gt;&amp;#34;jarJavadoc&amp;#34;&lt;/span&gt;, Jar&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; group = &lt;span style="color:#e6db74"&gt;&amp;#34;publishing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; dependsOn(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; javadoc: Javadoc = tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; Javadoc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; from(javadoc.destinationDir)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; archiveClassifier.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;javadoc&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getMyPom&lt;/span&gt;(): Action&amp;lt;&lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; MavenPom&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; Action&amp;lt;MavenPom&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Lib&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; description.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Library For HJ&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; licenses {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; license {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;The Apache License, Version 2.0&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;http://www.apache.org/licenses/LICENSE-2.0.txt&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developers {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developer {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Hanly Jiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; email.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang@outlook.com&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; scm {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:git://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developerConnection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:ssh://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; publishing {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; publications {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; create&amp;lt;MavenPublication&amp;gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;release&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; from(components.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;release&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; groupId = &lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; artifactId = &lt;span style="color:#e6db74"&gt;&amp;#34;android_common_utils&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; version = android.defaultConfig.versionName
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pom(getMyPom())
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ javadoc
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; artifact(tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jarJavadoc&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; Jar)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ source
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; artifact(tasks.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;jarSource&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; Jar)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; repositories {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; ossrhCredentials = Action&amp;lt;PasswordCredentials&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; username = properties[&lt;span style="color:#e6db74"&gt;&amp;#34;ossrhUsername&amp;#34;&lt;/span&gt;].toString()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; password = properties[&lt;span style="color:#e6db74"&gt;&amp;#34;ossrhPassword&amp;#34;&lt;/span&gt;].toString()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// sonarçš„ä»“åº“ï¼Œåœ°å€æ ¹æ®é¡¹ç›®çš„ç‰ˆæœ¬å·æ¥ç¡®å®šæ˜¯snapshotè¿˜æ˜¯æ­£å¼ä»“åº“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; maven {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name = &lt;span style="color:#e6db74"&gt;&amp;#34;Sonartype&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; releasesRepoUrl = uri(&lt;span style="color:#e6db74"&gt;&amp;#34;https://oss.sonatype.org/service/local/staging/deploy/maven2&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; snapshotsRepoUrl = uri(&lt;span style="color:#e6db74"&gt;&amp;#34;https://oss.sonatype.org/content/repositories/snapshots/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url = &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (android.defaultConfig.versionName.toString().endsWith(&lt;span style="color:#e6db74"&gt;&amp;#34;SNAPSHOT&amp;#34;&lt;/span&gt;)) snapshotsRepoUrl &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; releasesRepoUrl
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; credentials(ossrhCredentials)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// snapshotçš„åœ°å€ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// https://oss.sonatype.org/content/repositories/snapshots/com/github/hanlyjiang/android_common_utils/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// é¡¹ç›®æœ¬åœ°çš„ä»“åº“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; maven {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name = &lt;span style="color:#e6db74"&gt;&amp;#34;ProjectLocal&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; releasesRepoUrl = uri(layout.buildDirectory.dir(&lt;span style="color:#e6db74"&gt;&amp;#34;repos/releases&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; snapshotsRepoUrl = uri(layout.buildDirectory.dir(&lt;span style="color:#e6db74"&gt;&amp;#34;repos/snapshots&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url = &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (android.defaultConfig.versionName.toString().endsWith(&lt;span style="color:#e6db74"&gt;&amp;#34;SNAPSHOT&amp;#34;&lt;/span&gt;)) snapshotsRepoUrl &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; releasesRepoUrl
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; signing {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sign(publishing.publications.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;release&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä½¿ç”¨androidmavenpubpluginç®€åŒ–åçš„é…ç½®"&gt;ä½¿ç”¨AndroidMavenPubPluginç®€åŒ–åçš„é…ç½®ï¼š&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.publish.maven.MavenPom
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;plugins {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;com.android.library&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;signing&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;maven-publish&lt;span style="color:#960050;background-color:#1e0010"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¼•å…¥æˆ‘ä»¬æœ¬åœ°ä»“åº“ä¸­çš„gradleæ’ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; id(&lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang.android_maven_pub&amp;#34;&lt;/span&gt;) version (&lt;span style="color:#e6db74"&gt;&amp;#34;0.0.5&amp;#34;&lt;/span&gt;) apply (&lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;android {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; defaultConfig {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; versionName(&lt;span style="color:#e6db74"&gt;&amp;#34;1.0.1-SNAPSHOT&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dependencies {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apply(plugin = &lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang.android_maven_pub&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;configure&amp;lt;io.hanlyjiang.gradle.android.AndroidMavenPubPluginExtension&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; groupId.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;com.github.hanlyjiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; artifactId.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;android-common-utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; projectLocalRepoPath.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;local-maven-repo&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mavenPomAction.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(Action&amp;lt;MavenPom&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Lib&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; description.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Android Common Utils Library For HJ&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; properties.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mapOf(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;myProp&amp;#34;&lt;/span&gt; to &lt;span style="color:#e6db74"&gt;&amp;#34;value&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;prop.with.dots&amp;#34;&lt;/span&gt; to &lt;span style="color:#e6db74"&gt;&amp;#34;anotherValue&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; licenses {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; license {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;The Apache License, Version 2.0&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;http://www.apache.org/licenses/LICENSE-2.0.txt&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developers {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developer {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Hanly Jiang&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; email.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;hanlyjiang@outlook.com&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; scm {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; connection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:git://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; developerConnection.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;scm:git:ssh://github.com/hanlyjiang/lib_common_utils.git&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url.&lt;span style="color:#66d9ef"&gt;set&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/hanlyjiang/lib_common_utils&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä½¿ç”¨æ­¥éª¤"&gt;ä½¿ç”¨æ­¥éª¤&lt;/h2&gt;
&lt;h3 id="å¼•å…¥æ’ä»¶"&gt;å¼•å…¥æ’ä»¶&lt;/h3&gt;
&lt;p&gt;åœ¨éœ€è¦ä½¿ç”¨çš„æ¨¡å—çš„buildè„šæœ¬ä¸­ï¼Œå¼•å…¥æˆ‘ä»¬çš„æ’ä»¶ï¼ŒåŒæ—¶å¼•å…¥ &lt;code&gt;maven-publish&lt;/code&gt; æ’ä»¶å’Œ&lt;code&gt; signing&lt;/code&gt; æ’ä»¶ã€‚&lt;/p&gt;</description></item><item><title>GitlabæŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²-å®ä¾‹</title><link>https://anlyjiang.github.io/posts/gitlab-chi-xu-ji-cheng-yu-chi-xu-bu-shu-shi-li/</link><pubDate>Wed, 26 May 2021 16:12:17 +0000</pubDate><guid>https://anlyjiang.github.io/posts/gitlab-chi-xu-ji-cheng-yu-chi-xu-bu-shu-shi-li/</guid><description>&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•åŸºäºGitlabæ¥é…ç½®ä¸€ä¸ªæœåŠ¡é›†ç¾¤çš„è‡ªåŠ¨æ„å»ºä¸éƒ¨ç½²æ›´æ–°ï¼Œå…¶ä¸­æœåŠ¡çš„æ›´æ–°åŸºäºdockeræ¥å®Œæˆï¼Œæœ¬æ–‡ä¸»è¦å…³æ³¨å¦‚ä½•å®Œæˆéƒ¨ç½²æ“ä½œï¼ŒåŠå¦‚ä½•å®Œæˆgitlabä¸Šciçš„é…ç½®ï¼›åœ¨å®Œæˆå•ä¸€çš„æœåŠ¡è‡ªåŠ¨éƒ¨ç½²æ›´æ–°åï¼Œæˆ‘ä»¬é€šè¿‡gitlabçš„includeåŠtriggeræœºåˆ¶æ¥ç®€åŒ–ç»Ÿä¸€éƒ¨ç½²æµç¨‹ï¼›&lt;/p&gt;
&lt;h2 id="å‰è¨€"&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦å®ç°æœåŠ¡çš„è‡ªåŠ¨æ„å»ºåçš„è‡ªåŠ¨æ›´æ–°éƒ¨ç½²ï¼Œæ³¨æ„è¿™é‡Œæˆ‘ä»¬åªéœ€è¦èƒ½åšåˆ°æ›´æ–°éƒ¨ç½²çš„æœåŠ¡å³å¯ï¼ŒæœåŠ¡çš„åˆæ¬¡éƒ¨ç½²å±äºä½é¢‘æ“ä½œï¼Œä¸”å’ŒæœåŠ¡å™¨ç¯å¢ƒç›¸å…³ï¼Œéœ€è¦æ‰‹åŠ¨æ¥å®Œæˆï¼›æˆ‘ä»¬è¿™é‡Œå‡å®šæœºå™¨ä¸Šå·²ç»éƒ¨ç½²å¥½äº†æœåŠ¡ï¼›&lt;/p&gt;
&lt;h2 id="å•ä¸€é¡¹ç›®çš„è‡ªåŠ¨éƒ¨ç½²çš„ç¤ºä¾‹"&gt;å•ä¸€é¡¹ç›®çš„è‡ªåŠ¨éƒ¨ç½²çš„ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬é¦–å…ˆä»¥ä¸€ä¸ªspringbootçš„æœåŠ¡ä½œä¸ºç¤ºä¾‹ï¼Œå®ç°äº†æ•´ä¸ªè‡ªåŠ¨æ‰“åŒ…åŠéƒ¨ç½²æ›´æ–°çš„æµç¨‹ï¼›&lt;/p&gt;
&lt;h3 id="æ•ˆæœ"&gt;æ•ˆæœ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æäº¤ä¹‹åï¼Œè‡ªåŠ¨æ„å»ºjarï¼Œå¹¶æ‰“åŒ…dockeré•œåƒ&lt;/p&gt;
&lt;p&gt;&lt;img alt="202203192258673" loading="lazy" src="https://s2.loli.net/2022/05/26/15jIx7oVTpdN2qG.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ„å»ºå®Œæˆåï¼Œé€šè¿‡gitlabç•Œé¢ï¼Œå¯ä»¥è§¦å‘éƒ¨ç½²ï¼Œå®Œæˆåå¯ä»¥è®¿é—®å¯¹åº”çš„ç¯å¢ƒï¼ˆè¯¦è§ä¸‹æ–¹è¯´æ˜ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è§¦å‘éƒ¨ç½²æ­¥éª¤çš„æ–¹å¼"&gt;è§¦å‘éƒ¨ç½²æ­¥éª¤çš„æ–¹å¼&lt;/h3&gt;
&lt;p&gt;è§¦å‘éƒ¨ç½²æœ‰å¤šä¸ªå…¥å£ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æµæ°´çº¿åˆ—è¡¨å°¾éƒ¨çš„æ‰‹åŠ¨ä½œä¸šæŒ‰é’®&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210526101412" loading="lazy" src="https://s2.loli.net/2022/05/26/H4IPizrx1pOlMwG.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æµæ°´çº¿åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»å¯¹åº”çš„æ‰‹åŠ¨ä»»åŠ¡ï¼Œåœ¨å¼¹å‡ºæ¡†ä¸­ç‚¹å‡»è¿è¡Œ&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210526101519" loading="lazy" src="https://s2.loli.net/2022/05/26/TN472VCvmxjhHwe.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æµæ°´çº¿è¯¦æƒ…ä¸­ï¼Œç‚¹å‡»è§¦å‘éƒ¨ç½²&lt;/p&gt;
&lt;p&gt;&lt;img alt="202203192259870" loading="lazy" src="https://s2.loli.net/2022/05/26/TpsmiNOa5AWVf32.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹åº”æ‰‹åŠ¨ä½œä¸šçš„è¯¦æƒ…ä¸­ï¼Œç‚¹å‡»â€œè§¦å‘æ­¤æ‰‹åŠ¨æ“ä½œâ€&lt;/p&gt;
&lt;p&gt;&lt;img alt="202203192300715" loading="lazy" src="https://s2.loli.net/2022/05/26/GDTRWdy2iXAP1Le.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸šåˆ—è¡¨ä¸­å¯¹åº”çš„éƒ¨ç½²ä½œä¸šçš„å°¾éƒ¨&lt;/p&gt;
&lt;p&gt;&lt;img alt="202203192301127" loading="lazy" src="https://s2.loli.net/2022/05/26/574YeyxSfMqoaju.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="è®¿é—®éƒ¨ç½²ç¯å¢ƒçš„æ–¹å¼"&gt;è®¿é—®éƒ¨ç½²ç¯å¢ƒçš„æ–¹å¼&lt;/h3&gt;
&lt;p&gt;éƒ¨ç½²ä¹‹åï¼Œä¼šåœ¨gitlabä¸­ç”Ÿæˆä¸€ä¸ªç¯å¢ƒï¼Œåœ¨ç¯å¢ƒçš„ç›¸å…³ç•Œé¢å³å¯è®¿é—®å¯¹åº”çš„æœåŠ¡åœ°å€&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨é¡¹ç›®çš„â€œè¿ç»´-ç¯å¢ƒâ€å…¥å£å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„ç¯å¢ƒ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="20210526101758" loading="lazy" src="https://s2.loli.net/2022/05/26/z6jTAhZRkmXGFqe.png"&gt;&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;ç‚¹å‡»å¯¹åº”ç¯å¢ƒå°¾éƒ¨çš„é“¾æ¥å›¾æ ‡å³å¯è®¿é—®&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210526101901" loading="lazy" src="https://s2.loli.net/2022/05/26/NHU1YLsjnP8x3ib.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥åœ¨å¯¹åº”çš„ç¯å¢ƒè¯¦æƒ…é¡µé¢ï¼Œç‚¹å‡»â€œæŸ¥çœ‹éƒ¨ç½²â€ ï¼ˆæ³¨æ„åœ¨éƒ¨ç½²ä½œä¸šçš„è¯¦æƒ…ä¸­ä¹Ÿå¯ä»¥æ‰¾åˆ°å¯¹åº”ç¯å¢ƒçš„å…¥å£å“¦-è§¦å‘éƒ¨ç½²æ­¥éª¤çš„æ–¹å¼çš„ç¬¬å››ä¸­æ–¹å¼çš„é™„å›¾ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img loading="lazy" src="https://s2.loli.net/2022/05/26/NHU1YLsjnP8x3ib.png"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="å®ç°æ–¹å¼"&gt;å®ç°æ–¹å¼&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸‰ä¸ªä»»åŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ„å»ºjar&lt;/li&gt;
&lt;li&gt;æ„å»ºdockeré•œåƒ&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²æœåŠ¡ï¼ˆé€šè¿‡swarmï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä¸­æ„å»ºjarå’Œæ„å»ºdockeré•œåƒæ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œéƒ¨ç½²æ­¥éª¤åˆ™éœ€è¦æ‰‹åŠ¨é€šè¿‡gitlabç•Œé¢è¿›è¡Œè§¦å‘ï¼›&lt;/p&gt;
&lt;h4 id="gitlab-ciyml-é…ç½®"&gt;gitlab-ci.yml é…ç½®&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;variables&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# é…ç½®ä»“åº“ç¯å¢ƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;DOCKER_REGISTRY&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;zh-registry.colorless.com.cn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;DOCKER_NAMESPACE&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;colorless&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;DEPLOY_PATH&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;/Wksp/colorlessWork/colorless-deploy/deploy/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# é…ç½®é•œåƒæœåŠ¡å&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;SERVICE_NAME&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;graphql-token&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;stages&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;build&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;build_image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;deploy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¼•å…¥ä»£ç æ£€æŸ¥ä»»åŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#include:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# local: ci/gitlab-ci-sonar.yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;build:jar&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# éƒ¨åˆ†æ¨¡å—è‹¥ä¸ä½¿ç”¨1.8ç¼–è¯‘ä¼šæŠ¥é”™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;image&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;maven:3.6.3-jdk-8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;stage&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;build&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;mvn package&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;mkdir _archiver&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;cp target/*.jar _archiver/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;ls -lh _archiver/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;artifacts&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;dist-$CI_PROJECT_NAME-$CI_COMMIT_SHORT_SHA&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;paths&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;_archiver/*.jar&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# ç”Ÿæˆçš„å½’æ¡£åŒ…æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬åªä¿ç•™çŸ­æ—¶é—´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;expire_in&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;hours&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;tags&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;common-build&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;web&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;build:docker&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;stage&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;build_image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# ç™»å½•å…¬å¸çš„Harborï¼Œæ³¨æ„å¿…é¡»åœ¨ç¯å¢ƒå˜é‡é…ç½® HARBOR_PWD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;echo $HARBOR_PWD | docker login --username=$HARBOR_USER $DOCKER_REGISTRY --password-stdin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# å®šä¹‰é•œåƒTAG&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;IMAGE_NAME=$DOCKER_REGISTRY/$DOCKER_NAMESPACE/$SERVICE_NAME:$CI_COMMIT_SHORT_SHA&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;echo &amp;#34;Docker build options $DOCKER_OPTIONS, set DOCKER_OPTIONS to --no-cache force rebuild all stage&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;cp _archiver/*.jar docker/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# buildé•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;JAR_FILE=`ls docker/ | grep -E *.jar`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;echo $JAR_FILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;docker build $DOCKER_OPTIONS --build-arg JAR_FILE=$JAR_FILE -t $IMAGE_NAME ./docker/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# æ¨é€é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;docker push $IMAGE_NAME&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;echo &amp;#34;é•œåƒæ„å»ºå®Œæˆï¼š$IMAGE_NAME&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;tags&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;docker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;web&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;deploy&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;stage&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;deploy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;echo $HARBOR_PWD | docker login --username=$HARBOR_USER $DOCKER_REGISTRY --password-stdin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;cd $DEPLOY_PATH&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;source deploy.sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;update_service $DOCKER_NAMESPACE $SERVICE_NAME $DOCKER_REGISTRY/$DOCKER_NAMESPACE/$SERVICE_NAME:$CI_COMMIT_SHORT_SHA&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;environment&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;test_env_deploy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;url&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;$APP_URL/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;when&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;manual&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;branches&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;web&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;tags&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;deploy_graphql&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ deploy ä»»åŠ¡ä¸­å®šä¹‰çš„ç¯å¢ƒé…ç½®ï¼š&lt;/p&gt;</description></item><item><title>Dockeræ•°æ®ç›®å½•(/var/lib/docker)è¿ç§»</title><link>https://anlyjiang.github.io/posts/docker%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E8%BF%81%E7%A7%BB/</link><pubDate>Wed, 21 Apr 2021 16:51:40 +0000</pubDate><guid>https://anlyjiang.github.io/posts/docker%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E8%BF%81%E7%A7%BB/</guid><description>&lt;p&gt;æœ¬æ–‡ä»‹ç»å¦‚ä½•å®‰å…¨çš„è¿ç§»Dockerçš„æ•°æ®ç›®å½•/var/lib/docker&lt;/p&gt;
&lt;h2 id="ä¸ºä»€ä¹ˆè¦è¿ç§»"&gt;ä¸ºä»€ä¹ˆè¦è¿ç§»&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;è™šæ‹Ÿæœºåˆ›å»ºæ—¶ï¼Œä¸€èˆ¬åˆ†é…ä¸€ä¸ªæ¯”è¾ƒå°çš„ç³»ç»Ÿç›˜ï¼Œç„¶åæŒ‚è½½ä¸€ä¸ªå¤§å®¹é‡çš„æ•°æ®ç›˜ï¼Œdockeré»˜è®¤æƒ…å†µä¸‹æ•°æ®å­˜å‚¨åœ¨ç³»ç»Ÿç›˜(/var/lib/docker)ç›®å½•ï¼Œæ—¶é—´ä¸€ä¹…ï¼Œä¼šå æ»¡ç³»ç»Ÿç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="è¿ç§»æ­¥éª¤"&gt;è¿ç§»æ­¥éª¤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¦–å…ˆéœ€è¦åœæ­¢dockeræœåŠ¡&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;systemctl stop docker
&lt;/code&gt;&lt;/pre&gt;&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;é€šè¿‡å‘½ä»¤df -h å…ˆå»çœ‹ä¸‹ç£ç›˜å¤§æ¦‚çš„æƒ…å†µï¼Œæ‰¾ä¸€ä¸ªå¤§çš„ç©ºé—´&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºdockerçš„æ–°ç›®å½•ï¼Œæˆ‘è¿™è¾¹æ‰¾äº†data, æ‰€ä»¥æˆ‘è¿™è¾¹çš„æ–°ç›®å½•åœ°å€æ˜¯ /data/docker/lib/&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
mkdir -p /data/docker/lib
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šå‚æ•°-p ç¡®ä¿ç›®å½•åç§°å­˜åœ¨ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨çš„å°±æ–°åˆ›å»ºä¸€ä¸ªã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start="4"&gt;
&lt;li&gt;&lt;strong&gt;å¼€å§‹è¿ç§»&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;rsync -avzP /var/lib/docker /data/docker/lib/
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;å…ˆç¡®è®¤æ˜¯å¦å®‰è£…äº†rsync.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‚æ•°è§£é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-aï¼Œå½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºé€’å½’ä¼ è¾“å¹¶ä¿æŒæ–‡ä»¶å±æ€§ã€‚&lt;/li&gt;
&lt;li&gt;-vï¼Œæ˜¾ç¤ºrsyncè¿‡ç¨‹ä¸­è¯¦ç»†ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨&amp;quot;-vvvv&amp;quot;è·å–æ›´è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;-Pï¼Œæ˜¾ç¤ºæ–‡ä»¶ä¼ è¾“çš„è¿›åº¦ä¿¡æ¯ã€‚(å®é™…ä¸Š&amp;quot;-P&amp;quot;=&amp;quot;&amp;ndash;partial &amp;ndash;progress&amp;quot;ï¼Œå…¶ä¸­çš„&amp;quot;&amp;ndash;progress&amp;quot;æ‰æ˜¯æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯çš„)ã€‚&lt;/li&gt;
&lt;li&gt;-z,Â  Â ä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©æé«˜æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="5"&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å®šæ–°çš„dockerç›®å½•&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim /lib/systemd/system/docker.service
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ExecStartåŠ å…¥:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Â --graph=/data/docker/lib/docker
&lt;/code&gt;&lt;/pre&gt;&lt;ol start="6"&gt;
&lt;li&gt;&lt;strong&gt;é‡å¯docker&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo systemctl daemon-reload
sudoÂ systemctl restart docker
sudoÂ systemctl enable docker # è¿è¡Œdockerè‡ªåŠ¨å¯åŠ¨ï¼Œè¿™é‡Œå¯ä»¥ä¸æ‰§è¡Œ
&lt;/code&gt;&lt;/pre&gt;&lt;ol start="7"&gt;
&lt;li&gt;&lt;strong&gt;å¯åŠ¨ä¹‹åç¡®è®¤docker æ²¡æœ‰é—®é¢˜ï¼Œç¡®è®¤ä¹‹å‰çš„å®¹å™¨å’Œé•œåƒéƒ½è¿˜åœ¨ï¼Œç„¶ååˆ é™¤æ—§çš„/var/lib/docker/ç›®å½•&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="å‚è€ƒæ–‡ç« "&gt;å‚è€ƒæ–‡ç« ï¼š&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/insist-forever/p/11739207.html?fileGuid=qQhpHWDVq8HrH9kj"&gt;https://www.cnblogs.com/insist-forever/p/11739207.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>IDEAä½¿ç”¨æŠ€å·§ä¹‹å¯¼èˆª</title><link>https://anlyjiang.github.io/posts/idea-shi-yong-ji-qiao-zhi-dao-hang/</link><pubDate>Wed, 21 Apr 2021 14:12:14 +0000</pubDate><guid>https://anlyjiang.github.io/posts/idea-shi-yong-ji-qiao-zhi-dao-hang/</guid><description>&lt;p&gt;ä»‹ç»IDEAåŠAndroidStudioä¸­çš„å¯¼èˆªæŠ€å·§ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¯¼èˆªï¼Œä»£ç å…ƒç´ ï¼ˆç±»ï¼Œæ–¹æ³•ï¼‰å¯¼èˆªï¼Œæ–‡æœ¬å¯¼èˆªç­‰ï¼Œè¿˜æœ‰ä¹¦ç­¾ç­‰çš„ä½¿ç”¨æ–¹æ³•ï¼›æé«˜ç¼–å†™ä»£ç åŠé˜…è¯»ä»£ç çš„æ•ˆç‡ï¼›&lt;/p&gt;
&lt;h2 id="æ’å…¥ç¬¦å¯¼èˆª"&gt;æ’å…¥ç¬¦å¯¼èˆª&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åé€€ï¼š==âŒ˜[==&lt;/li&gt;
&lt;li&gt;å‰è¿›ï¼š==âŒ˜]==&lt;/li&gt;
&lt;li&gt;æœ€åç¼–è¾‘ç‚¹ï¼š ==â‡§âŒ˜âŒ«==&lt;/li&gt;
&lt;li&gt;å®šä½åˆ°å½“å‰çš„ç»“æŸæ‹¬å·ï¼š ==Ctrl+M== æˆ–è€… ==â†‘== , ==â†“==&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹å…‰æ ‡æ‰€åœ¨ä½ç½®æ‰€å±çš„å…ƒç´ ï¼š==âŒƒâ‡§Q== ï¼ˆæ³¨æ„çœ‹ä¸‹å›¾çš„å·¦ä¸Šè§’æ˜¾ç¤ºäº†å½“å‰çš„ç±»ï¼‰
&lt;ul&gt;
&lt;li&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨åˆ°å½“å‰å¼€å§‹æ‹¬å·å¯¹åº”çš„é—­åˆæ‹¬å·ï¼š ==Ctrl + M==&lt;/li&gt;
&lt;li&gt;åœ¨ä»£ç å—ä¹‹é—´å¯¼èˆªï¼š ==âŒ¥â‡§âŒ˜[== ==âŒ¥â‡§âŒ˜]==&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ç§»åŠ¨æ’å…¥ç¬¦"&gt;ç§»åŠ¨æ’å…¥ç¬¦&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæˆ–è€…ä¸Šä¸€ä¸ªå•è¯ï¼š ==âŒ¥â†’==ï¼Œ==âŒ¥â†==&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç§»åŠ¨åˆ°ä¸‹ä¸ªæ®µè½ï¼šï¼ˆä¸‹ä¸ªæ–¹æ³•ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ ==Shift+Command+A== è°ƒå‡ºActionæœç´¢å¼¹æ¡†ï¼›&lt;/li&gt;
&lt;li&gt;æœç´¢ &lt;strong&gt;Move Caret Forward a Paragraph&lt;/strong&gt; æˆ– &lt;strong&gt;Move Caret Backward a Paragraph&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æŸ¥æ‰¾æœ€è¿‘çš„ä½ç½®"&gt;æŸ¥æ‰¾æœ€è¿‘çš„ä½ç½®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ ==â‡§âŒ˜E== å¯ä»¥æ‰“å¼€&lt;strong&gt;æœ€è¿‘ä½ç½®&lt;/strong&gt;çš„å¼¹çª—ï¼Œä½¿ç”¨ä¸Šä¸‹å¥è¿›è¡Œå¯¼èˆª&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æ‰“å¼€æ­¤å¼¹çª—æ—¶ï¼Œå†æ¬¡ä½¿ç”¨ ==â‡§âŒ˜E== å¯ä»¥é€‰ä¸­ &lt;strong&gt;Show Changed Only&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ç›´æ¥è¾“å…¥ä»¥æœç´¢ä»£ç ç‰‡æ®µ&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ é™¤è®°å½•ï¼š æŒ‰ ==Delete== æˆ–è€… ==âŒ«==&lt;/p&gt;</description></item><item><title>Android bindServiceæµç¨‹</title><link>https://anlyjiang.github.io/posts/androidbindservice-liu-cheng-fen-xi/</link><pubDate>Mon, 12 Apr 2021 10:18:50 +0000</pubDate><guid>https://anlyjiang.github.io/posts/androidbindservice-liu-cheng-fen-xi/</guid><description>&lt;p&gt;æœ¬æ–‡åˆ†æbindServiceçš„æµç¨‹ï¼Œé¦–å…ˆæˆ‘ä»¬é€šè¿‡é˜…è¯»æºç è·å–ä¸€ä¸ªä¸»çº¿çš„è°ƒç”¨åœ°å›¾ï¼Œç„¶åæå‡ºè‹¥å¹²é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼šAPPè¿›ç¨‹ä¸­å¦‚ä½•è·å–AMSï¼ŒAMSå¦‚ä½•å¯åŠ¨APP-serviceçš„è¿›ç¨‹ï¼ŒAMSä¸­å¦‚ä½•è·å–ApplicationThreadå¹¶ä¸ä¹‹é€šè®¯ï¼ŒServiceçš„å¯åŠ¨åŠç»‘å®šæµç¨‹ï¼›ç„¶åå†é€šè¿‡æºç ä¸€ä¸€è§£ç­”ã€‚æœ€åå†æ•´ä½“æ€»ç»“æ¢³ç†ä¸€ä¸‹æ•´ä½“æµç¨‹ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é¢„å…ˆçŸ¥è¯†ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Binderé€šä¿¡æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ•´ä½“åˆ†æä¸æ€»ç»“"&gt;æ•´ä½“åˆ†æä¸æ€»ç»“&lt;/h2&gt;
&lt;h3 id="ä¸»çº¿åœ°å›¾ä¸é—®é¢˜æå‡º"&gt;ä¸»çº¿åœ°å›¾ä¸é—®é¢˜æå‡º&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»bindServiceä¸€è·¯è·Ÿè¸ªï¼Œåˆæ­¥ç»˜åˆ¶äº†å¦‚ä¸‹çš„è°ƒç”¨åºåˆ—å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä¸‹é¢çš„å›¾ä½œä¸ºä¸€ä¸ªä¸»çº¿åœ°å›¾ï¼Œé¿å…èµ°å¤±ï¼Œç„¶åæ ¹æ®å…·ä½“é—®é¢˜è¿›è¡Œç»†èŠ‚åˆ†æã€‚&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æå‡ºå¦‚ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;bindServiceCommonåˆ°IActivityManagerçš„è°ƒç”¨ä¸­ï¼Œæ˜¯å¦‚ä½•è·å–åˆ°ActivityManagerServiceçš„ï¼Ÿ&lt;/li&gt;
&lt;li&gt;AMSä¸­å¦‚ä½•è·å–ApplicationThreadå¹¶ä¸ä¹‹é€šè®¯ï¼Ÿ
&lt;ul&gt;
&lt;li&gt;ApplicatoinThreadçš„ç”¨é€”ï¼ŸApplicationThreadè¿è¡Œçš„è¿›ç¨‹æ˜¯å“ªä¸ªï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹å¦‚ä½•å¯åŠ¨-å³AMSå¦‚ä½•åˆ›å»ºAPP:serverè¿›ç¨‹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Serviceå¦‚ä½•å¯åŠ¨ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Serviceå¦‚ä½•ç»‘å®šï¼Ÿ
&lt;ul&gt;
&lt;li&gt;ServiceConnection çš„å›è°ƒæ–¹æ³•ä½•æ—¶ä½¿ç”¨ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="é—®é¢˜è§£ç­”æ±‡æ€»"&gt;é—®é¢˜è§£ç­”æ±‡æ€»&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†ç›¸å…³é—®é¢˜çš„ç»“è®ºæå‰åˆ°æ­¤å°èŠ‚ï¼Œä¾¿äºåç»­ä»æ¯”è¾ƒæŠ½è±¡çš„å±‚æ¬¡ä¸Šæ¥è¿›è¡Œå¤ä¹ åŠé¢„è§ˆï¼›&lt;/p&gt;
&lt;h4 id="appè¿›ç¨‹å¦‚ä½•è·å–ams"&gt;APPè¿›ç¨‹å¦‚ä½•è·å–AMSï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;APPè¿›ç¨‹ä¸­é€šè¿‡ &lt;code&gt;ServiceManager.getService(Context.ACTIVITY_SERVICE)&lt;/code&gt; è·å–çš„ActivityManagerServiceçš„å®¢æˆ·ç«¯æ“ä½œä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯¥å¯¹è±¡ä½äºAPPè¿›ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡ï¼ˆé€šè¿‡Binderè¿›ç¨‹é—´é€šä¿¡ï¼‰æ¥è¦æ±‚ï¼ˆä½äºsystem_processä¸­ï¼‰çš„ActivityManagerServiceè¿›è¡Œå¯¹åº”çš„æœåŠ¡æ“ä½œï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="amså¦‚ä½•è·å–applicationthread"&gt;AMSå¦‚ä½•è·å–ApplicationThreadï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;APPè¿›ç¨‹åœ¨binderSericeæ—¶ï¼Œå°†è‡ªå·±è¿›ç¨‹ä¸­çš„ApplicationThreadå–å‡ºï¼Œé€šè¿‡Binderæœºåˆ¶ä¼ é€’ç»™AMSè¿›ç¨‹ï¼Œä¼ é€’è¿‡ç¨‹ä¸­ä¼šè½¬æ¢æˆä¸€ä¸ªProxyå¯¹è±¡ï¼›&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ActivityManager.&lt;span style="color:#a6e22e"&gt;getService&lt;/span&gt;().&lt;span style="color:#a6e22e"&gt;bindIsolatedService&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mMainThread.&lt;span style="color:#a6e22e"&gt;getApplicationThread&lt;/span&gt;(), getActivityToken(), service,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; service.&lt;span style="color:#a6e22e"&gt;resolveTypeIfNeeded&lt;/span&gt;(getContentResolver()),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sd, flags, instanceName, getOpPackageName(), user.&lt;span style="color:#a6e22e"&gt;getIdentifier&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æœåŠ¡å¦‚ä½•ç»‘å®šæœåŠ¡å¦‚ä½•å¯åŠ¨è¿›ç¨‹å¦‚ä½•å¯åŠ¨"&gt;æœåŠ¡å¦‚ä½•ç»‘å®šï¼ŸæœåŠ¡å¦‚ä½•å¯åŠ¨ï¼Ÿè¿›ç¨‹å¦‚ä½•å¯åŠ¨ï¼Ÿ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿›ç¨‹å¯åŠ¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œçš„æœåŠ¡éœ€è¦å…ˆå°†è¿›ç¨‹å¯åŠ¨ï¼Œè¿›ç¨‹çš„å¯åŠ¨æ˜¯é€šè¿‡APPè¿›ç¨‹ï¼Œè¯·æ±‚ç³»ç»Ÿè¿›ç¨‹ä¸­çš„AMSæ¥æ‰§è¡Œï¼Œé€šè¿‡AMSçš„&lt;code&gt;startProcessLocked&lt;/code&gt;æ–¹æ³•å¯åŠ¨è¿›ç¨‹ï¼Œæœ€ç»ˆä¼šé€šè¿‡socketæ¥å£è¯·æ±‚zygoteè¿›ç¨‹æ¥å¯åŠ¨è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¯åŠ¨æ—¶ä¼šæŒ‡å®šjavaçš„å…¥å£ç‚¹ä¸ºActivityThreadï¼Œå³è¿›ç¨‹å¯åŠ¨åä¼šè¿è¡ŒActivityThreadçš„mainæ–¹æ³•ï¼›&lt;/li&gt;
&lt;li&gt;AMSä¸­ä¼šè®°å½•å¯åŠ¨çš„è¿›ç¨‹è®°å½•ï¼ˆProcessRecordï¼‰ï¼Œå¯¹åº”çš„ProcessRecordä¸­ä¼šè®°å½•è¿›ç¨‹å¯¹åº”çš„ApplicationThreadï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å¯åŠ¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœåŠ¡çš„å¯åŠ¨éœ€è¦è¯·æ±‚AMSæ¥å®Œæˆ&lt;/li&gt;
&lt;li&gt;å¯åŠ¨æ—¶éœ€è¦å…ˆé€šè¿‡PIDè·å–è¦å¯åŠ¨åˆ°çš„ProcessRecordï¼Œé€šè¿‡ProcessRecordä¸­è®°å½•çš„ApplicationThreadæ¥ä¸å¯¹åº”çš„è¿›ç¨‹é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;AMSé€šè¿‡ApplicationThreadæ¥é€šçŸ¥å¯¹åº”çš„è¿›ç¨‹åˆ›å»ºæœåŠ¡ï¼ŒApplicationThreadä½œä¸ºé€šä¿¡çš„æ¥å£ï¼Œå®é™…ä¸Šæœ€ç»ˆä¼šé€šè¿‡ActivityThreadçš„handleCreateServiceæ¥åˆ›å»ºæœåŠ¡çš„å®ä¾‹ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡åˆ›å»ºæ—¶ï¼Œæ˜¯åœ¨APPè¿›ç¨‹ï¼ˆå¯èƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼‰ä¸­è¿›è¡Œçš„ï¼Œéœ€è¦é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½å¯¹åº”çš„Serviceçš„ç±»ï¼ŒåŒæ—¶æ„é€ ç›¸åº”çš„ä¸Šä¸‹æ–‡åŠèµ„æºå¯¹è±¡ç­‰ï¼Œç„¶åæ„é€ å¯¹åº”çš„å®ä¾‹ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡åˆ›å»ºæˆåŠŸåï¼Œä¼šè®°å½•åˆ°ActivityThreadçš„ä¸€ä¸ªServiceåˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿åç»­ç®¡ç†ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡ç»‘å®š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç»‘å®šå…ˆåœ¨APPè¿›ç¨‹ä¸­ï¼Œé€šè¿‡AMSä»£ç†å¯¹è±¡å‘èµ·è¯·æ±‚ï¼Œç”±AMSæ¥å®‰æ’bindï¼ˆ&lt;strong&gt;ActivityManagerService.bindIsolatedService&lt;/strong&gt;ï¼‰;&lt;/li&gt;
&lt;li&gt;ç„¶åå…·ä½“çš„ç»‘å®šåŠ¨ä½œè¿˜æ˜¯é€šè¿‡IApplicationThreadå®‰æ’åˆ°APPçš„Serviceè¿›ç¨‹ä¸­ï¼Œæœ€ç»ˆæ‰§è¡Œçš„&lt;code&gt;ActivityThread#handleBindService&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;åœ¨APPè¿›ç¨‹ä¸­ï¼Œä¼šå°†Serviceå–å‡ºï¼Œç„¶åè°ƒç”¨å…¶onBindæ–¹æ³•æ¥è·å–IBinderè¿œç¨‹æ“ä½œå¯¹è±¡ï¼›&lt;/li&gt;
&lt;li&gt;ä¹‹åå†é€šè¿‡AMSè°ƒç”¨ &lt;code&gt;ActivityManagerService#publishService&lt;/code&gt; æ¥é€šçŸ¥ç»‘å®šæˆåŠŸçš„é€šçŸ¥åˆ°å¯¹åº”çš„éœ€è¦ç»‘å®šæœåŠ¡çš„APPè¿›ç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;publishServiceä¸­ä¼šè°ƒç”¨ServiceConnectionçš„onServiceConnectedæ–¹æ³•é€šçŸ¥æœåŠ¡è¿æ¥äº†ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ•´ä½“æµç¨‹æ€»ç»“"&gt;æ•´ä½“æµç¨‹æ€»ç»“&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾…è¡¥å……&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="è¯¦ç»†åˆ†æè§£ç­”é—®é¢˜"&gt;è¯¦ç»†åˆ†æè§£ç­”é—®é¢˜&lt;/h2&gt;
&lt;h3 id="appè¿›ç¨‹ä¸­å¦‚ä½•è·å–ams"&gt;APPè¿›ç¨‹ä¸­å¦‚ä½•è·å–AMSï¼Ÿ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å…ˆé€é¡¹æŸ¥çœ‹å„ä¸ªå°èŠ‚ï¼Œæœ€åå†çœ‹æ­¤å¤„çš„æ€»ç»“ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åç»­ç›´æ¥æŸ¥çœ‹æ€»ç»“æ¥å¿«é€Ÿè·å–ç»“è®ºï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;==æ€»ç»“ï¼š==&lt;/p&gt;</description></item><item><title>å·¥ä½œäº¤æ¥-Gitlabç›¸å…³</title><link>https://anlyjiang.github.io/posts/%E5%B7%A5%E4%BD%9C%E4%BA%A4%E6%8E%A5-gitlab%E7%9B%B8%E5%85%B3/</link><pubDate>Thu, 08 Apr 2021 16:48:23 +0000</pubDate><guid>https://anlyjiang.github.io/posts/%E5%B7%A5%E4%BD%9C%E4%BA%A4%E6%8E%A5-gitlab%E7%9B%B8%E5%85%B3/</guid><description>&lt;h1 id="gitlabæŒç»­é›†æˆæ•ˆç‡å·¥å…·"&gt;Gitlab&amp;amp;æŒç»­é›†æˆ&amp;amp;æ•ˆç‡å·¥å…·&lt;/h1&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph
Gitlab[Gitlab&amp;amp;æŒç»­é›†æˆ&amp;amp;æ•ˆç‡å·¥å…·]
Gitlab --&amp;gt; æœåŠ¡ç»´æŠ¤
Gitlab --&amp;gt; Gitlab&amp;amp;Sonarä½¿ç”¨é—®é¢˜è§£ç­”ä¸è§£å†³
Gitlab --&amp;gt; CI[åŸºäºGitlab CIçš„è‡ªåŠ¨åŒ–æµç¨‹]
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="æœåŠ¡ç»´æŠ¤"&gt;æœåŠ¡ç»´æŠ¤&lt;/h2&gt;
&lt;p&gt;ç›®å‰æœ‰3ä¸ªæœåŠ¡å™¨éœ€è¦ç»´æŠ¤ï¼Œä¸Šé¢æœ‰éƒ¨ç½²è‹¥å¹²æœåŠ¡ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph
205[172.17.0.205]
206[172.17.0.206]
208[172.17.0.208]
205 --&amp;gt; gitlab
206 --&amp;gt; sonarqube
206 --&amp;gt; mattermost
208 --&amp;gt; yapi
208 --&amp;gt; confluence
208 --&amp;gt; gitlab-runner
208 --&amp;gt; ç§»åŠ¨ä¸­å¿ƒH5ç«™ç‚¹
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœåŠ¡çš„è¿æ¥æ–¹å¼åŠéƒ¨ç½²çš„æœåŠ¡å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼š &lt;a href="https://shimo.im/docs/REkKVZppmPcjFQqx/"&gt;ã€ŠGitlab-SonarQubeæœåŠ¡ä¿¡æ¯æ±‡æ€»ã€‹&lt;/a&gt;ï¼Œ è¯¥æ–‡æ¡£è®°å½•äº†æœåŠ¡å™¨çš„sshè¿œç¨‹çš„æ–¹å¼ï¼Œå„æœåŠ¡çš„éƒ¨ç½²å¯åŠ¨æ–¹å¼ï¼Œéƒ¨ç½²çš„ç›®å½•ï¼›&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ç®€è¦è¯´æ˜å„ä¸ªæœåŠ¡çš„ç»´æŠ¤æ–¹å¼åŠå¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id="gitlab205"&gt;gitlabï¼ˆ205ï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;éƒ¨ç½²ç›®å½•ï¼š &lt;code&gt;/data/gitlab/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;teambitionçš„thoughtsä¸Šè®°å½•äº†éƒ¨åˆ†ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¯ä»¥è®¿é—®&lt;a href="https://thoughts.teambition.com/workspaces/5e8da16aaf7af5001a4c7222/folders/5ee970c5b7ad5400012b51ac"&gt;tbçš„æ­¤æ–‡æ¡£ç›®å½•&lt;/a&gt; è¿›è¡ŒæŸ¥é˜…ï¼›&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å¼ºè°ƒä¸‹gitlabçš„é‡å¯å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œ&lt;strong&gt;ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ï¼Œåœ¨gitlabé‡å¯æ—¶ï¼Œå¦‚æœæœ‰gitlab-runnerä¸åœçš„å‘gitlabæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåˆ™æœ‰å¯èƒ½å¯¼è‡´gitlabæ— æ³•å¯åŠ¨ï¼Œæ•…æˆ‘ä»¬é‡‡å–gitlabå¯åŠ¨è¿‡ç¨‹ä¸­ä¸è¿æ¥ç½‘ç»œï¼Œå¯åŠ¨å®Œæˆåå†è¿æ¥ç½‘ç»œçš„æ–¹å¼å¯åŠ¨gitlab&lt;/strong&gt;è¯¦ç»†å¯å‚è€ƒ&lt;a href="https://thoughts.teambition.com/workspaces/5e8da16aaf7af5001a4c7222/docs/5f4c5eaf77f66f00010659ae"&gt;tbä¸Šçš„æ­¤æ–‡ç« &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id="sonarqube-206"&gt;sonarqube ï¼ˆ206ï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;éƒ¨ç½²ç›®å½•ï¼š&lt;code&gt;/data/_data/sonarqube&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€èˆ¬åªéœ€è¦å¯åŠ¨åŠé‡å¯ï¼Œå¯å‚è€ƒ &lt;a href="https://shimo.im/docs/REkKVZppmPcjFQqx/"&gt;ã€ŠGitlab-SonarQubeæœåŠ¡ä¿¡æ¯æ±‡æ€»ã€‹&lt;/a&gt; çš„ç›¸å…³å°èŠ‚ï¼Œä¸»è¦å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# éƒ¨ç½² &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker stack deploy -c docker-compose.yml sonarqube
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# åœæ­¢ &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker stack down sonarqube
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# é‡æ–°å¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker stack up sonarqube -c docker-compose.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="yapi208"&gt;yapiï¼ˆ208ï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;éƒ¨ç½²ç›®å½•ï¼š &lt;code&gt;/data/yapi-docker-deploy&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¯åŠ¨å‘½ä»¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker stack deploy -c docker-compose.yml yapi
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å…¶ä»–ç»´æŠ¤å‘½ä»¤åŸºäºyapiçš„stackæ‰§è¡Œå³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="mattermostç›¸å…³206"&gt;mattermostç›¸å…³ï¼ˆ206ï¼‰&lt;/h3&gt;
&lt;p&gt;mattermostç›¸å…³è¯·è”ç³»æ®µæ˜¥å…ˆ&lt;/p&gt;</description></item><item><title>ç§»åŠ¨ä¸­å¿ƒäº¤æ¥</title><link>https://anlyjiang.github.io/posts/%E7%A7%BB%E5%8A%A8%E4%B8%AD%E5%BF%83%E4%BA%A4%E6%8E%A5/</link><pubDate>Thu, 08 Apr 2021 16:46:15 +0000</pubDate><guid>https://anlyjiang.github.io/posts/%E7%A7%BB%E5%8A%A8%E4%B8%AD%E5%BF%83%E4%BA%A4%E6%8E%A5/</guid><description>&lt;h1 id="geopanel-ç§»åŠ¨ä¸­å¿ƒ-ä»£ç åŒæ­¥"&gt;GeoPanel-ç§»åŠ¨ä¸­å¿ƒ-ä»£ç åŒæ­¥&lt;/h1&gt;
&lt;h2 id="ä¸€èˆ¬æ­¥éª¤"&gt;ä¸€èˆ¬æ­¥éª¤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;å…‹éš†gitlabä»£ç åˆ°æœ¬åœ°&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;æ·»åŠ githubè¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ä»“åº“ï¼ˆä¸‹é¢å–åä¸ºgithubï¼‰&lt;/p&gt;
&lt;p&gt;å¯ä½¿ç”¨ &lt;code&gt;git remote -v show&lt;/code&gt; å‘½ä»¤ç¡®è®¤å½“å‰è¯´æ³¨å†Œçš„è¿œç¨‹ä»“åº“åˆ—è¡¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ol start="3"&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;fetch&lt;/code&gt; å‘½ä»¤è·å–githubè¿œç¨‹ä»“åº“ä»£ç åˆ°æœ¬åœ°&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;git fetch github&lt;/code&gt; è·å–githubè¿œç¨‹ä»“åº“ä¸Šçš„æ‰€æœ‰åˆ†æ”¯åŠtag&lt;/p&gt;
&lt;p&gt;å¦‚æˆ‘ä»¬éœ€è¦è·å–æŒ‡å®šåˆ†æ”¯ï¼ˆå¦‚ï¼šalphaåˆ†æ”¯ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ &lt;code&gt;git fetch github alpha:refs/remotes/github/alpha&lt;/code&gt; åªæ‹‰å–æŒ‡å®šåˆ†æ”¯ï¼›&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬éœ€è¦è·å–æŒ‡å®štagï¼ˆå¦‚ v1.3.3ï¼‰ï¼Œå¯é€šè¿‡ &lt;code&gt;git fetch github v1.3.3:refs/tagg/v1.3.3&lt;/code&gt; åªæ‹‰å–æŒ‡å®štagï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ol start="4"&gt;
&lt;li&gt;
&lt;p&gt;å°†ä¸Šä¸€æ­¥æ‹‰å–çš„githubè¿œç¨‹ä»“åº“ä¸Šçš„åˆ†æ”¯/tagæ¨é€åˆ°gitlabè¿œç¨‹ä»“åº“çš„æŒ‡å®šåˆ†æ”¯ï¼›&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¨é€åˆ†æ”¯åˆ°gitlabï¼š&lt;code&gt;git push origin refs/remotes/github/alpha:alpha&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ¨é€tagåˆ°githubï¼š&lt;code&gt;git push origin refs/tags/v1.3.3:v1.3.3&lt;/code&gt;&lt;/p&gt;</description></item><item><title>GeoPanelå®¹å™¨åŒ–</title><link>https://anlyjiang.github.io/posts/geopanel-rong-qi-hua/</link><pubDate>Thu, 08 Apr 2021 15:10:06 +0000</pubDate><guid>https://anlyjiang.github.io/posts/geopanel-rong-qi-hua/</guid><description>&lt;h1 id="geopanelå®¹å™¨åŒ–æ¦‚è§ˆ"&gt;GeoPanelå®¹å™¨åŒ–æ¦‚è§ˆ&lt;/h1&gt;
&lt;p&gt;æ­¤éƒ¨åˆ†ä¸»è¦å·¥ä½œæ˜¯å¯¹GeoPanelä¸­çš„å„æœåŠ¡è¿›è¡Œå®¹å™¨åŒ–æ”¹é€ ï¼Œå³åˆ¶ä½œdockeré•œåƒï¼Œç„¶åå¯¹æœåŠ¡è¿›è¡Œå®¹å™¨åŒ–ç¼–æ’ï¼Œç®€åŒ–éƒ¨ç½²æ­¥éª¤ï¼Œé€‚åº”æ›´åŠ æ™ºèƒ½åŒ–çš„éƒ¨ç½²éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph
GeoPanel[GeoPanelå®¹å™¨åŒ–]
GeoPanel --&amp;gt; pgspideræ‰“åŒ…
GeoPanel --&amp;gt; hasura-å—æ•°æ®APIå¼•æ“
GeoPanel --&amp;gt; å…¬å¸è‡ªç ”é•œåƒæ‰“åŒ…
GeoPanel --&amp;gt; æœåŠ¡ç¼–æ’
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;ç”±äºpgspiderå’Œhasuraçš„æ‰“åŒ…è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥éœ€è¦è¿™é‡Œå•ç‹¬åˆ—å‡ºï¼›&lt;/li&gt;
&lt;li&gt;å…¬å¸è‡ªç ”æœåŠ¡çš„é•œåƒæ‰“åŒ…ä¸»è¦æ˜¯springbootçš„é•œåƒæ‰“åŒ…ï¼Œæµç¨‹æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥åˆå¹¶èµ·æ¥è¯´ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç¼–æ’ä¸­æè¿°å½“å‰å·²ç»å®¹å™¨åŒ–çš„æœåŠ¡åŠä½¿ç”¨swarmç¼–æ’çš„æƒ…å†µï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="geopanelå®¹å™¨åŒ–-armé•œåƒæ„å»º-é€šç”¨æ­¥éª¤"&gt;GeoPanelå®¹å™¨åŒ–-ARMé•œåƒæ„å»º-é€šç”¨æ­¥éª¤&lt;/h1&gt;
&lt;p&gt;è¿™é‡Œçš„å›½äº§åŒ–ä¸»è¦æŒ‡ï¼šåˆ¶ä½œarmç‰ˆæœ¬çš„é•œåƒ&lt;/p&gt;
&lt;h2 id="å‰è¨€"&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç§»åŠ¨ä¸­å¿ƒæ‰€æœ‰æœåŠ¡å…¨éƒ¨åŸºäºdockerï¼Œæ•…æ­¤æ–‡æ¡£å®é™…å™è¿°çš„æ˜¯åŸºäºdockeréƒ¨ç½²çš„æœåŠ¡åœ¨armå¹³å°ä¸Šè¿ç§»çš„åŸºæœ¬è·¯å¾„ï¼›&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ARM ç‰ˆæœ¬Dockerå®‰è£…ï¼›&lt;/li&gt;
&lt;li&gt;æ„å»ºæ‰€æœ‰é•œåƒçš„ARMç‰ˆæœ¬ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="æµ‹è¯•æœºä¿¡æ¯"&gt;æµ‹è¯•æœºä¿¡æ¯&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;CPU&lt;/th&gt;
&lt;th style="text-align: left"&gt;FT-1500A 4æ ¸ arm64&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å†…å­˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;8G&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;OS&lt;/td&gt;
&lt;td style="text-align: left"&gt;éº’éºŸV10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;åŒ…ç®¡ç†å™¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;apt&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="armæœºå™¨ä¸Šå®‰è£…docker"&gt;ARMæœºå™¨ä¸Šå®‰è£…Docker&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://docs.docker.com/engine/install/?fileGuid=0l3NVKX0BgflYN3R"&gt;Dockerå®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Dockeræ”¯æŒå¦‚ä¸‹ç³»ç»ŸåŠæ¶æ„&lt;/p&gt;
&lt;p&gt;&lt;img alt="å›¾ç‰‡" loading="lazy" src="https://uploader.shimo.im/f/EgAMxl7X6CbHg4J9.png!thumbnail?fileGuid=0l3NVKX0BgflYN3R"&gt;&lt;/p&gt;
&lt;p&gt;å›½äº§ç³»ç»Ÿä¾æ®å®‰è£…åŒ…çš„æ ¼å¼é€‰æ‹©å¯¹åº”çš„å‚è€ƒç³»ç»Ÿå³å¯ï¼Œå¦‚éº’éºŸv10åŸºäºubuntuï¼Œå¯ä»¥æŒ‰&lt;a href="https://docs.docker.com/engine/install/ubuntu/?fileGuid=0l3NVKX0BgflYN3R"&gt;å®˜æ–¹æ–‡æ¡£- Install Docker Engine on Ubuntu&lt;/a&gt;è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;h3 id="æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"&gt;æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plain" data-lang="plain"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;geostar@geostar-ft1500a:~$ cat /proc/version
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Linux version 4.4.131-20200515.kylin.desktop-generic (YHKYLIN-OS@Kylin) (gcc version 5.5.0 20171010 (Ubuntu/Linaro 5.5.0-12ubuntu1~16.04) ) #kylin SMP Fri May 15 11:29:10 CST 2020
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿæ˜¯åŸºäºubuntu16.04 çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ ubuntu16.04ï¼ˆxenialï¼‰çš„è½¯ä»¶æº&lt;/p&gt;</description></item><item><title>æ­å»ºAndroidæºç å·¥ä½œç¯å¢ƒ</title><link>https://anlyjiang.github.io/posts/%E6%90%AD%E5%BB%BAandroid%E6%BA%90%E7%A0%81%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83/</link><pubDate>Thu, 08 Apr 2021 10:18:50 +0000</pubDate><guid>https://anlyjiang.github.io/posts/%E6%90%AD%E5%BB%BAandroid%E6%BA%90%E7%A0%81%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83/</guid><description>&lt;ul&gt;
&lt;li&gt;ç®€å•ä»‹ç»ç³»ç»Ÿæ¶æ„ã€ç¼–è¯‘ç¯å¢ƒçš„æ­å»º&lt;/li&gt;
&lt;li&gt;ç®€å•ä»‹ç»åˆ©ç”¨ AndroidStudio è°ƒè¯• system_process è¿›ç¨‹çš„æ–¹æ³•åŠç¼–è¯‘æ›´æ–°éƒ¨åˆ†ç³»ç»Ÿæ¨¡å—çš„æ–¹å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="androidç³»ç»Ÿæ¶æ„"&gt;Androidç³»ç»Ÿæ¶æ„&lt;/h2&gt;
&lt;p&gt;Android ç³»ç»Ÿæ¶æ„å¦‚ä¸‹ä¸¤å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210401092831" loading="lazy" src="https://s2.loli.net/2022/05/26/iVWSvDPlA9I4afd.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="20210401092925" loading="lazy" src="https://s2.loli.net/2022/05/26/3KYlCuj5zXc9EUs.png"&gt;&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨æ¡†æ¶&lt;/strong&gt;ã€‚åº”ç”¨æ¡†æ¶æœ€å¸¸è¢«åº”ç”¨å¼€å‘è€…ä½¿ç”¨ã€‚å¾ˆå¤šæ­¤ç±» API éƒ½å¯ä»¥ç›´æ¥æ˜ å°„åˆ°åº•å±‚ HAL æ¥å£ï¼Œå¹¶å¯æä¾›ä¸å®ç°é©±åŠ¨ç¨‹åºç›¸å…³çš„å®ç”¨ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Binder IPC&lt;/strong&gt;ã€‚Binder è¿›ç¨‹é—´é€šä¿¡ (IPC) æœºåˆ¶å…è®¸åº”ç”¨æ¡†æ¶è·¨è¶Šè¿›ç¨‹è¾¹ç•Œå¹¶è°ƒç”¨ Android ç³»ç»ŸæœåŠ¡ä»£ç ï¼Œè¿™ä½¿å¾—é«˜çº§æ¡†æ¶ API èƒ½ä¸ Android ç³»ç»ŸæœåŠ¡è¿›è¡Œäº¤äº’ã€‚åœ¨åº”ç”¨æ¡†æ¶çº§åˆ«ï¼Œå¼€å‘è€…æ— æ³•çœ‹åˆ°æ­¤ç±»é€šä¿¡çš„è¿‡ç¨‹ï¼Œä½†ä¸€åˆ‡ä¼¼ä¹éƒ½åœ¨â€œæŒ‰éƒ¨å°±ç­åœ°è¿è¡Œâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»ŸæœåŠ¡&lt;/strong&gt;ã€‚ç³»ç»ŸæœåŠ¡æ˜¯ä¸“æ³¨äºç‰¹å®šåŠŸèƒ½çš„æ¨¡å—åŒ–ç»„ä»¶ï¼Œä¾‹å¦‚çª—å£ç®¡ç†å™¨ã€æœç´¢æœåŠ¡æˆ–é€šçŸ¥ç®¡ç†å™¨ã€‚åº”ç”¨æ¡†æ¶ API æ‰€æä¾›çš„åŠŸèƒ½å¯ä¸ç³»ç»ŸæœåŠ¡é€šä¿¡ï¼Œä»¥è®¿é—®åº•å±‚ç¡¬ä»¶ã€‚Android åŒ…å«ä¸¤ç»„æœåŠ¡ï¼šâ€œç³»ç»Ÿâ€ï¼ˆè¯¸å¦‚çª—å£ç®¡ç†å™¨å’Œé€šçŸ¥ç®¡ç†å™¨ä¹‹ç±»çš„æœåŠ¡ï¼‰å’Œâ€œåª’ä½“â€ï¼ˆä¸æ’­æ”¾å’Œå½•åˆ¶åª’ä½“ç›¸å…³çš„æœåŠ¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)&lt;/strong&gt;ã€‚HAL å¯å®šä¹‰ä¸€ä¸ªæ ‡å‡†æ¥å£ä»¥ä¾›ç¡¬ä»¶ä¾›åº”å•†å®ç°ï¼Œè¿™å¯è®© Android å¿½ç•¥è¾ƒä½çº§åˆ«çš„é©±åŠ¨ç¨‹åºå®ç°ã€‚å€ŸåŠ© HALï¼Œç¡¬ä»¶å¼€å‘è€…å¯ä»¥é¡ºåˆ©å®ç°ç›¸å…³åŠŸèƒ½ï¼Œè€Œä¸ä¼šå½±å“æˆ–æ›´æ”¹æ›´é«˜çº§åˆ«çš„ç³»ç»Ÿã€‚HAL å®ç°ä¼šè¢«å°è£…æˆæ¨¡å—ï¼Œå¹¶ä¼šç”± Android ç³»ç»Ÿé€‚æ—¶åœ°åŠ è½½ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜…&lt;a href="https://source.android.google.cn/devices/architecture/hal?hl=zh-cn"&gt;ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linux å†…æ ¸&lt;/strong&gt;ã€‚å¼€å‘è®¾å¤‡é©±åŠ¨ç¨‹åºä¸å¼€å‘å…¸å‹çš„ Linux è®¾å¤‡é©±åŠ¨ç¨‹åºç±»ä¼¼ã€‚Android ä½¿ç”¨çš„ Linux å†…æ ¸ç‰ˆæœ¬åŒ…å«ä¸€äº›ç‰¹æ®Šçš„è¡¥å……åŠŸèƒ½ï¼Œä¾‹å¦‚ä½å†…å­˜ç»ˆæ­¢å®ˆæŠ¤è¿›ç¨‹ï¼ˆä¸€ä¸ªå†…å­˜ç®¡ç†ç³»ç»Ÿï¼Œå¯æ›´ä¸»åŠ¨åœ°ä¿ç•™å†…å­˜ï¼‰ã€å”¤é†’é”å®šï¼ˆä¸€ç§ &lt;a href="https://developer.android.google.cn/reference/android/os/PowerManager.html?hl=zh-cn"&gt;&lt;code&gt;PowerManager&lt;/code&gt;&lt;/a&gt; ç³»ç»ŸæœåŠ¡ï¼‰ã€Binder IPC é©±åŠ¨ç¨‹åºï¼Œä»¥åŠå¯¹ç§»åŠ¨åµŒå…¥å¼å¹³å°æ¥è¯´éå¸¸é‡è¦çš„å…¶ä»–åŠŸèƒ½ã€‚è¿™äº›è¡¥å……åŠŸèƒ½ä¸»è¦ç”¨äºå¢å¼ºç³»ç»ŸåŠŸèƒ½ï¼Œä¸ä¼šå½±å“é©±åŠ¨ç¨‹åºå¼€å‘ã€‚å¯ä»¥ä½¿ç”¨ä»»æ„ç‰ˆæœ¬çš„å†…æ ¸ï¼Œåªè¦å®ƒæ”¯æŒæ‰€éœ€åŠŸèƒ½ï¼ˆå¦‚ Binder é©±åŠ¨ç¨‹åºï¼‰å³å¯ã€‚ä¸è¿‡å»ºè®®ä½¿ç”¨ Android å†…æ ¸çš„æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜…&lt;a href="https://source.android.google.cn/setup/building-kernels?hl=zh-cn"&gt;æ„å»ºå†…æ ¸&lt;/a&gt;ä¸€æ–‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸Šéƒ¨åˆ†å†…å®¹æ¥æºï¼š &lt;a href="https://source.android.google.cn/devices/architecture?hl=zh-cn"&gt;https://source.android.google.cn/devices/architecture?hl=zh-cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="æ­å»ºå¼€å‘ç¯å¢ƒå¹¶ç¼–è¯‘æºç "&gt;æ­å»ºå¼€å‘ç¯å¢ƒå¹¶ç¼–è¯‘æºç &lt;/h2&gt;
&lt;p&gt;æœ¬èŠ‚å°†è®¨è®º Android 11 æºç ä¸‹è½½å’Œç¼–è¯‘çš„æ–¹æ³•ã€AndroidStudioå¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•ï¼ŒåŠ system_process è¿›ç¨‹çš„è°ƒè¯•æ–¹æ³•ç­‰ç›¸å…³çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;h3 id="é€‰æ‹©åˆ†æ”¯"&gt;é€‰æ‹©åˆ†æ”¯&lt;/h3&gt;
&lt;p&gt;å¯å‚è€ƒ source.android.google.cn çš„æ–‡æ¡£ &lt;a href="https://source.android.google.cn/setup/start/build-numbers"&gt;ä»£å·ã€æ ‡è®°å’Œ Build å·&lt;/a&gt; ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æœ€æ–°çš„ç‰ˆæœ¬åŠæ ‡è®°å¦‚ä¸‹ï¼š&lt;/p&gt;</description></item><item><title>Grideaä½¿ç”¨å°è®°</title><link>https://anlyjiang.github.io/posts/gridea%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%B0/</link><pubDate>Mon, 05 Apr 2021 11:58:07 +0000</pubDate><guid>https://anlyjiang.github.io/posts/gridea%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%B0/</guid><description>&lt;p&gt;ä»…è®°å½•ä½¿ç”¨Grideaè¿‡ç¨‹ä¸­è§£å†³çš„é—®é¢˜åŠè§£å†³æ–¹å¼&lt;/p&gt;
&lt;h2 id="ä¸‹è½½å®‰è£…å¹¶ä½¿ç”¨"&gt;ä¸‹è½½å®‰è£…å¹¶ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;è®¿é—®è¿™é‡Œï¼ˆhttps://gridea.dev/ï¼‰ä¸‹è½½å®‰è£…å¹¶ä½¿ç”¨ï¼Œä¸èµ˜è¿°ã€‚&lt;/p&gt;
&lt;h2 id="è¿œç¨‹åŒæ­¥githubé…ç½®"&gt;è¿œç¨‹åŒæ­¥githubé…ç½®&lt;/h2&gt;
&lt;p&gt;å…³äºå»ºç«‹ä»“åº“ï¼Œè·å–tokenï¼Œé…ç½®pagesèµ˜è¿°ï¼Œä»…è®°å½•é¢å¤–çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Grideaçš„å·¥ä½œç›®å½•çš„æ ¹ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª &lt;code&gt;.gitignore&lt;/code&gt; æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-txt" data-lang="txt"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;.DS_Store
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;*/.DS_Store
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# è‡ªå·±çš„æœ¬åœ°è‰ç¨¿
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;typora
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;è¿œç¨‹åŒæ­¥æ—¶ï¼Œä¼šå°†æ­¤æ–‡ä»¶æ”¾å…¥åˆ°outputç›®å½•ä¸‹ï¼Œç„¶åå°†outputç›®å½•æ¨é€åˆ°githubä¸Šï¼Œä¸ºäº†é¿å…å°†å…¶ä¸­çš„æŸäº›æ–‡ä»¶æ¨å…¥åˆ°è¿œç¨‹ä»“åº“ï¼Œæ•…å¯ä»¥é€šè¿‡æ­¤æ–¹å¼å®šä¹‰gitignore&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>[è¯‘]Androidå¼€å‘æ‰€éœ€è¦çš„çŸ©é˜µçŸ¥è¯†</title><link>https://anlyjiang.github.io/posts/android%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E7%9F%A9%E9%98%B5%E7%9F%A5%E8%AF%86/</link><pubDate>Mon, 08 Feb 2021 10:38:22 +0000</pubDate><guid>https://anlyjiang.github.io/posts/android%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E7%9F%A9%E9%98%B5%E7%9F%A5%E8%AF%86/</guid><description>&lt;p&gt;ç¿»è¯‘å›½å¤–æ–‡ç« ï¼Œè¯¥æ–‡ç« ä»‹ç»äº†Androidå¼€å‘ä¸­çŸ©é˜µç›¸å…³çš„æ•°å­¦çŸ¥è¯†ï¼ŒåŒ…æ‹¬çŸ©é˜µæ˜¯ä»€ä¹ˆï¼ŸçŸ©é˜µåŠ æ³•åŠä¹˜æ³•è¿ç®—ï¼Œ2x2çŸ©é˜µçš„å˜æ¢ï¼Œæœ€åæ¼”è¿›ä¸ºAndroidä¸­ä½¿ç”¨çš„3x3çŸ©é˜µã€‚æ–‡ä¸­å›¾ç‰‡åŠåŠ¨å›¾æ¯”è¾ƒå¤šï¼Œç›¸å¯¹å¥½æ‡‚ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttps://i-rant.arnaudbos.com/matrices-for-developers/#technical-challenge&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‡ å‘¨å‰ï¼Œæˆ‘åœ¨ä¸€ä¸ªandroid-user-groupé¢‘é“ä¸Šï¼Œæœ‰äººé—®ä¸€ä¸ªå…³äºAndroidçš„Matrix.postScaleï¼ˆsxï¼Œsyï¼Œpxï¼Œpyï¼‰æ–¹æ³•åŠå…¶å·¥ä½œåŸç†çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒâ€œéš¾ä»¥æŒæ¡â€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨2016å¹´åˆï¼Œæˆ‘åœ¨ä¸€ä¸ªAndroidåº”ç”¨ç¨‹åºä¸Šå®Œæˆäº†ä¸€ä¸ªè‡ªç”±é¡¹ç›®ï¼Œåœ¨å…¶ä¸­æˆ‘å¿…é¡»å®ç°ä¸€ä¸ªä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·åœ¨è´­ä¹°å¹¶ä¸‹è½½äº†å²©å£çš„æ•°å­—åœ°å½¢åï¼Œå¿…é¡»èƒ½å¤ŸæŸ¥çœ‹ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆçš„å²©å£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‚¬å´–çš„ç…§ç‰‡ï¼Œ&lt;/li&gt;
&lt;li&gt;åŒ…å«çˆ¬å¡è·¯çº¿å åŠ å±‚çš„SVGæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”¨æˆ·å¿…é¡»å…·æœ‰éšæ„å¹³ç§»å’Œç¼©æ”¾çš„èƒ½åŠ›ï¼Œå¹¶ä¸”å¿…é¡»å…·æœ‰â€œè·Ÿéšâ€å›¾ç‰‡çš„è·¯çº¿å±‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;APPæˆªå›¾1&lt;/th&gt;
&lt;th&gt;APPæˆªå›¾2&lt;/th&gt;
&lt;th&gt;APPæˆªå›¾3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;td&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;td&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="æŠ€æœ¯æŒ‘æˆ˜"&gt;æŠ€æœ¯æŒ‘æˆ˜&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†è®©æ”€çˆ¬è·¯çº¿çš„å›¾å±‚èƒ½å¤Ÿè·Ÿéšç”¨æˆ·çš„æ‰‹åŠ¿æ“ä½œï¼Œæˆ‘å‘ç°æˆ‘ä¸å¾—ä¸é‡è½½Android ImageViewï¼Œåœ¨Canvasä¸Šç»˜åˆ¶å¹¶å¤„ç†æ‰‹æŒ‡æ‰‹åŠ¿ã€‚ ä½œä¸ºä¸€åä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼šæˆ‘æœç´¢äº†Stack OverflowğŸ˜… æˆ‘å‘ç°éœ€è¦&lt;code&gt;android.graphics.Matrix&lt;/code&gt;ç±»è¿›è¡Œ2Dè½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç±»çš„é—®é¢˜åœ¨äºï¼Œä»æ–¹æ³•åç§°æ¥è¯´ï¼Œä½ èƒ½å¾ˆæ¸…æ¥šçš„äº†è§£å®ƒçš„ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ²¡æœ‰ä¸€å®šçš„æ•°å­¦èƒŒæ™¯çŸ¥è¯†ï¼Œä½ å¾ˆéš¾äº†è§£å®ƒèƒŒåæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæ¯”æ–¹è¯´ä¸‹é¢æ˜¯matrixçš„æŸä¸ªæ–¹æ³•çš„APIæ–‡æ¡£è¯´æ˜ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;boolean postScale (float sx, float sy, float px, float py)&lt;/p&gt;
&lt;p&gt;Postconcats the matrix with the specified scale. Mâ€™ = S(sx, sy, px, py) * M&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»æ–‡æ¡£çœ‹èµ·å®ƒå¯ä»¥é€šè¿‡æŸäº›å‚æ•°ç¼©æ”¾æŸäº›ä¸œè¥¿ï¼Œå¹¶é€šè¿‡æŸç§ä¹˜æ³•æ¥å®Œæˆå®ƒã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯æœ‰å¾ˆå¤šç–‘é—®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒåˆ°åº•æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ ç¼©æ”¾çŸ©é˜µï¼Ÿ é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæˆ‘æƒ³ç¼©æ”¾ç”»å¸ƒâ€¦&lt;/li&gt;
&lt;li&gt;æˆ‘åº”è¯¥ä½¿ç”¨preScaleè¿˜æ˜¯postScaleï¼Ÿ å½“æˆ‘ä»ä»æ‰‹åŠ¿æ£€æµ‹ä»£ç è·å–è¾“å…¥å‚æ•°ï¼Œç„¶åè¿›å…¥å°è¯•å’Œé”™è¯¯çš„æ— é™å¾ªç¯æ—¶ï¼Œæ˜¯å¦éœ€è¦å°è¯•åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å¼€å‘è¿‡ç¨‹çš„è¿™ä¸€åˆ»ï¼Œæˆ‘æ„è¯†åˆ°åœ¨å®Œæˆå¤§å­¦çš„å¤´ä¸¤å¹´åï¼Œæˆ‘éœ€è¦é‡æ–°å­¦ä¹ å¾ˆå¤šå¹´å‰å…³äºçŸ©é˜µçš„åŸºæœ¬æ•°å­¦æŠ€èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœå¯»ç½‘ç»œèµ„æ–™æ—¶ï¼Œæˆ‘å‘ç°äº†å¾ˆå¤šä¸é”™çš„èµ„æºï¼Œå¹¶ä¸”èƒ½å¤Ÿå†æ¬¡å­¦ä¹ ä¸€äº›æ•°å­¦çŸ¥è¯†ã€‚ é€šè¿‡å°†æˆ‘çš„ç†è§£åº”ç”¨åˆ°Javaå’ŒAndroidä¸­çš„ä»£ç ï¼Œå®ƒè¿˜å¸®åŠ©æˆ‘è§£å†³äº†2Dè½¬æ¢é—®é¢˜ã€‚ å› æ­¤ï¼Œè€ƒè™‘åˆ°æˆ‘åœ¨ä¸Šé¢æåˆ°çš„é¢‘é“ä¸Šè¿›è¡Œçš„è®¨è®ºï¼Œä¼¼ä¹æˆ‘ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨çŸ©é˜µä¸­è‹¦è‹¦æŒ£æ‰çš„äººï¼Œè¯•å›¾å¼„æ˜ç™½è¿™ä¸€ç‚¹ï¼Œå¹¶åœ¨Androidçš„Matrixç±»å’Œæ–¹æ³•ä¸­ä½¿ç”¨è¿™äº›æŠ€èƒ½ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘ä¼šå†™ä¸€ç¯‡æ–‡ç« ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å…³äºçŸ©é˜µçš„ï¼Œç¬¬äºŒéƒ¨åˆ†â€œ&lt;a href="https://i-rant.arnaudbos.com/2d-transformations-android-java/"&gt;ä½¿ç”¨Androidå’ŒJavaè¿›è¡Œ2Dè½¬æ¢&lt;/a&gt;â€æ˜¯å…³äºå¦‚ä½•åœ¨Javaå’ŒAndroidä¸Šå°†å…³äºçŸ©é˜µçš„çŸ¥è¯†åº”ç”¨åˆ°ä»£ç ä¸­ã€‚&lt;/p&gt;
&lt;h2 id="matrixæ˜¯ä»€ä¹ˆ"&gt;Matrixæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æˆ‘åœ¨å¯æ±—å­¦é™¢ï¼ˆKhan Academyï¼‰ä¸Šå‘ç°ä¸€é—¨&lt;a href="https://www.khanacademy.org/math/algebra-home/alg-matrices"&gt;å…³äºçŸ©é˜µçš„å¾ˆå¥½çš„ä»£æ•°è¯¾ç¨‹&lt;/a&gt;ã€‚&lt;/p&gt;</description></item><item><title>ç¼–å†™ä¸€ä¸ªAndroid Gradleæ’ä»¶</title><link>https://anlyjiang.github.io/posts/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAandroid-gradle%E6%8F%92%E4%BB%B6/</link><pubDate>Sun, 20 Sep 2020 10:18:50 +0000</pubDate><guid>https://anlyjiang.github.io/posts/%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAandroid-gradle%E6%8F%92%E4%BB%B6/</guid><description>&lt;p&gt;gradleæœ‰ä¸‰ç§ç¼–å†™æ’ä»¶çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨åœ¨é¡¹ç›®ä¸­çš„buildSrcæ¨¡å—ä¸­ç¼–å†™æ’ä»¶çš„æ–¹å¼ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªåº”ç”¨äºAndroidé¡¹ç›®çš„æ ¹æ®flavorè¿‡æ»¤soåº“çš„gradleæ’ä»¶ï¼›&lt;/p&gt;
&lt;h2 id="æ¦‚è¿°"&gt;æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;è‡ªå®šä¹‰gradleæ’ä»¶æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼ˆ&lt;a href="https://docs.gradle.org/current/userguide/custom_plugins.html#sec:packaging_a_plugin"&gt;ğŸ”—é“¾æ¥&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨buildscriptä¸­ç›´æ¥ç¼–å†™ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨buildSrcé¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ä»£ç ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨ç‹¬ç«‹çš„é¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ä»£ç ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨buildSrcæ–¹å¼å®ç°ä¸€ä¸ªgradleæ’ä»¶ã€‚&lt;/p&gt;
&lt;h2 id="æ–°å»º-buildsrc-module"&gt;æ–°å»º buildSrc module&lt;/h2&gt;
&lt;p&gt;gradleä¼šåœ¨é¡¹ç›®ä¸­å¯»æ‰¾åç§°ä¸ºbuildSrcæ¨¡å—ï¼Œå°†å…¶åŠ è½½ä¸ºgradleçš„æ’ä»¶ä»£ç ç›®å½•ã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥é€šè¿‡èœå•æ–°å»ºä¸€ä¸ªåä¸º buildSrc çš„java/kotlinæ¨¡å—ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨build.gradleä¸­æ·»åŠ ç›¸å…³çš„plugin(java-gradle-plugin)åŠä¾èµ–ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;plugins &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id &lt;span style="color:#e6db74"&gt;&amp;#39;java&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id &lt;span style="color:#e6db74"&gt;&amp;#39;java-gradle-plugin&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; id &lt;span style="color:#e6db74"&gt;&amp;#34;org.jetbrains.kotlin.jvm&amp;#34;&lt;/span&gt; version &lt;span style="color:#e6db74"&gt;&amp;#39;1.3.61&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;group &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;io.github.hanlyjiang.gradle&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;version &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;0.0.2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dependencies &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; testCompile group: &lt;span style="color:#e6db74"&gt;&amp;#39;junit&amp;#39;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; name: &lt;span style="color:#e6db74"&gt;&amp;#39;junit&amp;#39;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; version: &lt;span style="color:#e6db74"&gt;&amp;#39;4.12&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ androidç›¸å…³build toolsä¾èµ–ï¼Œä»¥ä¾¿ä½¿ç”¨ android gradle ç›¸å…³çš„API
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; compile &lt;span style="color:#e6db74"&gt;&amp;#39;com.android.tools.build:gradle:3.2.0&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¼–å†™æ’ä»¶"&gt;ç¼–å†™æ’ä»¶&lt;/h2&gt;
&lt;h3 id="éœ€æ±‚ç®€ä»‹"&gt;éœ€æ±‚ç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;**åº”ç”¨åœºæ™¯ï¼š**æˆ‘ä»¬çš„äº§å“ä¸­é›†æˆäº†ä¸¤ç§VPN SDKï¼Œä½†æ˜¯å…·ä½“åˆ°æ¯ä¸ªé¡¹ç›®ä¸Šé¢ï¼Œéƒ½åªä¼šè½åœ°åˆ°å…·ä½“çš„ä¸€ç§ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æ’é™¤å¯¹åº”çš„SDKçš„SOåº“ä»¥å‡å°APPåŒ…å¤§å°ï¼Œä¸åŒçš„åœ°åŒºçš„æ‰“åŒ…é…ç½®é€šè¿‡flavoræ¥è¿›è¡ŒåŒºåˆ†é…ç½®ï¼Œå³æ¯ä¸ªåœ°åŒºä¼šå¯¹åº”ä¸åŒçš„flavorï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éœ€æ±‚æå–&lt;/strong&gt;ï¼š è¿™é‡Œå®é™…ä¸Šæˆ‘ä»¬éœ€è¦çš„æ˜¯èƒ½å¤Ÿæ ¹æ®flavorï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ç§»é™¤æŒ‡å®šçš„soæ–‡ä»¶ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°æ€è·¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;flavoré…ç½®æ–¹å¼ï¼šåœ¨flavorä¸­é…ç½®ä¸€ä¸ªbuildConfigFieldå­—æ®µï¼Œç”¨äºæŒ‡å®šæˆ‘ä»¬çš„flavoréœ€è¦çš„é…ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// é…ç½®VPNç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;buildConfigField &lt;span style="color:#e6db74"&gt;&amp;#34;String&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;VPN_TYPE&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;\&amp;#34;$VpnType.SANG_FOR\&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ’ä»¶é…ç½®ï¼šæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªso_excludeé…ç½®æ¥æŒ‡å®šå…·ä½“çš„excludeè§„åˆ™ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;buildConfigFieldKey ç”¨äºæŒ‡å®šä¹‹å‰åœ¨flavorä¸­å®šä¹‰çš„é…ç½®ï¼›&lt;/li&gt;
&lt;li&gt;configMap ä¸ºä¸€ä¸ªé…ç½®è¡¨ï¼ŒæŒ‡å®šä¸Šé¢çš„å­—æ®µå¯å–çš„å€¼ï¼Œå³å¯¹åº”å€¼åº”è¯¥excludeçš„soæ–‡ä»¶åˆ—è¡¨ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;so_exclude &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ä½¿ç”¨VPN_TYPE æ¥è®¾ç½®soè¿‡æ»¤çš„è§„åˆ™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; buildConfigFieldKey &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;VPN_TYPE&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; configMap &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;(&lt;/span&gt;VpnType&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;H3C_iNode&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;name&lt;/span&gt;&lt;span style="color:#f92672"&gt;()):&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ–°åä¸‰è¿‡æ»¤æ·±ä¿¡æœçš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;(&lt;/span&gt;VpnType&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;SANG_FOR&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;name&lt;/span&gt;&lt;span style="color:#f92672"&gt;())&lt;/span&gt; &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·±ä¿¡æœè¿‡æ»¤æ–°åä¸‰çš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libies.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;(&lt;/span&gt;VpnType&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;NONE&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;name&lt;/span&gt;&lt;span style="color:#f92672"&gt;())&lt;/span&gt; &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// å¦‚é…ç½®æˆ NONEï¼Œåˆ™è¿‡æ»¤æ‰æ‰€æœ‰çš„VPNçš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#75715e"&gt;// æ·±ä¿¡æœçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// inodeçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;lib/armeabi-v7a/libies.so&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å®šä¹‰æ’ä»¶åŠä½¿ç”¨æ’ä»¶ç®€ä»‹"&gt;å®šä¹‰æ’ä»¶åŠä½¿ç”¨æ’ä»¶ç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ’ä»¶éœ€è¦ç»§æ‰¿ &lt;code&gt;org.gradle.api.Plugin&lt;/code&gt;ï¼Œå¯åœ¨Pluginå¯¹æ„å»ºæµç¨‹è¿›è¡Œè‡ªå®šä¹‰ï¼ˆå¦‚ï¼šåˆ›å»ºä»»åŠ¡ï¼Œå®šä¹‰ä»»åŠ¡å…³ç³»ï¼Œä¿®æ”¹å·²æœ‰ä»»åŠ¡åŠ¨ä½œç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;æ’ä»¶å¦‚æœéœ€è¦èƒ½å¤Ÿè¯»å–ä¸€äº›é…ç½®ï¼Œå¯é€šè¿‡ &lt;code&gt;project.extensions.create&lt;/code&gt; æ¥ä»build.gradleä¸­æå–&lt;/li&gt;
&lt;li&gt;å¦‚éœ€åœ¨è‡ªå·±çš„ androidä»£ç æ¨¡å—ä¸­ä½¿ç”¨æ’ä»¶ï¼Œé€šè¿‡ &lt;code&gt;apply plugin: æ’ä»¶ç±»å¼•ç”¨å³å¯&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ’ä»¶å®ç°"&gt;æ’ä»¶å®ç°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ’ä»¶çš„å®ç°å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;è¯»å– so_exclude é…ç½®ï¼Œå­˜å‚¨åˆ° extensionï¼ˆç±»å‹ä¸º FlavorSoExcludePluginExtension ï¼‰ä¸­&lt;/li&gt;
&lt;li&gt;è¯»å– android çš„é…ç½®ï¼Œæ‰¾åˆ° AppExtensionç±»å‹çš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨äº† &lt;code&gt;apply application&lt;/code&gt; çš„æ¨¡å—çš„é…ç½®ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­åªæœ‰ä¸€ä¸ªappæ¨¡å—åº”ç”¨æ­¤é…ç½®-å³æˆ‘ä»¬çš„apkæ¨¡å—ï¼›&lt;/li&gt;
&lt;li&gt;éå†æ‰€æœ‰å˜ä½“ï¼Œè·å–å¯¹åº”å˜ä½“çš„ so_exclude å¯¹åº”çš„é…ç½®å­—æ®µçš„å€¼ï¼Œå»ºç«‹flavoråˆ°é…ç½®å€¼çš„æ˜ å°„è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹ packageApplication ä»»åŠ¡ï¼Œè®©å…¶åœ¨æ‰§è¡Œä¹‹å‰å³åˆ é™¤å¾…æ‰“åŒ…ä¸´æ—¶ç›®å½•ä¸­çš„å¯¹åº”soæ–‡ä»¶ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-kotlin" data-lang="kotlin"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;package&lt;/span&gt; io.github.hanlyjiang.gradle.plugin.soexclude
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; com.android.build.gradle.AppExtension
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; com.android.build.gradle.api.ApkVariantOutput
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.Plugin
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.Project
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.logging.LogLevel
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.logging.Logger
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; org.gradle.api.logging.Logging
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;import&lt;/span&gt; java.io.File
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * so æ’ä»¶çš„ gradle é…ç½®å®ä½“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;open&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;FlavorSoExcludePluginExtension&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * so è¿‡æ»¤é…ç½®è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; configMap: Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt;? = &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * é…ç½®å­—æ®µçš„åç§°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; buildConfigFieldKey: String = &lt;span style="color:#a6e22e"&gt;FlavorSoExcludePlugin&lt;/span&gt;.DEFAULT_CONFIG_KEY
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * flavor so æ‰“åŒ…è¿‡æ»¤é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ## ç”¨æ³•è¯´æ˜ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * 1. åœ¨build.gradle ä¸­å¼•å…¥æ’ä»¶ &amp;lt;code&amp;gt;apply plugin: FlavorSoExcludePlugin&amp;lt;/code&amp;gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * 2. æ·»åŠ  so_exclude é…ç½®æ®µï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ```groovy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * so_exclude {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * buildConfigFieldKey = &amp;#34;VPN_TYPE&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * configMap = [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * (VpnType.H3C_iNode.name()): [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ],
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * (VpnType.SANG_FOR.name()) : [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libies.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ],
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * (VpnType.NONE.name()) : [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * // æ·±ä¿¡æœçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libauth_forward.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libhttps.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libpkcs12cert.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libsvpnservice.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * // inodeçš„so
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * &amp;#34;lib/armeabi-v7a/libies.so&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; *```
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * 3. åœ¨flavorçš„é…ç½®ä¸­æ·»åŠ  buildConfigField é…ç½®ï¼Œå¦‚ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ```
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * buildConfigField &amp;#34;String&amp;#34;, &amp;#34;VPN_TYPE&amp;#34;, &amp;#34;\&amp;#34;$VpnType.H3C_iNode\&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * ```
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * å…¶ä¸­å­—æ®µçš„åç§°ä¸º ä¹‹å‰ so_exclude ä¸­é…ç½®çš„ `buildConfigFieldKey` å­—æ®µï¼Œå¯¹åº”çš„å€¼ä¸º configMap ä¸­çš„ key ï¼Œå¦‚æ­¤é…ç½®åï¼Œæ‰“åŒ…æ—¶å°±ä¼šå°†configMapå¯¹åº”keyä¸­çš„soåˆ—è¡¨è¿‡æ»¤æ‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @author hanlyjiang 09/20/20 2:42 PM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * @version 1.0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;FlavorSoExcludePlugin&lt;/span&gt; : Plugin&amp;lt;Project&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;companion&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;object&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; PLUGIN_NAME = &lt;span style="color:#e6db74"&gt;&amp;#34;FlavorSoExcludePlugin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; DEFAULT_CONFIG_KEY = &lt;span style="color:#e6db74"&gt;&amp;#34;SO_EXCLUDE&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; DEBUG = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; logger: Logger = &lt;span style="color:#a6e22e"&gt;Logging&lt;/span&gt;.getLogger(FlavorSoExcludePlugin&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;logInfo&lt;/span&gt;(msg: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logger.log(&lt;span style="color:#a6e22e"&gt;LogLevel&lt;/span&gt;.LIFECYCLE, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;lt;- &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$PLUGIN&lt;/span&gt;&lt;span style="color:#e6db74"&gt;_NAME: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$msg&lt;/span&gt;&lt;span style="color:#e6db74"&gt; -&amp;gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;logDebug&lt;/span&gt;(msg: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (DEBUG) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(msg)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;lateinit&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; extension: FlavorSoExcludePluginExtension
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;override&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;apply&lt;/span&gt;(project: Project) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ·»åŠ è‡ªå·±çš„é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; extension = project.extensions.create(&lt;span style="color:#e6db74"&gt;&amp;#34;so_exclude&amp;#34;&lt;/span&gt;, FlavorSoExcludePluginExtension&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt;.java)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// åˆ›å»ºä¸€ä¸ªæ‰“å°é…ç½®çš„ä»»åŠ¡ï¼Œç”¨äºå®šä¹‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; task = project.tasks.create(&lt;span style="color:#e6db74"&gt;&amp;#34;printConfig&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; task.group = &lt;span style="color:#e6db74"&gt;&amp;#34;soExclude-plugin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; task.doLast {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;-- é…ç½®å­—æ®µï¼šbuildConfigFieldKey= &amp;#34;&lt;/span&gt; + extension.buildConfigFieldKey)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;-- å½“å‰é…ç½®ï¼š&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; extension.configMap&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;this&lt;/span&gt;.keys.forEach { key &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;-- config: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$key&lt;/span&gt;&lt;span style="color:#e6db74"&gt; -- &amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;(key)&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;forEach {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;values: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$it&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;------------------ &amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// è·å–androidçš„é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; androidExtensions = project.extensions.getByName(&lt;span style="color:#e6db74"&gt;&amp;#34;android&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt; + androidExtensions.javaClass)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (androidExtensions &lt;span style="color:#66d9ef"&gt;is&lt;/span&gt; AppExtension) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// applicatoinç±»å‹çš„å°±è¿›è¡Œä»»åŠ¡å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; initPackageOptions(project, androidExtensions)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; * vpn é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; configMap: MutableMap&amp;lt;String, String&amp;gt; = HashMap()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;initPackageOptions&lt;/span&gt;(project: Project, android: AppExtension) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; project.afterEvaluate {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; android.productFlavors.all {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; flavorName = &lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;.name
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logDebug(&lt;span style="color:#e6db74"&gt;&amp;#34;--productFlavors : &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${it.name}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; soExcludeConfig = &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;.buildConfigFields[extension.buildConfigFieldKey]&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; soExcludeConfig = &lt;span style="color:#66d9ef"&gt;value&lt;/span&gt;.replace(&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\&amp;#34;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logDebug(&lt;span style="color:#e6db74"&gt;&amp;#34;--productFlavors : &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$flavorName&lt;/span&gt;&lt;span style="color:#e6db74"&gt;, soExcludeConfig: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$soExcludeConfig&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; configMap[flavorName] = soExcludeConfig
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; android.applicationVariants.all { variant &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logDebug(&lt;span style="color:#e6db74"&gt;&amp;#34;app variant flavorName: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${variant.flavorName}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; flavorName = variant.flavorName
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; configKey = configMap[flavorName]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; variant.outputs.forEach { output &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (output &lt;span style="color:#66d9ef"&gt;is&lt;/span&gt; ApkVariantOutput) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;//æ ¸å¿ƒé€»è¾‘ï¼šä¿®æ”¹packageApplicationä»»åŠ¡ï¼Œåœ¨ç”ŸæˆapkåŒ…ä¹‹å‰ï¼Œåˆ é™¤æ‰“åŒ…ä¸´æ—¶ç›®å½•ä¸­çš„soæ–‡ä»¶å³å¯é¿å…æ‰“åŒ…soåˆ°apkä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; output.packageApplication.doFirst {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; output.packageApplication.jniFolders.all {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// jniFolder ç›®å½•ä¸ºæœ€åæ‰“åŒ…apkæ—¶ï¼Œç”¨äºå­˜æ”¾soæ–‡ä»¶çš„ä¸´æ—¶ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;å˜ä½“åç§°: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${variant.flavorName}&lt;/span&gt;&lt;span style="color:#e6db74"&gt; , configKey: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${configKey}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;, jniFolders: &amp;#34;&lt;/span&gt; + &lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;.absoluteFile)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; handleExclude(&lt;span style="color:#66d9ef"&gt;it&lt;/span&gt;, configKey);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;handleExclude&lt;/span&gt;(jniFolder: File?, configKey: String?) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; extension.configMap&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; soExcludeList: List&amp;lt;String&amp;gt;? = &lt;span style="color:#66d9ef"&gt;get&lt;/span&gt;(configKey)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; soExcludeList&lt;span style="color:#f92672"&gt;?.&lt;/span&gt;run {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; deleteJniSoFiles(jniFolder, *(soExcludeList.toTypedArray()))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;fun&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;deleteJniSoFiles&lt;/span&gt;(jniFolder: File?, &lt;span style="color:#66d9ef"&gt;vararg&lt;/span&gt; files: String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; (item &lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; files) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; file = File(jniFolder, item)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;file&lt;/span&gt;.exists()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;val&lt;/span&gt; deleteResult = &lt;span style="color:#66d9ef"&gt;file&lt;/span&gt;.delete()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; logInfo(&lt;span style="color:#e6db74"&gt;&amp;#34;åˆ é™¤soæ–‡ä»¶ &lt;/span&gt;&lt;span style="color:#e6db74"&gt;$item&lt;/span&gt;&lt;span style="color:#e6db74"&gt; : &lt;/span&gt;&lt;span style="color:#e6db74"&gt;${if (deleteResult) &amp;#34;æˆåŠŸ&amp;#34; else &amp;#34;å¤±è´¥&amp;#34;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä½¿ç”¨æšä¸¾è¿›è¡Œé…ç½®"&gt;ä½¿ç”¨æšä¸¾è¿›è¡Œé…ç½®&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨buildSrcä¸­å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»ï¼Œç”¨äºçº¦å®šå¯ä»¥é…ç½®çš„å€¼ï¼Œå³å¯ä»¥æ¸…æ™°å®šä¹‰é…ç½®å€¼é¿å…é…ç½®æ—¶ç›´æ¥å†™å­—ç¬¦ä¸²å®¹æ˜“å‡ºé”™ï¼Œåˆå¯ä»¥æ”¯æŒä»£ç è‡ªåŠ¨è¡¥å…¨æ–¹ä¾¿é…ç½®ã€‚&lt;/p&gt;</description></item><item><title>Dockeræ„å»ºArmæ¶æ„é•œåƒ-é€šç”¨æ­¥éª¤</title><link>https://anlyjiang.github.io/posts/docker-arm%E6%9E%B6%E6%9E%84%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA-%E9%80%9A%E7%94%A8%E6%AD%A5%E9%AA%A4/</link><pubDate>Wed, 19 Aug 2020 17:20:59 +0000</pubDate><guid>https://anlyjiang.github.io/posts/docker-arm%E6%9E%B6%E6%9E%84%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA-%E9%80%9A%E7%94%A8%E6%AD%A5%E9%AA%A4/</guid><description>&lt;p&gt;ä»‹ç»ARMç‰ˆæœ¬çš„Dockeré•œåƒçš„æ„å»ºï¼ŒåŒ…æ‹¬ARMæœºå™¨ä¸ŠDockerçš„å®‰è£…ï¼Œåœ¨ARMæœºå™¨ä¸Šæ„å»ºé•œåƒï¼ŒåŠåœ¨amd64æœºå™¨ä¸Šä½¿ç”¨buildxäº¤å‰æ„å»ºarmç‰ˆæœ¬é•œåƒã€‚&lt;/p&gt;
&lt;h2 id="å‰è¨€"&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç°åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯¹æœåŠ¡çš„å›½äº§åŒ–é€‚é…æœ‰æ‰€è¦æ±‚ï¼Œä¸€èˆ¬çš„å›½äº§åŒ–å¹³å°éƒ½æä¾›armç‰ˆæœ¬çš„linuxäº‘ç¯å¢ƒä¾›æˆ‘ä»¬è¿›è¡ŒæœåŠ¡éƒ¨ç½²ï¼Œå› æ­¤éœ€è¦æ„å»ºarmç‰ˆæœ¬çš„é•œåƒã€‚&lt;/p&gt;
&lt;h2 id="æµ‹è¯•æœºä¿¡æ¯"&gt;æµ‹è¯•æœºä¿¡æ¯&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;CPU&lt;/th&gt;
&lt;th style="text-align: left"&gt;FT-1500A 4æ ¸ arm64&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å†…å­˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;8G&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;OS&lt;/td&gt;
&lt;td style="text-align: left"&gt;éº’éºŸV10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;åŒ…ç®¡ç†å™¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;apt&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="armæœºå™¨ä¸Šå®‰è£…docker"&gt;ARMæœºå™¨ä¸Šå®‰è£…Docker&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://docs.docker.com/engine/install/?fileGuid=0l3NVKX0BgflYN3R"&gt;Dockerå®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Dockeræ”¯æŒå¦‚ä¸‹ç³»ç»ŸåŠæ¶æ„&lt;/p&gt;
&lt;p&gt;&lt;img alt="å›¾ç‰‡" loading="lazy" src="https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20210408172838.png!thumbnail"&gt;&lt;/p&gt;
&lt;p&gt;å›½äº§ç³»ç»Ÿä¾æ®å®‰è£…åŒ…çš„æ ¼å¼é€‰æ‹©å¯¹åº”çš„å‚è€ƒç³»ç»Ÿå³å¯ï¼Œå¦‚éº’éºŸv10åŸºäºubuntuï¼Œå¯ä»¥æŒ‰&lt;a href="https://docs.docker.com/engine/install/ubuntu/?fileGuid=0l3NVKX0BgflYN3R"&gt;å®˜æ–¹æ–‡æ¡£- Install Docker Engine on Ubuntu&lt;/a&gt;è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;h3 id="æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"&gt;æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plain" data-lang="plain"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;geostar@geostar-ft1500a:~$ cat /proc/version
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Linux version 4.4.131-20200515.kylin.desktop-generic (YHKYLIN-OS@Kylin) (gcc version 5.5.0 20171010 (Ubuntu/Linaro 5.5.0-12ubuntu1~16.04) ) #kylin SMP Fri May 15 11:29:10 CST 2020
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿæ˜¯åŸºäºubuntu16.04 çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ ubuntu16.04ï¼ˆxenialï¼‰çš„è½¯ä»¶æº&lt;/p&gt;
&lt;h3 id="æ·»åŠ è½¯ä»¶æº"&gt;æ·»åŠ è½¯ä»¶æº&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒï¼š
&lt;a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/"&gt;https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/&lt;/a&gt;
&lt;a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/"&gt;https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ·»åŠ æ¸…åé•œåƒè½¯ä»¶æºï¼ˆarmæ¶æ„ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plain" data-lang="plain"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ›´æ–°ï¼š&lt;/p&gt;</description></item><item><title>Gitlab-Runnerå®‰è£…å¹¶æ³¨å†Œ</title><link>https://anlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%B3%A8%E5%86%8Cgitlab-runner/</link><pubDate>Thu, 11 Jun 2020 16:11:58 +0000</pubDate><guid>https://anlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%B3%A8%E5%86%8Cgitlab-runner/</guid><description>&lt;p&gt;æœ¬æ–‡ä»‹ç»Gitlab-Runnerçš„å®‰è£…è¿è¡Œï¼ˆåŒ…æ‹¬dockeræ–¹å¼å®‰è£…è¿è¡ŒåŠäºŒè¿›åˆ¶ç›´æ¥è¿è¡Œï¼‰ï¼Œå¹¶ä»‹ç»å¦‚ä½•å°†Gitlabæ³¨å†Œåˆ°Gitlabã€‚åŒæ—¶è¿˜ä»‹ç»äº†gitlab-runnerçš„ä¸€äº›å¸¸ç”¨æ“ä½œå‘½ä»¤ã€‚&lt;/p&gt;
&lt;h2 id="å®‰è£…gitlab-runner"&gt;å®‰è£…Gitlab-Runner&lt;/h2&gt;
&lt;p&gt;gitlab-runnerå¯ä»¥ä½¿ç”¨dockeræ–¹å¼è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨ä¸»æœºä¸Šè¿è¡Œå…¶äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯æŒ‰å¦‚ä¸‹æ–¹å¼è¿›è¡Œé€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰§è¡Œé€šç”¨çš„æ„å»ºæµ‹è¯•ä»»åŠ¡åŠä¸ä¸éœ€è¦ç›´æ¥è®¿é—®ä¸»æœºç›®å½•çš„ï¼Œä»¥dockeræ–¹å¼å®‰è£…ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œéƒ¨ç½²ç±»ä»»åŠ¡æˆ–éœ€è¦ç›´æ¥è®¿é—®ä¸»æœºç›®å½•çš„ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å®‰è£…ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹åˆ†åˆ«ä»‹ç»ä¸Šè¿°ä¸¤ç§å®‰è£…æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id="ä½¿ç”¨dockerå®‰è£…gitlab-runner"&gt;ä½¿ç”¨dockerå®‰è£…gitlab-runner&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨dockeræ–¹å¼å®‰è£…çš„ï¼Œéœ€å…ˆåœ¨ä¸»æœºä¸Šå®‰è£…dockerç¯å¢ƒï¼Œå¯å‚è€ƒ Docker å®˜æ–¹å®‰è£…æ–‡æ¡£ã€‚ä»¥ä¸‹æ“ä½œå‡è®¾ä¸»æœºä¸Šå·²æ­£ç¡®å®‰è£…å¹¶é…ç½®äº†dockerè¿è¡Œç¯å¢ƒï¼›&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æç¤ºï¼šå¯ä»¥ä½¿ç”¨åŸºäºalpineçš„é•œåƒæ¥å‡å°å¤§å°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å»ºç«‹é…ç½®æŒ‚è½½ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p /data/gitlab-runner/config
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å»ºç«‹æ„å»ºç›®å½•æŒ‚è½½ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p /data/gitlab-runner/home
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºäºalpineçš„é•œåƒæ¥å‡å°å¤§å°ï¼›ä½¿ç”¨ --restart æ ‡è¯†æ¥è‡ªåŠ¨é‡å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -d --name gitlab-runner --restart always &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; -v /data/gitlab-runner/config:/etc/gitlab-runner &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; -v /data/gitlab-runner/home:/home/gitlab-runner &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; -v /var/run/docker.sock:/var/run/docker.sock &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; gitlab/gitlab-runner:alpine
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# é€šè¿‡ä»¥ä¸‹å‘½ä»¤è®¾ç½®dockerå¼€æœºè‡ªå¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudoÂ systemctl enable docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="dockerå®‰è£…çš„gitlab-runnerå¸¸ç”¨æ“ä½œ"&gt;dockerå®‰è£…çš„gitlab-runnerå¸¸ç”¨æ“ä½œ&lt;/h3&gt;
&lt;h4 id="è¿è¡Œå‘½ä»¤"&gt;è¿è¡Œå‘½ä»¤&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨å·²æœ‰å®¹å™¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å®¹å™¨å·²ç»è¿è¡Œçš„æƒ…å†µä¸‹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 1. äº¤äº’å¼æ‰§è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç„¶åè¾“å…¥å‘½ä»¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker exec -it gitlab-runner /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ç„¶åæ‰§è¡Œå‘½ä»¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gitlab-runer --help
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 2. å•æ¬¡æ‰§è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker exec gitlab-runner gitlab-runner --help
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ä¸´æ—¶çš„ï¼š&lt;/p&gt;</description></item><item><title>Gitlabå‡çº§è®°å½•ï¼ˆ12.10.0-13.0.6ï¼‰</title><link>https://anlyjiang.github.io/posts/gitlab-sheng-ji-ji-lu-12100-1306/</link><pubDate>Thu, 21 May 2020 16:50:41 +0000</pubDate><guid>https://anlyjiang.github.io/posts/gitlab-sheng-ji-ji-lu-12100-1306/</guid><description>&lt;p&gt;å°†gitlabï¼ˆDockeræ–¹å¼è¿è¡Œï¼‰ä»12.10.0å‡çº§åˆ°13.0.6 çš„è¿‡ç¨‹è®°å½•ã€‚&lt;/p&gt;
&lt;h2 id="å‡çº§å‡†å¤‡å·¥ä½œ"&gt;å‡çº§å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;h3 id="ç¡®å®šå‡çº§è·¯çº¿"&gt;&lt;strong&gt;ç¡®å®šå‡çº§è·¯çº¿&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç°æœ‰ç‰ˆæœ¬ï¼š12.10.0&lt;/li&gt;
&lt;li&gt;å½“ä¸‹ç›®æ ‡ç‰ˆæœ¬ï¼š13.0.6&lt;/li&gt;
&lt;li&gt;ç»“åˆ &lt;a href="https://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations"&gt;Gitlabå‡çº§è·¯çº¿å»ºè®®&lt;/a&gt; ç¡®å®šå¦‚ä¸‹å‡çº§è·¯çº¿ï¼š
&lt;ul&gt;
&lt;li&gt;12.10.0 -&amp;gt; 13.0.0 -&amp;gt; 13.0.6&lt;/li&gt;
&lt;li&gt;ç”±äºæˆ‘ä»¬è·¨å¤§ç‰ˆæœ¬å‡çº§äº†ï¼ˆ12-13ï¼‰ï¼Œæ‰€ä»¥å¼•å…¥äº† 13.0.0 çš„ä¸­é—´å‡çº§è·¯å¾„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯"&gt;&lt;strong&gt;è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹ gitlab releaseé¡µé¢ ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹ gitlab docker hub è·å–gitlab-ce dockeré•œåƒç‰ˆæœ¬TAGï¼š&lt;/li&gt;
&lt;li&gt;13.0.0: &lt;code&gt;gitlab/gitlab-ce:13.0.0-ce.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;13.0.6: &lt;code&gt;gitlab/gitlab-ce:13.0.6-ce.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹å‡çº§æ³¨æ„äº‹é¡¹&lt;/li&gt;
&lt;li&gt;å‡çº§æµç¨‹ï¼š &lt;a href="https://docs.gitlab.com/omnibus/docker/README.html#update"&gt;https://docs.gitlab.com/omnibus/docker/README.html#update&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬å‡çº§å»ºè®®è·¯çº¿ï¼šhttps://docs.gitlab.com/ee/policy/maintenance.html#upgrade-recommendations&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å¤‡ä»½"&gt;å¤‡ä»½&lt;/h2&gt;
&lt;p&gt;å¤‡ä»½æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¤‡ä»½çš„æ•°æ®é‡ä¸ç›¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹dockeræŒ‚è½½çš„gitlabæ•°æ®ç›®å½•æ•´ä½“å¤‡ä»½&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ gitlabçš„ &lt;code&gt;gitlab-backup create&lt;/code&gt; å‘½ä»¤åˆ›å»ºå¤‡ä»½ï¼Œå¯åŒ…å«æ‰€æœ‰gitä»“åº“ï¼ŒåŒ…æ‹¬wikiåŠæƒé™ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å»ºè®®å¯¹æŒ‚è½½çš„gitlabæ•°æ®ç›®å½•è¿›è¡Œä¸€æ¬¡æ•´ä½“å¤‡ä»½ï¼Œç›®å‰æš‚ä¸æ¸…æ¥šgitlab-backup createå‘½ä»¤åˆ›å»ºçš„å¤‡ä»½æ˜¯å¦åŒ…å«ciç›¸å…³å†…å®¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸‹å¯¹gitalb-backup å‘½ä»¤æ‰§è¡Œå¤‡ä»½è¿›è¡Œç®€è¦ä»‹ç»ã€‚æ•°æ®ç›®å½•çš„å¤‡ä»½æ–¹å¼ç›´æ¥å¯¹ç›®å½•è¿›è¡Œæ“ä½œå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿›å…¥åˆ°gitlabéƒ¨ç½²æœºå™¨ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker exec -t &amp;lt;container name&amp;gt; gitlab-backup create
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¦‚æœdockerå®¹å™¨çš„åç§°æ˜¯gitlabï¼Œåˆ™å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¤‡ä»½å®Œæˆåä½äºgitlabçš„æ•°æ®ç›®å½•ï¼Œå¦‚ï¼š/data/gitlab/data/backups/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker exec -t &lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;docker ps | grep gitlab | awk &lt;span style="color:#e6db74"&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt; gitlab-backup create
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¤‡ä»½é…ç½®ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo tar -cvf /data/gitlab/data/backups/1592710400_2020_06_21_12.10.0_gitlab_config_backup.tar /data/gitlab/config
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ‰§è¡Œå‡çº§"&gt;æ‰§è¡Œå‡çº§ï¼š&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;è¿›å…¥åˆ°gitlabéƒ¨ç½²æœºå™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh -p &lt;span style="color:#ae81ff"&gt;10022&lt;/span&gt; geostar@172.18.0.208
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;è·å–Gitlabä¸­é—´ç‰ˆæœ¬é•œåƒåŠæœ€ç»ˆç‰ˆæœ¬é•œåƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker pull gitlab/gitlab-ce:13.0.0-ce.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker pull gitlab/gitlab-ce:13.0.6-ce.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;åœæ­¢å¹¶ç§»é™¤ç°æœ‰æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo docker stop gitlab
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo docker rm gitlab
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;è¿›è¡Œå‡çº§ï¼Œä½¿ç”¨ 13.0.0 çš„é•œåƒè¿è¡Œgitlabï¼Œgitlabä¼šè‡ªåŠ¨å¤„ç†æ•°æ®å‡çº§æµç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo docker run --detach &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --hostname 172.18.0.208 &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --publish 443:443 --publish 80:80 --publish 22:22 &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --name gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --restart always &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume /data/gitlab/config:/etc/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume /data/gitlab/logs:/var/log/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume /data/gitlab/data:/var/opt/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; gitlab/gitlab-ce:13.0.0-ce.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;å¾… 13.0.0 å‡çº§å®Œæ¯•ä¹‹åï¼Œå‡çº§åˆ° 13.0.6ï¼Œä½¿ç”¨ 13.0.6 çš„é•œåƒè¿è¡Œgitlab&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo docker stop gitlab
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo docker rm gitlab
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sudo docker run --detach &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --hostname 172.18.0.208 &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --publish 443:443 --publish 80:80 --publish 22:22 &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --name gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --restart always &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume /data/gitlab/config:/etc/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume /data/gitlab/logs:/var/log/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume /data/gitlab/data:/var/opt/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; gitlab/gitlab-ce:13.0.6-ce.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¡®è®¤å‡çº§æˆåŠŸ"&gt;ç¡®è®¤å‡çº§æˆåŠŸ&lt;/h2&gt;
&lt;p&gt;ç™»å½•ç®¡ç†å‘˜è´¦å·ï¼Œè¿›å…¥ç®¡ç†ä¸­å¿ƒ-ä»ªè¡¨ç›˜ï¼ŒæŸ¥çœ‹gitlabç‰ˆæœ¬ï¼š&lt;/p&gt;</description></item><item><title>Gitlabå®‰è£…é…ç½®</title><link>https://anlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEgitlab/</link><pubDate>Mon, 06 Apr 2020 11:54:06 +0000</pubDate><guid>https://anlyjiang.github.io/posts/gitlab-%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEgitlab/</guid><description>&lt;p&gt;ä¸»è¦å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨dockerè¿è¡Œ gitlabï¼›&lt;/li&gt;
&lt;li&gt;é…ç½®LDAPåŠé‚®ç®±ï¼›&lt;/li&gt;
&lt;li&gt;é…ç½®ç®¡ç†å‘˜è´¦å·ï¼›&lt;/li&gt;
&lt;li&gt;é…ç½®é‚®ç®±é€šçŸ¥ï¼›&lt;/li&gt;
&lt;li&gt;å…³é—­ç”¨æˆ·æ³¨å†Œï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å®‰è£…"&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨dockeræ¥å®‰è£…Gitlabï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å®‰è£…è¿è¡Œï¼Œå®Œæˆåä½¿ç”¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export GITLAB_DATA&lt;span style="color:#f92672"&gt;=&lt;/span&gt;/data/gitlab
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è®¾ç½®ä¸»æœºçš„ipåŸŸå&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export HOST_IP&lt;span style="color:#f92672"&gt;=&lt;/span&gt;192.168.43.62
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir $GITLAB_DATA/config $GITLAB_DATA/logs $GITLAB_DATA/data
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run --detach &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --hostname $HOST_IP &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --publish 443:443 --publish 80:80 --publish 22:22 &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --name gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --restart always &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume $GITLAB_DATA/config:/etc/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume $GITLAB_DATA/logs:/var/log/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; --volume $GITLAB_DATA/data:/var/opt/gitlab &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; gitlab/gitlab-ce:13.9.1-ce.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®å…¨éƒ¨æŒ‚è½½åœ¨å¤–éƒ¨ç›®å½• GITLAB_DATA ä¸­&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--hostname 192.168.43.62&lt;/code&gt; : æŒ‡å®šå½“å‰æœåŠ¡çš„IPæˆ–è€…åŸŸåï¼Œåç»­å°†ä¼šæ˜¾ç¤ºä¸ºgitlabä»£ç ä»“åº“çš„å…‹éš†åœ°å€&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--restart always&lt;/code&gt; : è®¾ç½®æœåŠ¡è‡ªåŠ¨é‡å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æŸ¥çœ‹gitlabçš„å¯ç”¨ç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="dockerhub/gitlab-ce"&gt;dockerhub/gitlab-ce&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://about.gitlab.com/releases/categories/releases/"&gt;gitlab release page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id="æŸ¥çœ‹å¯åŠ¨çŠ¶æ€"&gt;&lt;strong&gt;æŸ¥çœ‹å¯åŠ¨çŠ¶æ€&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;å¯åŠ¨æœŸé—´å¯ä»¥ä½¿ç”¨ &lt;code&gt;docker ps&lt;/code&gt; æŸ¥çœ‹çŠ¶æ€ï¼Œå¦‚STATUSä¸­æ˜¾ç¤ºä¸º&lt;code&gt;starting&lt;/code&gt;åˆ™è¡¨ç¤ºæœåŠ¡è¿˜åœ¨å¯åŠ¨ä¸­ï¼Œå¦‚æ˜¾ç¤ºä¸º&lt;code&gt;healthy&lt;/code&gt;åˆ™è¡¨ç¤ºæœåŠ¡å·²æ­£å¸¸å¯åŠ¨ï¼Œå³å¯è®¿é—® http://192.168.43.62 è®¿é—®Gitlabçš„webåœ°å€ã€‚&lt;/p&gt;</description></item><item><title>Android-WebViewä¸­JavaåŒJSçš„äº¤äº’</title><link>https://anlyjiang.github.io/posts/android-webview%E4%B8%ADjava%E5%90%8Cjs%E7%9A%84%E4%BA%A4%E4%BA%92/</link><pubDate>Fri, 20 Mar 2020 10:18:50 +0000</pubDate><guid>https://anlyjiang.github.io/posts/android-webview%E4%B8%ADjava%E5%90%8Cjs%E7%9A%84%E4%BA%A4%E4%BA%92/</guid><description>&lt;p&gt;Androidæä¾›çš„å‡ ç§JSåŒJavaäº¤äº’çš„æ–¹å¼ä»‹ç»ï¼Œé€šè¿‡ä¸€ä¸ªå®ä¾‹ä»‹ç»é€šè¿‡&lt;code&gt;evaluateJavascript&lt;/code&gt;è°ƒç”¨JSæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id="androidæä¾›çš„jsåŸç”Ÿäº¤äº’api"&gt;Androidæä¾›çš„jsåŸç”Ÿäº¤äº’API&lt;/h2&gt;
&lt;h3 id="androidè°ƒç”¨-js-ä»£ç "&gt;Androidè°ƒç”¨ JS ä»£ç ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡WebViewçš„ &lt;strong&gt;loadUrl()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡WebViewçš„ &lt;strong&gt;evaluateJavascript()&lt;/strong&gt; æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Androidè°ƒç”¨ JS ä»£ç ä¸»è¦ä½¿ç”¨ ç¬¬äºŒç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="js-è°ƒç”¨-android-ä»£ç "&gt;JS è°ƒç”¨ Android ä»£ç ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€šè¿‡ WebView çš„ addJavascriptInterface() è¿›è¡Œå¯¹è±¡æ˜ å°„&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;strong&gt;WebChromeClient&lt;/strong&gt;çš„ &lt;strong&gt;onJsAlert&lt;/strong&gt;() ã€&lt;strong&gt;onJsConfirm&lt;/strong&gt;()ã€&lt;strong&gt;onJsPrompt&lt;/strong&gt;() æ–¹æ³•å›è°ƒæ‹¦æˆªJSå¯¹è¯æ¡†&lt;strong&gt;alert&lt;/strong&gt;()ã€&lt;strong&gt;confirm&lt;/strong&gt;()ã€&lt;strong&gt;prompt&lt;/strong&gt;() æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;strong&gt;WebViewClient&lt;/strong&gt;çš„&lt;strong&gt;shouldOverrideUrlLoading()&lt;/strong&gt; æ–¹æ³•å›è°ƒæ‹¦æˆª url&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬2å’Œç¬¬3ä¸­æ–¹å¼èƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ç¬¬ä¸€ç§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®˜æ–¹ç¤ºä¾‹ä»£ç ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;addJavaScriptInterface æ³¨å…¥åŸç”Ÿå¯¹è±¡åˆ°JS + åŸç”Ÿé€šè¿‡loadUrl è°ƒç”¨JSä»£ç &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class JsObject {
@JavascriptInterface
public String toString() { return &amp;#34;injectedObject&amp;#34;; }
}
webview.getSettings().setJavaScriptEnabled(true);
// æ³¨å…¥Javaå¯¹è±¡åˆ° JavaScript ï¼ŒJSä¸­å¯ä»¥é€šè¿‡ injectedObject æ¥è°ƒç”¨åŸç”Ÿä»£ç 
webView.addJavascriptInterface(new JsObject(), &amp;#34;injectedObject&amp;#34;);
webView.loadData(&amp;#34;&amp;#34;, &amp;#34;text/html&amp;#34;, null);
webView.loadUrl(&amp;#34;javascript:alert(injectedObject.toString())&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Android 4.2ï¼ˆJELLY BEANï¼‰åŠæ›´é«˜ç‰ˆæœ¬ä¸­åªæœ‰è¢«&lt;em&gt;JavascriptInterface&lt;/em&gt;æ³¨è§£çš„publicæ–¹æ³•æ‰å¯ä»¥åœ¨jsä¸­è°ƒç”¨ï¼› Android4.2ä»¥ä¸‹è®¾å¤‡ä¸Šï¼Œæ‰€æœ‰publicæ–¹æ³•éƒ½å¯ä»¥è¢«jsè®¿é—®ï¼ˆåŒ…æ‹¬ç»§æ‰¿çš„ï¼‰&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;em&gt;addJavaScriptInterface&lt;/em&gt;åŠ å…¥å¯¹è±¡ ï¼š å¿…é¡»åœ¨æ³¨å…¥å¯¹è±¡ä¹‹å‰å¯ç”¨JavaScriptï¼Œå¹¶ä¸”æ³¨å…¥çš„å¯¹è±¡ç›´åˆ°ä¸‹æ¬¡é¡µé¢é‡æ–°åŠ è½½æ‰ä¼šå‡ºç°åœ¨JavaScriptä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id="åº”ç”¨å®ä¾‹javaåŒvueäº¤äº’"&gt;åº”ç”¨å®ä¾‹ï¼šJavaåŒVueäº¤äº’&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢åŠ è½½å®Œæ¯•ä¹‹åæ›´æ–°æ•°æ®ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡Javaä¾§è°ƒç”¨JSçš„æ–¹æ³•æ¥å°†æ•°æ®ä¼ é€’ç»™JSé€šçŸ¥å…¶æ›´æ–°ï¼›
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨JSä¾§å®šä¹‰ä¸€ä¸ªæ¥æ”¶æ•°æ®çš„æ–¹æ³•ï¼Œä¸ºäº†èƒ½è®©Javaä¾§èƒ½æ–¹ä¾¿æ‰¾åˆ°ï¼Œæˆ‘ä»¬å°†æ–¹æ³•å®šä¹‰åˆ°windowå¯¹è±¡ä¸Šã€‚
ç„¶ååœ¨WebViewä¸­é¡µé¢åŠ è½½å®Œæ¯•ï¼ˆonPageFinishedï¼‰åï¼Œè°ƒç”¨ &lt;code&gt;webView.evaluateJavascript&lt;/code&gt; æ¥è°ƒç”¨æ­¤JSæ–¹æ³•ï¼›&lt;/p&gt;</description></item><item><title>å…³äº</title><link>https://anlyjiang.github.io/posts/about/</link><pubDate>Fri, 25 Jan 2019 19:09:48 +0000</pubDate><guid>https://anlyjiang.github.io/posts/about/</guid><description>&lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="-å…³äºæœ¬ç«™"&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ’¾ æˆ‘é‡åˆ°çš„é—®é¢˜å¤§æ¦‚ç‡å…¶ä»–äººä¹Ÿé‡åˆ°è¿‡ï¼Œä»å…¶ä»–äººé‚£é‡Œè·å–è¿‡è§£å†³æ–¹æ¡ˆ/çµæ„Ÿ/å¯å‘ï¼Œæ‰€ä»¥å¸Œæœ›åŒæ ·èƒ½å¤Ÿç»™äºˆå…¶ä»–äººå¸®åŠ©ä¸å¯å‘ã€‚&lt;/li&gt;
&lt;li&gt;âŒšï¸ æ—¶é—´æ€»éš¾å¤Ÿç”¨ï¼Œä½†æ„¿æˆ‘çš„åˆ†äº«èƒ½èŠ‚çœæŸäººçš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-åšä¸»æ˜¯è°"&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ¤– ç¨‹åºå‘˜ï¼Œä¸»è¦æ˜¯ Androidï¼Œä¹Ÿæäº›åˆ«çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-å…´è¶£çˆ±å¥½"&gt;â›¹ å…´è¶£çˆ±å¥½&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ“Ÿ ä»¥å‰ç©æ‰‹æœºï¼ŒMP3ï¼ŒMP4ï¼Œå¹³æ¿ï¼Œåæ¥ç©ç”µè„‘&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-è”ç³»æˆ‘å‘€"&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ“® &lt;a href="mailto:hanlyjiang@outlook.com"&gt;hanlyjiang@outlook.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ğŸ‘‡à­  ä¸‹æ–¹è¯„è®º à­  ğŸ‘‡&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Hello Gridea</title><link>https://anlyjiang.github.io/posts/hello-gridea/</link><pubDate>Wed, 12 Dec 2018 00:00:00 +0000</pubDate><guid>https://anlyjiang.github.io/posts/hello-gridea/</guid><description>&lt;p&gt;ğŸ‘ æ¬¢è¿ä½¿ç”¨ &lt;strong&gt;Gridea&lt;/strong&gt; ï¼&lt;br&gt;
âœï¸ &lt;strong&gt;Gridea&lt;/strong&gt; ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„&amp;hellip; &amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/getgridea/gridea"&gt;Github&lt;/a&gt;&lt;br&gt;
&lt;a href="https://gridea.dev/"&gt;Gridea ä¸»é¡µ&lt;/a&gt;&lt;br&gt;
&lt;a href="http://fehey.com/"&gt;ç¤ºä¾‹ç½‘ç«™&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="ç‰¹æ€§"&gt;ç‰¹æ€§ğŸ‘‡&lt;/h2&gt;
&lt;p&gt;ğŸ“ ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ &lt;strong&gt;Markdown&lt;/strong&gt; è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ&lt;/p&gt;
&lt;p&gt;ğŸŒ‰ ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;ğŸ·ï¸ ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„&lt;/p&gt;
&lt;p&gt;ğŸ“‹ ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•&lt;/p&gt;
&lt;p&gt;ğŸ’» ä½ å¯ä»¥åœ¨ &lt;strong&gt;Windows&lt;/strong&gt;ï¼Œ&lt;strong&gt;MacOS&lt;/strong&gt; æˆ– &lt;strong&gt;Linux&lt;/strong&gt; è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯&lt;/p&gt;
&lt;p&gt;ğŸŒ ä½ å¯ä»¥ä½¿ç”¨ &lt;strong&gt;ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ&lt;/strong&gt; æˆ– &lt;strong&gt;Coding Pages&lt;/strong&gt; å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°&lt;/p&gt;
&lt;p&gt;ğŸ’¬ ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ &lt;a href="https://github.com/gitalk/gitalk"&gt;Gitalk&lt;/a&gt; æˆ– &lt;a href="https://github.com/SukkaW/DisqusJS"&gt;DisqusJS&lt;/a&gt; è¯„è®ºç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;ğŸ‡¬ğŸ‡§ ä½ å¯ä»¥ä½¿ç”¨&lt;strong&gt;ä¸­æ–‡ç®€ä½“&lt;/strong&gt;æˆ–&lt;strong&gt;è‹±è¯­&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ğŸŒ ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›&lt;/p&gt;
&lt;p&gt;ğŸ–¥ ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥&lt;/p&gt;
&lt;p&gt;ğŸŒ± å½“ç„¶ &lt;strong&gt;Gridea&lt;/strong&gt; è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ&lt;/p&gt;
&lt;p&gt;æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´&lt;/p&gt;
&lt;p&gt;å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼&lt;/p&gt;
&lt;p&gt;ğŸ˜˜ Enjoy~&lt;/p&gt;</description></item><item><title>Androidäº‹ä»¶åŠæ‰‹åŠ¿</title><link>https://anlyjiang.github.io/posts/android-shi-jian-ji-shou-shi/</link><pubDate>Tue, 20 Feb 2018 10:13:24 +0000</pubDate><guid>https://anlyjiang.github.io/posts/android-shi-jian-ji-shou-shi/</guid><description>&lt;p&gt;androidäº‹ä»¶åŸºç¡€åŠæ‰‹åŠ¿ï¼Œä¸»è¦å…³æ³¨å„ç§æ‰‹åŠ¿çš„ä½¿ç”¨åŠå…¶è®¡ç®—åŸç† ã€‚&lt;/p&gt;
&lt;h2 id="androidäº‹ä»¶åŸºç¡€"&gt;Androidäº‹ä»¶åŸºç¡€&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨æ¦‚å¿µ&lt;/p&gt;
&lt;h3 id="äº‹ä»¶ç›‘å¬å™¨åŠäº‹ä»¶å¤„ç†ç¨‹åº"&gt;äº‹ä»¶ç›‘å¬å™¨åŠäº‹ä»¶å¤„ç†ç¨‹åº&lt;/h3&gt;
&lt;p&gt;å¯ç›´æ¥æŸ¥çœ‹ &lt;a href="https://developer.android.google.cn/guide/topics/ui/ui-events"&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ï¼Œæ­¤å¤„ä»…åšç®€è¦æè¿°ï¼›&lt;/p&gt;
&lt;h4 id="äº‹ä»¶ç›‘å¬å™¨"&gt;äº‹ä»¶ç›‘å¬å™¨&lt;/h4&gt;
&lt;p&gt;Viewç±»çš„åŒ…å«ä¸€ä¸ªå›è°ƒæ–¹æ³•çš„æ¥å£ï¼Œé€šè¿‡setXXXListeneræ¥å®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºï¼›&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;äº‹ä»¶ç›‘å¬å™¨æ˜¯ &lt;code&gt;View&lt;/code&gt; ç±»ä¸­åŒ…å«ä¸€ä¸ªå›è°ƒæ–¹æ³•çš„æ¥å£ã€‚å½“ç”¨æˆ·ä¸ç•Œé¢é¡¹ç›®ä¹‹é—´çš„äº’åŠ¨è§¦å‘å·²æ³¨å†Œç›‘å¬å™¨çš„ View å¯¹è±¡æ—¶ï¼ŒAndroid æ¡†æ¶å°†è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;äº‹ä»¶ç›‘å¬å™¨æ¥å£ä¸­åŒ…å«ä»¥ä¸‹å›è°ƒæ–¹æ³•ï¼šonClick()ï¼ŒonLongClick()ï¼ŒonFocusChange()ï¼ŒonKey()ï¼ŒonTouch()ï¼ŒonCreateContextMenu()&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ä»¬é‡ç‚¹å…³æ³¨onTouchï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;onTouch()ï¼š åœ¨ &lt;code&gt;View.OnTouchListener&lt;/code&gt; ä¸­ã€‚å½“ç”¨æˆ·æ‰§è¡Œå¯è§†ä¸ºè§¦æ‘¸äº‹ä»¶çš„æ“ä½œæ—¶ï¼ŒåŒ…æ‹¬æŒ‰ä¸‹ã€é‡Šæ”¾æˆ–å±å¹•ä¸Šçš„ä»»ä½•ç§»åŠ¨æ‰‹åŠ¿ï¼ˆåœ¨é¡¹ç›®è¾¹ç•Œå†…ï¼‰ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç›‘å¬å™¨æ˜¯å¦å¤„ç†å®Œæ­¤äº‹ä»¶ã€‚é‡è¦çš„æ˜¯ï¼Œæ­¤äº‹ä»¶å¯ä»¥æ‹¥æœ‰å¤šä¸ªåˆ†å…ˆåé¡ºåºçš„æ“ä½œã€‚å› æ­¤ï¼Œå¦‚æœåœ¨æ”¶åˆ° down æ“ä½œäº‹ä»¶æ—¶è¿”å› falseï¼Œåˆ™è¡¨ç¤ºæ‚¨å¹¶æœªå¤„ç†å®Œæ­¤äº‹ä»¶ï¼Œè€Œä¸”å¯¹å…¶åç»­æ“ä½œä¹Ÿä¸æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæ‚¨æ— éœ€æ‰§è¡Œäº‹ä»¶å†…çš„ä»»ä½•å…¶ä»–æ“ä½œï¼Œå¦‚æ‰‹åŠ¿æˆ–æœ€ç»ˆçš„ up æ“ä½œäº‹ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="äº‹ä»¶å¤„ç†ç¨‹åº"&gt;äº‹ä»¶å¤„ç†ç¨‹åº&lt;/h4&gt;
&lt;p&gt;ç›´æ¥å¼•ç”¨å®˜æ–¹æ–‡æ¡£æè¿°ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæ‚¨ä» View æ„å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™å¯å®šä¹‰å‡ ç§å›è°ƒæ–¹æ³•ï¼Œç”¨ä½œé»˜è®¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚åœ¨æœ‰å…³&lt;a href="https://developer.android.google.cn/guide/topics/ui/custom-components"&gt;è‡ªå®šä¹‰ View ç»„ä»¶&lt;/a&gt;çš„æ–‡æ¡£ä¸­ï¼Œæ‚¨å°†äº†è§£ä¸€äº›ç”¨äºäº‹ä»¶å¤„ç†çš„å¸¸è§å›è°ƒï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;onKeyDown(int, KeyEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿæ–°çš„æŒ‰é”®äº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onKeyUp(int, KeyEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿ key up äº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onTrackballEvent(MotionEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿè½¨è¿¹çƒåŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onTouchEvent(MotionEvent)&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿè§¦å±åŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onFocusChanged(boolean, int, Rect)&lt;/code&gt;ï¼šåœ¨ View å¯¹è±¡è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹æ³•å€¼å¾—æ‚¨æ³¨æ„ï¼Œå°½ç®¡å®ƒä»¬å¹¶é View ç±»çš„ä¸€éƒ¨åˆ†ï¼Œä½†å¯èƒ½ä¼šç›´æ¥å½±å“æ‰€èƒ½é‡‡å–çš„äº‹ä»¶å¤„ç†æ–¹å¼ã€‚å› æ­¤ï¼Œåœ¨ç®¡ç†å¸ƒå±€å†…æ›´å¤æ‚çš„äº‹ä»¶æ—¶ï¼Œä¸å¦¨è€ƒè™‘ä½¿ç”¨ä»¥ä¸‹å…¶ä»–æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Activity.dispatchTouchEvent(MotionEvent)&lt;/code&gt;ï¼šæ­¤æ–¹æ³•å…è®¸ &lt;code&gt;Activity&lt;/code&gt; åœ¨æ‰€æœ‰è§¦æ‘¸äº‹ä»¶åˆ†æ´¾ç»™çª—å£ä¹‹å‰æˆªè·å®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ViewGroup.onInterceptTouchEvent(MotionEvent)&lt;/code&gt;ï¼šæ­¤æ–¹æ³•å…è®¸ &lt;code&gt;ViewGroup&lt;/code&gt; ç›‘è§†åˆ†æ´¾ç»™å­çº§ View çš„äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ViewParent.requestDisallowInterceptTouchEvent(boolean)&lt;/code&gt;ï¼šå¯¹çˆ¶çº§ View è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯æŒ‡ç¤ºä¸åº”ä½¿ç”¨ &lt;code&gt;onInterceptTouchEvent(MotionEvent)&lt;/code&gt; æˆªè·è§¦æ‘¸äº‹ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ &lt;code&gt;onTouchEvent(MotionEvent)&lt;/code&gt; å³åœ¨å‘ç”Ÿè§¦å±åŠ¨ä½œäº‹ä»¶æ—¶è°ƒç”¨çš„å›è°ƒæ–¹æ³•ï¼›&lt;/p&gt;
&lt;h3 id="è§¦æ‘¸æ‰‹åŠ¿"&gt;è§¦æ‘¸æ‰‹åŠ¿&lt;/h3&gt;
&lt;p&gt;æ‰‹åŠ¿å¯ä»¥è®©ç”¨æˆ·é€šè¿‡è§¦æ‘¸æ¥ä¸å±å¹•å…ƒç´ è¿›è¡Œäº¤äº’ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·äº¤æˆ·è§’åº¦çš„æ‰‹åŠ¿åˆ’åˆ†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ‰‹åŠ¿ç±»å‹&lt;/th&gt;
&lt;th&gt;å…·ä½“æ‰‹åŠ¿-ä¸åŒç±»å‹ä¹‹é—´æœ‰é‡å¤&lt;/th&gt;
&lt;th&gt;è§£é‡Š&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å¯¼èˆªæ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;å®ç°å¯¼èˆªä½œç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç‚¹å‡» - Tap&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šç‚¹å‡»æŒ‰é’®è·³è½¬åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ»šåŠ¨å’Œæ‹–ç§» - Scroll&amp;amp;Pan&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šæ»‘åŠ¨å›¾ç‰‡åˆ—è¡¨æˆ–æ‹–åŠ¨ä»¥æµè§ˆåœ°å›¾&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Scroll - å¿«é€Ÿæ‹–åŠ¨å¹¶æŠ¬èµ·æ‰‹æŒ‡æ—¶å‘ç”Ÿçš„ä¸€ç§æ»šåŠ¨ &lt;!-- raw HTML omitted --&gt; Pan-æ‹–ç§»ï¼Œæ…¢é€Ÿç§»åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ‹–åŠ¨/æ‹–æ‹½ - Drag&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·åœ¨è§¦æ‘¸å±ä¸Šæ‹–åŠ¨æ‰‹æŒ‡æ—¶å‘ç”Ÿçš„ä¸€ç§æ»šåŠ¨&lt;!-- raw HTML omitted --&gt;å¦‚ï¼šæŒ‰ä½åº•éƒ¨sheetå¹¶å‘å±å¹•é¡¶éƒ¨æ‹–åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;è½»æ‰« - Swipe&lt;/td&gt;
&lt;td&gt;å•ä¸ªæ‰‹æŒ‡è§¦æ‘¸å±å¹•å¹¶å¿«é€Ÿåœ°æœä»»æ„ä¸€ä¸ªæ–¹å‘æ»‘åŠ¨&lt;!-- raw HTML omitted --&gt;å¦‚ï¼šå·¦å³æ»‘åŠ¨ä»¥åœ¨ä¸åŒçš„Tabé¡µä¸­åˆ‡æ¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æåˆ/ç¼©æ”¾ - Pinch&lt;/td&gt;
&lt;td&gt;åŒæŒ‡æˆ–å¤šæŒ‡æåˆ&lt;!-- raw HTML omitted --&gt;å¦‚ï¼šåœ¨ä¸€ä¸ªå›¾ç‰‡åˆ—è¡¨ä¸­ç¼©æ”¾ä¸€ä¸ªitemè¿›å…¥å¤§å›¾æŸ¥çœ‹ç•Œé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åŠ¨ä½œæ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡ŒæŸç§åŠ¨ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç‚¹å‡» - Tap&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;é•¿æŒ‰ - Long press&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šé•¿æŒ‰é€‰ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;è½»æ‰« - Swipe&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šè½»æ‰«itemå±•ç°åˆ é™¤/æ”¶è—æŒ‰é’®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å˜æ¢æ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºæ”¹å˜å…ƒç´ å¤§å°ï¼Œä½ç½®ï¼Œæ—‹è½¬è§’åº¦ï¼Œå®ç°å˜æ¢æ•ˆæœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;åŒå‡» - Double tap&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šåŒå‡»ç¼©æ”¾å›¾ç‰‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æåˆ/ç¼©æ”¾ - Pinch&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šç¼©æ”¾æŸ¥çœ‹å›¾ç‰‡ç»†èŠ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ç»„åˆæ‰‹åŠ¿&lt;/td&gt;
&lt;td&gt;å¦‚ï¼šåœ°å›¾ä¸­çš„æ”¾å¤§ç¼©å°&amp;amp;æ—‹è½¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;é€‰å–å¹¶æ‹–åŠ¨ - Pick up&amp;amp;Move&lt;/td&gt;
&lt;td&gt;é•¿æŒ‰é€‰æ‹©å…ƒç´  + æ‹–åŠ¨å…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://material.io/design/interaction/gestures.html"&gt;æ¥æº&lt;/a&gt;åŠæ‰‹åŠ¿çš„åŠ¨ç”»æ•ˆæœå¯ä»¥çœ‹è¿™é‡Œï¼š &lt;a href="https://material.io/design/interaction/gestures.html#types-of-gestures"&gt;material.io&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>