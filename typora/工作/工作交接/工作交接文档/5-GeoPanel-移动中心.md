# GeoPanel-移动中心-代码同步

## 一般步骤

1. 克隆gitlab代码到本地



<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="586.5 -80 601.5 198.46154" width="601.5" height="198.46154">
  <defs>
    <font-face font-family="Helvetica" font-size="16" units-per-em="1000" underline-position="-75.68359" underline-thickness="49.316406" slope="0" x-height="522.9492" cap-height="717.28516" ascent="770.0195" descent="-229.98047" font-weight="400">
      <font-face-src>
        <font-face-name name="Helvetica"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="16" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="400">
      <font-face-src>
        <font-face-name name="PingFangSC-Regular"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Courier New" font-size="16" panose-1="2 7 3 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="41.015625" slope="0" x-height="422.85156" cap-height="571.28906" ascent="832.5195" descent="-300.29297" font-weight="400">
      <font-face-src>
        <font-face-name name="CourierNewPSMT"/>
      </font-face-src>
    </font-face>
  </defs>
  <metadata> Produced by OmniGraffle 7.18.4\n2021-03-23 05:56:46 +0000</metadata>
  <g id="Canvas_1" stroke="none" fill-opacity="1" fill="none" stroke-opacity="1" stroke-dasharray="none">
    <title>Canvas 1</title>
    <g id="Canvas_1_Layer_1">
      <title>Layer 1</title>
      <g id="Group_33">
        <title>General - Internet</title>
        <g id="Group_35">
          <g id="Graphic_37">
            <path d="M 1188 27.79753 L 1188 34.97935 C 1188 47.996394 1173.6364 61.4623 1156.1307 61.4623 L 1061.8693 61.4623 C 1044.1392 61.4623 1030 48.220826 1030 34.97935 L 1030 27.79753 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_36">
            <path d="M 1090.821 -42.000765 C 1107.2045 -42.000765 1121.3438 -32.350197 1127.6278 -18.210992 C 1130.9943 -20.45531 1134.8097 -21.8019 1139.2983 -21.8019 C 1150.5199 -21.8019 1159.4972 -13.04906 1159.7216 -2.0519012 C 1175.6562 -.7053103 1188 14.556053 1188 26.899803 L 1188 29.592985 C 1188 42.83446 1173.6364 56.07594 1155.9062 56.07594 L 1061.8693 56.07594 C 1044.1392 56.07594 1030 42.83446 1030 29.592985 L 1030 26.899803 C 1030 16.800372 1038.5284 2.8855988 1050.4233 -.4808785 C 1050.4233 -.9297421 1050.4233 -1.154174 1050.4233 -1.6030376 C 1050.4233 -24.04622 1068.3778 -42.000765 1090.821 -42.000765 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_34">
          <text transform="translate(1085.4865 63.4623)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">Gitlab</tspan>
          </text>
        </g>
      </g>
      <g id="Group_38">
        <title>Mobile Services - SNS - Topic</title>
        <g id="Group_40">
          <title>Layer_1</title>
          <g id="Group_53">
            <g id="Graphic_54">
              <rect x="586.5" y="48.76923" width="279" height="47.69231" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_51">
            <g id="Graphic_52">
              <rect x="586.5" y="-5.736264" width="279" height="43.263736" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_49">
            <g id="Graphic_50">
              <path d="M 865.1593 -28.9011 L 865.1593 -20.384615 L 586.5 -20.384615 L 586.5 -28.9011 L 746.95055 -75.23077 Z" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_47">
            <g id="Graphic_48">
              <rect x="586.5" y="-80" width="279" height="51.0989" fill="#ad688b"/>
              <text transform="translate(591.5 -65.45055)" fill="white">
                <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="white" x="102.5" y="17">本地仓库</tspan>
              </text>
            </g>
          </g>
          <g id="Group_45">
            <g id="Graphic_46">
              <rect x="586.5" y="-13.571429" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Group_43">
            <g id="Graphic_44">
              <rect x="586.5" y="45.36264" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Graphic_42">
            <rect x="595.35714" y="-4.7142857" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 -1.6745485)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="73.91253" y="15">remotes/origin</tspan>
            </text>
          </g>
          <g id="Graphic_41">
            <rect x="595.35714" y="54.56044" width="260.94505" height="24.527473" fill="white"/>
          </g>
        </g>
        <g id="Graphic_39">
          <text transform="translate(677.9922 98.46154)" fill="black">
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="4.800781" y="13">git clone </tspan>
          </text>
        </g>
      </g>
      <g id="Line_55">
        <line x1="865.5" y1="19.23077" x2="1030" y2="21.23077" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8.0,8.0" stroke-width="2"/>
      </g>
    </g>
  </g>
</svg>


2. 添加github远程仓库到本地仓库（下面取名为github）

   可使用 `git remote -v show` 命令确认当前说注册的远程仓库列表

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="285 274 903 216.46154" width="903" height="216.46154">
  <defs>
    <font-face font-family="Helvetica" font-size="16" units-per-em="1000" underline-position="-75.68359" underline-thickness="49.316406" slope="0" x-height="522.9492" cap-height="717.28516" ascent="770.0195" descent="-229.98047" font-weight="400">
      <font-face-src>
        <font-face-name name="Helvetica"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="16" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="400">
      <font-face-src>
        <font-face-name name="PingFangSC-Regular"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Courier New" font-size="16" panose-1="2 7 3 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="41.015625" slope="0" x-height="422.85156" cap-height="571.28906" ascent="832.5195" descent="-300.29297" font-weight="400">
      <font-face-src>
        <font-face-name name="CourierNewPSMT"/>
      </font-face-src>
    </font-face>
  </defs>
  <metadata> Produced by OmniGraffle 7.18.4\n2021-03-23 05:56:46 +0000</metadata>
  <g id="Canvas_1" stroke="none" fill-opacity="1" fill="none" stroke-opacity="1" stroke-dasharray="none">
    <title>Canvas 1</title>
    <g id="Canvas_1_Layer_1">
      <title>Layer 1</title>
      <g id="Group_3">
        <title>General - Internet</title>
        <g id="Group_5">
          <g id="Graphic_7">
            <path d="M 443 414.7983 L 443 421.9801 C 443 434.99716 428.63636 448.46307 411.1307 448.46307 L 316.8693 448.46307 C 299.1392 448.46307 285 435.2216 285 421.9801 L 285 414.7983 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_6">
            <path d="M 345.82102 345 C 362.20455 345 376.34375 354.65057 382.62784 368.78977 C 385.9943 366.54545 389.80966 365.19886 394.2983 365.19886 C 405.5199 365.19886 414.49716 373.9517 414.7216 384.94886 C 430.65625 386.29545 443 401.5568 443 413.90057 L 443 416.59375 C 443 429.83523 428.63636 443.0767 410.90625 443.0767 L 316.8693 443.0767 C 299.1392 443.0767 285 429.83523 285 416.59375 L 285 413.90057 C 285 403.80114 293.5284 389.88636 305.4233 386.5199 C 305.4233 386.071 305.4233 385.8466 305.4233 385.39773 C 305.4233 362.95455 323.37784 345 345.82102 345 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_4">
          <text transform="translate(336.4865 450.46307)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">GitHub</tspan>
          </text>
        </g>
      </g>
      <g id="Group_8">
        <title>General - Internet</title>
        <g id="Group_10">
          <g id="Graphic_12">
            <path d="M 1188 381.79753 L 1188 388.97935 C 1188 401.9964 1173.6364 415.4623 1156.1307 415.4623 L 1061.8693 415.4623 C 1044.1392 415.4623 1030 402.22083 1030 388.97935 L 1030 381.79753 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_11">
            <path d="M 1090.821 311.99924 C 1107.2045 311.99924 1121.3438 321.6498 1127.6278 335.789 C 1130.9943 333.5447 1134.8097 332.1981 1139.2983 332.1981 C 1150.5199 332.1981 1159.4972 340.95094 1159.7216 351.9481 C 1175.6562 353.2947 1188 368.55605 1188 380.8998 L 1188 383.593 C 1188 396.83446 1173.6364 410.07594 1155.9062 410.07594 L 1061.8693 410.07594 C 1044.1392 410.07594 1030 396.83446 1030 383.593 L 1030 380.8998 C 1030 370.80037 1038.5284 356.8856 1050.4233 353.51912 C 1050.4233 353.07026 1050.4233 352.84583 1050.4233 352.39696 C 1050.4233 329.9538 1068.3778 311.99924 1090.821 311.99924 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_9">
          <text transform="translate(1085.4865 417.4623)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">Gitlab</tspan>
          </text>
        </g>
      </g>
      <g id="Group_13">
        <title>Mobile Services - SNS - Topic</title>
        <g id="Group_15">
          <title>Layer_1</title>
          <g id="Group_28">
            <g id="Graphic_29">
              <rect x="586.5" y="402.76923" width="279" height="47.69231" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_26">
            <g id="Graphic_27">
              <rect x="586.5" y="348.26374" width="279" height="43.263736" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_24">
            <g id="Graphic_25">
              <path d="M 865.1593 325.0989 L 865.1593 333.6154 L 586.5 333.6154 L 586.5 325.0989 L 746.95055 278.76923 Z" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_22">
            <g id="Graphic_23">
              <rect x="586.5" y="274" width="279" height="51.0989" fill="#ad688b"/>
              <text transform="translate(591.5 288.54945)" fill="white">
                <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="white" x="102.5" y="17">本地仓库</tspan>
              </text>
            </g>
          </g>
          <g id="Group_20">
            <g id="Graphic_21">
              <rect x="586.5" y="340.42857" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Group_18">
            <g id="Graphic_19">
              <rect x="586.5" y="399.36264" width="279" height="42.58242" fill="#ad688b"/>
              <text transform="translate(591.5 402.42985)" fill="black">
                <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="130.5" y="15">s</tspan>
              </text>
            </g>
          </g>
          <g id="Graphic_17">
            <rect x="595.35714" y="349.2857" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 352.32545)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="73.91253" y="15">remotes/origin</tspan>
            </text>
          </g>
          <g id="Graphic_16">
            <rect x="595.35714" y="408.56044" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 411.6002)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="71.23253" y="15">remotes/github</tspan>
            </text>
          </g>
        </g>
        <g id="Graphic_14">
          <text transform="translate(605.9805 452.46154)" fill="black">
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="19.203125" y="13">git remote add github</tspan>
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="0" y="31">https://github/com/xx.git</tspan>
          </text>
        </g>
      </g>
      <g id="Line_30">
        <line x1="586.5" y1="409" x2="443" y2="408.23153" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8.0,8.0" stroke-width="2"/>
      </g>
      <g id="Line_32">
        <line x1="865.5" y1="382.23077" x2="1030" y2="375.23077" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8.0,8.0" stroke-width="2"/>
      </g>
    </g>
  </g>
</svg>


3. 使用 `fetch` 命令获取github远程仓库代码到本地

   > 通过 `git fetch github` 获取github远程仓库上的所有分支及tag
   >
   > 如我们需要获取指定分支（如：alpha分支），也可以通过 `git fetch github alpha:refs/remotes/github/alpha` 只拉取指定分支；
   >
   > 如果我们需要获取指定tag（如 v1.3.3），可通过 `git fetch github v1.3.3:refs/tagg/v1.3.3` 只拉取指定tag；


<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="285 616.5008 903 198.46154" width="903" height="198.46154">
  <defs>
    <font-face font-family="Helvetica" font-size="16" units-per-em="1000" underline-position="-75.68359" underline-thickness="49.316406" slope="0" x-height="522.9492" cap-height="717.28516" ascent="770.0195" descent="-229.98047" font-weight="400">
      <font-face-src>
        <font-face-name name="Helvetica"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="16" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="400">
      <font-face-src>
        <font-face-name name="PingFangSC-Regular"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Courier New" font-size="16" panose-1="2 7 3 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="41.015625" slope="0" x-height="422.85156" cap-height="571.28906" ascent="832.5195" descent="-300.29297" font-weight="400">
      <font-face-src>
        <font-face-name name="CourierNewPSMT"/>
      </font-face-src>
    </font-face>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="StickArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-6 -3 7 6" markerWidth="7" markerHeight="6" color="black">
      <g>
        <path d="M -4.8 0 L 0 0 M 0 1.8 L -4.8 0 L 0 -1.8" fill="none" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
  </defs>
  <metadata> Produced by OmniGraffle 7.18.4\n2021-03-23 06:35:35 +0000</metadata>
  <g id="Canvas_1" stroke="none" fill-opacity="1" fill="none" stroke-opacity="1" stroke-dasharray="none">
    <title>Canvas 1</title>
    <g id="Canvas_1_Layer_1">
      <title>Layer 1</title>
      <g id="Group_57">
        <title>General - Internet</title>
        <g id="Group_59">
          <g id="Graphic_61">
            <path d="M 443 757.2991 L 443 764.4809 C 443 777.4979 428.63636 790.9638 411.1307 790.9638 L 316.8693 790.9638 C 299.1392 790.9638 285 777.7224 285 764.4809 L 285 757.2991 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_60">
            <path d="M 345.82102 687.5008 C 362.20455 687.5008 376.34375 697.1513 382.62784 711.2905 C 385.9943 709.0462 389.80966 707.6996 394.2983 707.6996 C 405.5199 707.6996 414.49716 716.4525 414.7216 727.4496 C 430.65625 728.7962 443 744.0576 443 756.4013 L 443 759.0945 C 443 772.336 428.63636 785.5775 410.90625 785.5775 L 316.8693 785.5775 C 299.1392 785.5775 285 772.336 285 759.0945 L 285 756.4013 C 285 746.3019 293.5284 732.3871 305.4233 729.02065 C 305.4233 728.5718 305.4233 728.34736 305.4233 727.8985 C 305.4233 705.4553 323.37784 687.5008 345.82102 687.5008 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_58">
          <text transform="translate(336.4865 792.9638)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">GitHub</tspan>
          </text>
        </g>
      </g>
      <g id="Group_62">
        <title>General - Internet</title>
        <g id="Group_64">
          <g id="Graphic_66">
            <path d="M 1188 724.2983 L 1188 731.4801 C 1188 744.4972 1173.6364 757.9631 1156.1307 757.9631 L 1061.8693 757.9631 C 1044.1392 757.9631 1030 744.7216 1030 731.4801 L 1030 724.2983 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_65">
            <path d="M 1090.821 654.5 C 1107.2045 654.5 1121.3438 664.1506 1127.6278 678.2898 C 1130.9943 676.04545 1134.8097 674.6989 1139.2983 674.6989 C 1150.5199 674.6989 1159.4972 683.4517 1159.7216 694.4489 C 1175.6562 695.79545 1188 711.0568 1188 723.4006 L 1188 726.09375 C 1188 739.3352 1173.6364 752.5767 1155.9062 752.5767 L 1061.8693 752.5767 C 1044.1392 752.5767 1030 739.3352 1030 726.09375 L 1030 723.4006 C 1030 713.3011 1038.5284 699.3864 1050.4233 696.0199 C 1050.4233 695.571 1050.4233 695.3466 1050.4233 694.8977 C 1050.4233 672.45455 1068.3778 654.5 1090.821 654.5 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_63">
          <text transform="translate(1085.4865 759.9631)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">Gitlab</tspan>
          </text>
        </g>
      </g>
      <g id="Group_67">
        <title>Mobile Services - SNS - Topic</title>
        <g id="Group_69">
          <title>Layer_1</title>
          <g id="Group_82">
            <g id="Graphic_83">
              <rect x="586.5" y="745.27" width="279" height="47.69231" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_80">
            <g id="Graphic_81">
              <rect x="586.5" y="690.7645" width="279" height="43.263736" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_78">
            <g id="Graphic_79">
              <path d="M 865.1593 667.5997 L 865.1593 676.11615 L 586.5 676.11615 L 586.5 667.5997 L 746.95055 621.27 Z" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_76">
            <g id="Graphic_77">
              <rect x="586.5" y="616.5008" width="279" height="51.0989" fill="#ad688b"/>
              <text transform="translate(591.5 631.0502)" fill="white">
                <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="white" x="102.5" y="17">本地仓库</tspan>
              </text>
            </g>
          </g>
          <g id="Group_74">
            <g id="Graphic_75">
              <rect x="586.5" y="682.9293" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Group_72">
            <g id="Graphic_73">
              <rect x="586.5" y="741.8634" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Graphic_71">
            <rect x="595.35714" y="691.7865" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 694.8262)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="73.91253" y="15">remotes/origin</tspan>
            </text>
          </g>
          <g id="Graphic_70">
            <rect x="595.35714" y="751.0612" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 754.1009)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="71.23253" y="15">remotes/github</tspan>
            </text>
          </g>
        </g>
        <g id="Graphic_68">
          <text transform="translate(649.1875 794.9623)" fill="black">
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="0" y="13">git fetch github</tspan>
          </text>
        </g>
      </g>
      <g id="Line_84">
        <line x1="573.6002" y1="751.4317" x2="443" y2="750.7323" marker-start="url(#StickArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_85">
        <line x1="865.5" y1="715.7315" x2="1030" y2="717.7315" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8.0,8.0" stroke-width="2"/>
      </g>
    </g>
  </g>
</svg>




4. 将上一步拉取的github远程仓库上的分支/tag推送到gitlab远程仓库的指定分支；

   > 推送分支到gitlab：`git push origin refs/remotes/github/alpha:alpha` 
   >
   > 推送tag到github：`git push origin refs/tags/v1.3.3:v1.3.3`

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="285 956 903 234.46154" width="903" height="234.46154">
  <defs>
    <font-face font-family="Helvetica" font-size="16" units-per-em="1000" underline-position="-75.68359" underline-thickness="49.316406" slope="0" x-height="522.9492" cap-height="717.28516" ascent="770.0195" descent="-229.98047" font-weight="400">
      <font-face-src>
        <font-face-name name="Helvetica"/>
      </font-face-src>
    </font-face>
    <font-face font-family="PingFang SC" font-size="16" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.0021" descent="-340.0007" font-weight="400">
      <font-face-src>
        <font-face-name name="PingFangSC-Regular"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Helvetica Neue" font-size="16" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <font-face font-family="Courier New" font-size="16" panose-1="2 7 3 9 2 2 5 2 4 4" units-per-em="1000" underline-position="-232.91016" underline-thickness="41.015625" slope="0" x-height="422.85156" cap-height="571.28906" ascent="832.5195" descent="-300.29297" font-weight="400">
      <font-face-src>
        <font-face-name name="CourierNewPSMT"/>
      </font-face-src>
    </font-face>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -3 7 6" markerWidth="7" markerHeight="6" color="black">
      <g>
        <path d="M 4.8 0 L 0 -1.8 L 0 1.8 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
  </defs>
  <metadata> Produced by OmniGraffle 7.18.4\n2021-03-23 06:34:36 +0000</metadata>
  <g id="Canvas_1" stroke="none" fill-opacity="1" fill="none" stroke-opacity="1" stroke-dasharray="none">
    <title>Canvas 1</title>
    <g id="Canvas_1_Layer_1">
      <title>Layer 1</title>
      <g id="Group_87">
        <title>General - Internet</title>
        <g id="Group_89">
          <g id="Graphic_91">
            <path d="M 443 1096.7983 L 443 1103.9801 C 443 1116.9972 428.63636 1130.4631 411.1307 1130.4631 L 316.8693 1130.4631 C 299.1392 1130.4631 285 1117.2216 285 1103.9801 L 285 1096.7983 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_90">
            <path d="M 345.82102 1027 C 362.20455 1027 376.34375 1036.6506 382.62784 1050.7898 C 385.9943 1048.5455 389.80966 1047.1989 394.2983 1047.1989 C 405.5199 1047.1989 414.49716 1055.9517 414.7216 1066.9489 C 430.65625 1068.2955 443 1083.5568 443 1095.9006 L 443 1098.5938 C 443 1111.8352 428.63636 1125.0767 410.90625 1125.0767 L 316.8693 1125.0767 C 299.1392 1125.0767 285 1111.8352 285 1098.5938 L 285 1095.9006 C 285 1085.8011 293.5284 1071.8864 305.4233 1068.5199 C 305.4233 1068.071 305.4233 1067.8466 305.4233 1067.3977 C 305.4233 1044.9545 323.37784 1027 345.82102 1027 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_88">
          <text transform="translate(336.4865 1132.4631)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">GitHub</tspan>
          </text>
        </g>
      </g>
      <g id="Group_92">
        <title>General - Internet</title>
        <g id="Group_94">
          <g id="Graphic_96">
            <path d="M 1188 1063.7975 L 1188 1070.9793 C 1188 1083.9964 1173.6364 1097.4623 1156.1307 1097.4623 L 1061.8693 1097.4623 C 1044.1392 1097.4623 1030 1084.2208 1030 1070.9793 L 1030 1063.7975 Z" fill="#7d7c7c"/>
          </g>
          <g id="Graphic_95">
            <path d="M 1090.821 993.9992 C 1107.2045 993.9992 1121.3438 1003.6498 1127.6278 1017.789 C 1130.9943 1015.5447 1134.8097 1014.1981 1139.2983 1014.1981 C 1150.5199 1014.1981 1159.4972 1022.951 1159.7216 1033.9481 C 1175.6562 1035.2947 1188 1050.556 1188 1062.8998 L 1188 1065.593 C 1188 1078.8345 1173.6364 1092.076 1155.9062 1092.076 L 1061.8693 1092.076 C 1044.1392 1092.076 1030 1078.8345 1030 1065.593 L 1030 1062.8998 C 1030 1052.8004 1038.5284 1038.8856 1050.4233 1035.5191 C 1050.4233 1035.0703 1050.4233 1034.8458 1050.4233 1034.397 C 1050.4233 1011.9538 1068.3778 993.9992 1090.821 993.9992 Z" fill="#d2d3d3"/>
          </g>
        </g>
        <g id="Graphic_93">
          <text transform="translate(1085.4865 1099.4623)" fill="black">
            <tspan font-family="Helvetica" font-size="16" font-weight="400" fill="black" x="0" y="15">Gitlab</tspan>
          </text>
        </g>
      </g>
      <g id="Group_97">
        <title>Mobile Services - SNS - Topic</title>
        <g id="Group_99">
          <title>Layer_1</title>
          <g id="Group_112">
            <g id="Graphic_113">
              <rect x="586.5" y="1084.7692" width="279" height="47.69231" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_110">
            <g id="Graphic_111">
              <rect x="586.5" y="1030.2637" width="279" height="43.263736" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_108">
            <g id="Graphic_109">
              <path d="M 865.1593 1007.0989 L 865.1593 1015.6154 L 586.5 1015.6154 L 586.5 1007.0989 L 746.95055 960.7692 Z" fill="#692f56"/>
            </g>
          </g>
          <g id="Group_106">
            <g id="Graphic_107">
              <rect x="586.5" y="956" width="279" height="51.0989" fill="#ad688b"/>
              <text transform="translate(591.5 970.5495)" fill="white">
                <tspan font-family="PingFang SC" font-size="16" font-weight="400" fill="white" x="102.5" y="17">本地仓库</tspan>
              </text>
            </g>
          </g>
          <g id="Group_104">
            <g id="Graphic_105">
              <rect x="586.5" y="1022.4286" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Group_102">
            <g id="Graphic_103">
              <rect x="586.5" y="1081.3626" width="279" height="42.58242" fill="#ad688b"/>
            </g>
          </g>
          <g id="Graphic_101">
            <rect x="595.35714" y="1031.2857" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 1034.3255)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="73.91253" y="15">remotes/origin</tspan>
            </text>
          </g>
          <g id="Graphic_100">
            <rect x="595.35714" y="1090.5604" width="260.94505" height="24.527473" fill="white"/>
            <text transform="translate(600.35714 1093.6002)" fill="black">
              <tspan font-family="Helvetica Neue" font-size="16" font-weight="400" fill="black" x="71.23253" y="15">remotes/github</tspan>
            </text>
          </g>
        </g>
        <g id="Graphic_98">
          <text transform="translate(572.375 1134.4615)" fill="black">
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="76.05078" y="13">git push origin </tspan>
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="52.046875" y="31">refs/remotes/github/</tspan>
            <tspan font-family="Courier New" font-size="16" font-weight="400" fill="black" x="95.25391" y="49">alpha:alpha </tspan>
          </text>
        </g>
      </g>
      <g id="Line_114">
        <line x1="586.5" y1="1091" x2="443" y2="1090.2315" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8.0,8.0" stroke-width="2"/>
      </g>
      <g id="Line_115">
        <line x1="870.5" y1="1034.1538" x2="1017.2329" y2="1055.3836" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
    </g>
  </g>
</svg>






## 移动中心同步脚本说明

> 同步脚本gitlab地址： [syncCode.sh](http://172.17.0.205/Development/Mobile/tools/all/-/blob/master/scripts/sync-code/syncCode.sh)

### 用法说明

```shell
source syncCode.sh
WORKDIR=/Users/hanlyjiang/Wksp/work/gitlab/MOA-auto-sync
# 移动端代码同步 
sync_work_repo_branch https://chuanqi900:stgzsz821006@github.com/3930615/moa-release-geo.git $WORKDIR/moa-release-geo-github.git git@172.17.0.205:GeoPanel/MobileCenter/geopanel-android.git 
# 后台代码同步
sync_work_repo_branch https://chuanqi900:stgzsz821006@github.com/3930615/moa-release.git $WORKDIR/moa-release-github.git git@172.17.0.205:GeoPanel/MobileCenter/geopanel-mobile-server.git
```

执行如上同步命令之后，会将从链动github仓库获取的所有分支及tag推送到gitlab仓库；





# GeoPanel-移动中心-ARM镜像制作-成果链接

本节介绍移动中心国产化的构建成果，请阅读以下文章：

* [《移动中心国产化-ARM迁移基本思路》](https://shimo.im/docs/0l3NVKX0BgflYN3R/)
* [《移动中心国产化-MOA服务迁移记录》](https://shimo.im/docs/VHgRHrXYq9vQkX3Q/ )
* [《移动中心国产化-实时音视频服务迁移记录》](https://shimo.im/docs/gO3ox1XzJlHlVzqD/ )

相关成果已上传到gitlab仓库的如下分支：

* [arm/0.5.0-dev](http://zh-gitlab.geostar.com.cn/GeoPanel/MobileCenter/geopanel-mobile-server/-/tree/arm/0.5.0-dev)
* [arm/v0.3.0-im](http://zh-gitlab.geostar.com.cn/GeoPanel/MobileCenter/geopanel-mobile-server/-/tree/arm/v0.3.0-im)



# GeoPanel-移动中心-APP相关

本小节介绍移动中心APP相关内容，主要包括如下内容：

* 项目仓库介绍
* 注意点介绍：主要是我方进行的一些修改，对修改点有所了解，以便后续需要合并代码时减少可能由合并导致的错误。

## 项目仓库介绍

### 项目地址

* 项目仓库地址： http://172.17.0.205/GeoPanel/MobileCenter/geopanel-android
* 相关文档： 

### 仓库分支及Tag说明

#### 分支说明

此仓库同步了链动的代码分支，并新建新的分支对链动代码进行修改，具体分支跟踪关系如下：


<svg width="834px" height="587px" viewBox="0 0 834 587" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="移动中心APP分支图" transform="translate(-196.000000, -78.000000)">
            <g id="export" transform="translate(197.000000, 79.000000)">
                <g id="Github链动分支">
                    <g id="架构图/带标题栏框">
                        <g id="编组" stroke-linejoin="round">
                            <g id="分组">
                                <rect id="边框栏" stroke="#FF9500" x="0.5" y="0.5" width="283" height="584"></rect>
                                <rect id="标题栏" fill="#FF9500" x="0" y="0" width="284" height="26"></rect>
                            </g>
                        </g>
                        <text id="标题" font-family="PingFangSC-Regular, PingFang SC" font-size="16" font-weight="normal" letter-spacing="0.0959999995" fill="#FFFFFF">
                            <tspan x="84.8480622" y="17">链动Github仓库</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份-7" transform="translate(20.000000, 499.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-app-workbench</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="157.85841" y="13.2608696">小应用-工作台</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份-6" transform="translate(20.000000, 434.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-app-task</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="169.93041" y="13.2608696">小应用-任务</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份-5" transform="translate(20.000000, 369.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-app-calendar</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="169.93041" y="13.2608696">小应用-日历</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份-4" transform="translate(20.000000, 304.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-app-appmarket</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="145.78641" y="13.2608696">小应用-应用市场</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份-3" transform="translate(20.000000, 239.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-app-addressbook</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="157.85841" y="13.2608696">小应用-通讯录</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份-2" transform="translate(20.000000, 174.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-web-imsdk</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="198.29841" y="13.2608696">imsdk</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支备份" transform="translate(20.000000, 109.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-client-android-module</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="174.31041" y="13.2608696">APP库模块</tspan>
                        </text>
                    </g>
                    <g id="分支/直线分支" transform="translate(20.000000, 44.000000)">
                        <line x1="0.603462208" y1="20.5434783" x2="234.508368" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                        <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="0" y="13.2608696">moa-client-android</tspan>
                        </text>
                        <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="210.52641" y="13.2608696">APP</tspan>
                        </text>
                    </g>
                </g>
                <g id="GeoStar仓库备份" transform="translate(370.000000, 0.000000)">
                    <g id="架构图/带标题栏框备份">
                        <g id="编组" stroke-linejoin="round">
                            <g id="分组">
                                <rect id="边框栏" stroke="#FF9500" x="0.5" y="0.5" width="461" height="583"></rect>
                                <rect id="标题栏" fill="#FF9500" x="0" y="0" width="462" height="26"></rect>
                            </g>
                        </g>
                        <text id="标题" font-family="PingFangSC-Regular, PingFang SC" font-size="16" font-weight="normal" letter-spacing="0.0959999995" fill="#FFFFFF">
                            <tspan x="158.956777" y="17">GeoStar Gitlab仓库</tspan>
                        </text>
                    </g>
                    <g id="链动原分支" transform="translate(18.000000, 44.000000)">
                        <g id="分支/直线分支备份-8" transform="translate(0.000000, 455.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-app-workbench</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="155.172218" y="13.2608696">小应用-工作台</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-9" transform="translate(0.000000, 390.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-app-task</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="167.244218" y="13.2608696">小应用-任务</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-10" transform="translate(0.000000, 325.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-app-calendar</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="167.244218" y="13.2608696">小应用-日历</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-11" transform="translate(0.000000, 260.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-app-appmarket</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="143.100218" y="13.2608696">小应用-应用市场</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-12" transform="translate(0.000000, 195.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-app-addressbook</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="155.172218" y="13.2608696">小应用-通讯录</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-13" transform="translate(0.000000, 130.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-web-imsdk</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="195.612218" y="13.2608696">imsdk</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-14" transform="translate(0.000000, 65.000000)">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-client-android-module</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="171.624218" y="13.2608696">APP库模块</tspan>
                            </text>
                        </g>
                        <g id="分支/直线分支备份-15">
                            <line x1="0.595758436" y1="20.5434783" x2="231.514644" y2="20.5434783" id="分支直线" stroke="#979797" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></line>
                            <text id="分支名称" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="0" y="13.2608696">moa-client-android</tspan>
                            </text>
                            <text id="说明" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                                <tspan x="207.840218" y="13.2608696">APP</tspan>
                            </text>
                        </g>
                    </g>
                    <g id="编组" transform="translate(115.000000, 67.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="172.132" y="16.5">geo-client-android/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份" transform="translate(115.000000, 129.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="93.772" y="16.5">geo-moa-client-android-module/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份-2" transform="translate(115.000000, 196.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="161.584" y="16.5">geo-moa-web-imsdk/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份-3" transform="translate(118.000000, 259.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="155.548" y="16.5">geo-app-addressbook/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份-4" transform="translate(115.000000, 326.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="166.204" y="16.5">geo-app-appmarket/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份-5" transform="translate(115.000000, 393.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="144.148" y="16.5">geo-app-calendar/nskst/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份-6" transform="translate(115.000000, 456.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="171.112" y="16.5">geo-app-task/nskst/master</tspan>
                        </text>
                    </g>
                    <g id="分支/派生备份-7" transform="translate(115.000000, 519.500000)">
                        <path d="M-5.68434189e-14,0 L-5.68434189e-14,7.33908739 C-5.22101777e-14,16.1622639 7.14257577,23.3201537 15.965732,23.3390507 L324.567554,24 L324.567554,24" id="路径-2" stroke="#F7B500" stroke-width="5" stroke-linecap="round"></path>
                        <text id="geo-client-android/m" font-family="NotoSerifCJKsc-Regular, Noto Serif CJK SC" font-size="12" font-weight="normal" letter-spacing="0.0719999996" fill="#000000" fill-opacity="0.85">
                            <tspan x="128.956" y="16.5">geo-app-workbench/nskst/master</tspan>
                        </text>
                    </g>
                </g>
                <g id="连接线" transform="translate(259.000000, 63.000000)" fill="#7A7A7A" fill-rule="nonzero">
                    <path id="直线-2" d="M0.188059701,-4 C2.5043073,-4 4.41182503,-2.25001939 4.6605859,-8.51613636e-05 L9.6880597,0 L9.6880597,1 L4.66051705,1.00070744 C4.41147331,3.25034205 2.50409376,5 0.188059701,5 C-2.29722167,5 -4.3119403,2.98528137 -4.3119403,0.5 C-4.3119403,-1.98528137 -2.29722167,-4 0.188059701,-4 Z M117.31194,-4 L126.31194,0.5 L117.31194,5 L117.311,1 L113.68806,1 L113.68806,0 L117.311,0 L117.31194,-4 Z M19.6880597,0 L19.6880597,1 L13.6880597,1 L13.6880597,0 L19.6880597,0 Z M29.6880597,0 L29.6880597,1 L23.6880597,1 L23.6880597,0 L29.6880597,0 Z M39.6880597,0 L39.6880597,1 L33.6880597,1 L33.6880597,0 L39.6880597,0 Z M49.6880597,0 L49.6880597,1 L43.6880597,1 L43.6880597,0 L49.6880597,0 Z M59.6880597,0 L59.6880597,1 L53.6880597,1 L53.6880597,0 L59.6880597,0 Z M69.6880597,0 L69.6880597,1 L63.6880597,1 L63.6880597,0 L69.6880597,0 Z M79.6880597,0 L79.6880597,1 L73.6880597,1 L73.6880597,0 L79.6880597,0 Z M89.6880597,0 L89.6880597,1 L83.6880597,1 L83.6880597,0 L89.6880597,0 Z M99.6880597,0 L99.6880597,1 L93.6880597,1 L93.6880597,0 L99.6880597,0 Z M109.68806,0 L109.68806,1 L103.68806,1 L103.68806,0 L109.68806,0 Z"></path>
                    <path id="直线-2备份" d="M0.5,61 C2.81637876,61 4.72398135,62.7501788 4.97256844,65.000297 L10,65 L10,66 L4.97245735,66.0007074 C4.7234136,68.2503421 2.81603406,70 0.5,70 C-1.98528137,70 -4,67.9852814 -4,65.5 C-4,63.0147186 -1.98528137,61 0.5,61 Z M117.31194,61 L126.31194,65.5 L117.31194,70 L117.311,66 L114,66 L114,65 L117.311,65 L117.31194,61 Z M20,65 L20,66 L14,66 L14,65 L20,65 Z M30,65 L30,66 L24,66 L24,65 L30,65 Z M40,65 L40,66 L34,66 L34,65 L40,65 Z M50,65 L50,66 L44,66 L44,65 L50,65 Z M60,65 L60,66 L54,66 L54,65 L60,65 Z M70,65 L70,66 L64,66 L64,65 L70,65 Z M80,65 L80,66 L74,66 L74,65 L80,65 Z M90,65 L90,66 L84,66 L84,65 L90,65 Z M100,65 L100,66 L94,66 L94,65 L100,65 Z M110,65 L110,66 L104,66 L104,65 L110,65 Z"></path>
                    <path id="直线-2备份-2" d="M0.5,127 C2.81637876,127 4.72398135,128.750179 4.97256844,131.000297 L10,131 L10,132 L4.97245735,132.000707 C4.7234136,134.250342 2.81603406,136 0.5,136 C-1.98528137,136 -4,133.985281 -4,131.5 C-4,129.014719 -1.98528137,127 0.5,127 Z M117.31194,127 L126.31194,131.5 L117.31194,136 L117.311,132 L114,132 L114,131 L117.311,131 L117.31194,127 Z M20,131 L20,132 L14,132 L14,131 L20,131 Z M30,131 L30,132 L24,132 L24,131 L30,131 Z M40,131 L40,132 L34,132 L34,131 L40,131 Z M50,131 L50,132 L44,132 L44,131 L50,131 Z M60,131 L60,132 L54,132 L54,131 L60,131 Z M70,131 L70,132 L64,132 L64,131 L70,131 Z M80,131 L80,132 L74,132 L74,131 L80,131 Z M90,131 L90,132 L84,132 L84,131 L90,131 Z M100,131 L100,132 L94,132 L94,131 L100,131 Z M110,131 L110,132 L104,132 L104,131 L110,131 Z"></path>
                    <path id="直线-2备份-3" d="M1.5,191 C3.81637876,191 5.72398135,192.750179 5.97256844,195.000297 L11,195 L11,196 L5.97245735,196.000707 C5.7234136,198.250342 3.81603406,200 1.5,200 C-0.985281374,200 -3,197.985281 -3,195.5 C-3,193.014719 -0.985281374,191 1.5,191 Z M117.31194,191 L126.31194,195.5 L117.31194,200 L117.311,196 L115,196 L115,195 L117.311,195 L117.31194,191 Z M21,195 L21,196 L15,196 L15,195 L21,195 Z M31,195 L31,196 L25,196 L25,195 L31,195 Z M41,195 L41,196 L35,196 L35,195 L41,195 Z M51,195 L51,196 L45,196 L45,195 L51,195 Z M61,195 L61,196 L55,196 L55,195 L61,195 Z M71,195 L71,196 L65,196 L65,195 L71,195 Z M81,195 L81,196 L75,196 L75,195 L81,195 Z M91,195 L91,196 L85,196 L85,195 L91,195 Z M101,195 L101,196 L95,196 L95,195 L101,195 Z M111,195 L111,196 L105,196 L105,195 L111,195 Z"></path>
                    <path id="直线-2备份-4" d="M0.482071855,257.000036 C2.79821908,256.990808 4.7126401,258.733051 4.97047097,260.981861 L9.99586739,260.962164 L9.99985142,261.962156 L4.97441669,261.982885 C4.73433754,264.233494 2.83394382,265.990737 0.517928145,265.999964 C-1.96733351,266.009866 -3.99006285,264.00319 -3.99996429,261.517928 C-4.00986573,259.032666 -2.00318979,257.009937 0.482071855,257.000036 Z M117.482139,256.5339 L126.499996,260.998008 L117.517996,265.533829 L117.501,261.533 L114.499022,261.545825 L113.999026,261.547817 L113.995042,260.547825 L114.495038,260.545833 L117.498,260.533 L117.482139,256.5339 Z M19.995788,260.922324 L19.9997721,261.922316 L13.9998197,261.94622 L13.9958356,260.946228 L19.995788,260.922324 Z M29.9957087,260.882483 L29.9996927,261.882475 L23.9997403,261.90638 L23.9957563,260.906387 L29.9957087,260.882483 Z M39.9956293,260.842643 L39.9996133,261.842635 L33.9996609,261.866539 L33.9956769,260.866547 L39.9956293,260.842643 Z M49.9955499,260.802803 L49.999534,261.802795 L43.9995816,261.826699 L43.9955976,260.826707 L49.9955499,260.802803 Z M59.9954706,260.762962 L59.9994546,261.762954 L53.9995022,261.786859 L53.9955182,260.786866 L59.9954706,260.762962 Z M69.9953912,260.723122 L69.9993752,261.723114 L63.9994229,261.747018 L63.9954388,260.747026 L69.9953912,260.723122 Z M79.9953118,260.683282 L79.9992959,261.683274 L73.9993435,261.707178 L73.9953595,260.707186 L79.9953118,260.683282 Z M89.9952325,260.643441 L89.9992165,261.643433 L83.9992641,261.667338 L83.9952801,260.667346 L89.9952325,260.643441 Z M99.9951531,260.603601 L99.9991372,261.603593 L93.9991848,261.627497 L93.9952007,260.627505 L99.9951531,260.603601 Z M109.995074,260.563761 L109.999058,261.563753 L103.999105,261.587657 L103.995121,260.587665 L109.995074,260.563761 Z"></path>
                    <path id="直线-2备份-5" d="M1.48192786,323.000036 C3.79794324,322.990735 5.71233408,324.732719 5.97041043,326.981335 L10.9958338,326.96186 L10.9998499,327.961852 L5.97453919,327.981737 C5.73499066,330.232835 3.83443222,331.990661 1.51807214,331.999964 C-0.967189189,332.009945 -2.98998274,330.003333 -2.99996371,327.518072 C-3.00994468,325.032811 -1.00333348,323.010017 1.48192786,323.000036 Z M117.481996,322.534173 L126.499996,326.997992 L117.518141,331.5341 L117.502,327.534 L115.499007,327.542177 L114.999011,327.544185 L114.994995,326.544193 L115.494991,326.542185 L117.497,326.534 L117.481996,322.534173 Z M20.9957532,326.9217 L20.9997692,327.921692 L14.9998176,327.945788 L14.9958016,326.945796 L20.9957532,326.9217 Z M30.9956726,326.881539 L30.9996886,327.881531 L24.999737,327.905628 L24.9957209,326.905636 L30.9956726,326.881539 Z M40.9955919,326.841379 L40.999608,327.841371 L34.9996563,327.865467 L34.9956403,326.865475 L40.9955919,326.841379 Z M50.9955113,326.801219 L50.9995273,327.801211 L44.9995757,327.825307 L44.9955597,326.825315 L50.9955113,326.801219 Z M60.9954306,326.761058 L60.9994467,327.76105 L54.9994951,327.785147 L54.995479,326.785155 L60.9954306,326.761058 Z M70.99535,326.720898 L70.999366,327.72089 L64.9994144,327.744986 L64.9953984,326.744994 L70.99535,326.720898 Z M80.9952693,326.680738 L80.9992854,327.68073 L74.9993338,327.704826 L74.9953177,326.704834 L80.9952693,326.680738 Z M90.9951887,326.640578 L90.9992047,327.640569 L84.9992531,327.664666 L84.9952371,326.664674 L90.9951887,326.640578 Z M100.995108,326.600417 L100.999124,327.600409 L94.9991725,327.624505 L94.9951564,326.624513 L100.995108,326.600417 Z M110.995027,326.560257 L110.999043,327.560249 L104.999092,327.584345 L104.995076,326.584353 L110.995027,326.560257 Z"></path>
                    <path id="直线-2备份-6" d="M1.5,387 C3.81637876,387 5.72398135,388.750179 5.97256844,391.000297 L11,391 L11,392 L5.97245735,392.000707 C5.7234136,394.250342 3.81603406,396 1.5,396 C-0.985281374,396 -3,393.985281 -3,391.5 C-3,389.014719 -0.985281374,387 1.5,387 Z M117.31194,387 L126.31194,391.5 L117.31194,396 L117.311,392 L115,392 L115,391 L117.311,391 L117.31194,387 Z M21,391 L21,392 L15,392 L15,391 L21,391 Z M31,391 L31,392 L25,392 L25,391 L31,391 Z M41,391 L41,392 L35,392 L35,391 L41,391 Z M51,391 L51,392 L45,392 L45,391 L51,391 Z M61,391 L61,392 L55,392 L55,391 L61,391 Z M71,391 L71,392 L65,392 L65,391 L71,391 Z M81,391 L81,392 L75,392 L75,391 L81,391 Z M91,391 L91,392 L85,392 L85,391 L91,391 Z M101,391 L101,392 L95,392 L95,391 L101,391 Z M111,391 L111,392 L105,392 L105,391 L111,391 Z"></path>
                    <path id="直线-2备份-7" d="M0,451 C2.31637876,451 4.22398135,452.750179 4.47256844,455.000297 L9.5,455 L9.5,456 L4.47245735,456.000707 C4.2234136,458.250342 2.31603406,460 0,460 C-2.48528137,460 -4.5,457.985281 -4.5,455.5 C-4.5,453.014719 -2.48528137,451 0,451 Z M117.31194,451 L126.31194,455.5 L117.31194,460 L117.311,456 L113.5,456 L113.5,455 L117.311,455 L117.31194,451 Z M19.5,455 L19.5,456 L13.5,456 L13.5,455 L19.5,455 Z M29.5,455 L29.5,456 L23.5,456 L23.5,455 L29.5,455 Z M39.5,455 L39.5,456 L33.5,456 L33.5,455 L39.5,455 Z M49.5,455 L49.5,456 L43.5,456 L43.5,455 L49.5,455 Z M59.5,455 L59.5,456 L53.5,456 L53.5,455 L59.5,455 Z M69.5,455 L69.5,456 L63.5,456 L63.5,455 L69.5,455 Z M79.5,455 L79.5,456 L73.5,456 L73.5,455 L79.5,455 Z M89.5,455 L89.5,456 L83.5,456 L83.5,455 L89.5,455 Z M99.5,455 L99.5,456 L93.5,456 L93.5,455 L99.5,455 Z M109.5,455 L109.5,456 L103.5,456 L103.5,455 L109.5,455 Z"></path>
                </g>
            </g>
        </g>
    </g>
</svg>

由上面图可以看出，链动在一个仓库中通过分支分别存放了移动端Android源码，移动端APP库源码，imsdk及示例源码，还有5个基础H5小应用。

* 首先，我们完全同步链动的几个分支（`moa-xxx`）到我们的gitlab仓库；
* 然后，我们基于链动的几个分支，分别拉取了我们自己的分支进行修改，命名为 `geo-xxxx`

#### Tag管理

由于我们在一个仓库中放置了若干个模块，通过分支区分，在建立tag时，也需要相应的区分；另外由于链动也会在仓库中提交tag，所以我们需要对tag的命名作一定的约束，一般tag应将分支名称作为前缀，如：

* [geo-client-android-v1.2.22](http://172.17.0.205/GeoPanel/MobileCenter/geopanel-android/-/releases/geo-client-android-v1.2.22): 为android端的最新版本tag
* [geo-app-appmarket-v1.0.2](http://172.17.0.205/GeoPanel/MobileCenter/geopanel-android/-/releases/geo-app-appmarket-v1.0.2)： 为小应用的最新版本tag



**Android端版本tag说明**

Android端代码会对应多个地区的项目，如果为每个地区单独区分版本号，会造成主线版本管理混乱。

APP的版本号不与任何项目进行关联，打包时不论针对哪个项目/产品发包，只要发布了Release版本，就将版本号递增。如下图所示：

* 南山块事通发布版本时，版本号为 1.2.19 
* 洪山管理通时则将版本号设置为 1.2.20 

![image-20210406160652462](https://gitee.com/hanlyjiang/image-repo/raw/master/imgs/20210406160652.png)



## 重要修改说明

前面说过，我们的代码从链动分支拉取新分支进行了一些修改，这里主要介绍一些重要的修改点：

1. **打包配置逻辑调整（包括包名，签名，第三方服务账号的key等的修改）**
2. **UI界面样式调整；**
3. **迁移到AndroidX；**
4. **扩展cordova插件；**



### 打包配置修改

#### 不同项目的包配置区分

链动提供的版本中，包名为链动的包名，而我们需要将一个包应用到不同的项目之中，故需要对包名进行区分，同时还有对应的百度地图及三方推送等的账号也需要进行区分，故提取了一套配置方式，为了减少对链动原有代码文件的修改，我们的配置主要位于如下新增加的文件及目录中：

```shell
android
├── dist-config  -  不同项目的打包配置定义
│   └── moa-moa-geo-third-share.gradle
│   ├── hongshan_sgt_debug_wuhan.gradle
│   ├── hongshan_sgt_release.gradle
│   ├── jiujiang_egt_debug_wuhan.gradle
│   ├── jiujiang_egt_official.gradle
│   ├── ld_test.gradle
│   ├── luohu_kst_official.gradle
│   ├── moa_jiujiang_wuhan_fixed.gradle
│   ├── moa_wxtest_wuhan_195.gradle
│   ├── mobile_center_aliyun.gradle
│   ├── nskst_official.gradle
│   ├── nskst_official_demonstration.gradle
│   ├── nskst_official_pre_release.gradle
│   ├── nskst_test_internet_shenzhen.gradle
│   ├── nskst_test_shenzhen.gradle
│   ├── nskst_test_wuhan_fixed.gradle
│   ├── nskst_test_wuhan_jianghang.gradle
│   ├── nskst_test_wuhan_open.gradle
│   ├── nskst_test_wuhan_private.gradle
│   ├── nskst_test_wuhan_sr.gradle
│   ├── nskst_test_wuhan_wsr.gradle
│   ├── rongjiang_kst_official.gradle
│   ├── shenzhen_shi_official.gradle
│   └── template.gradle
├── dist-config.gradle - 定义配置dist-config目录中配置的加载逻辑 
```

* 引入dist-config.gradle：(platforms/android/app/build.gradle)

  ```groovy
  apply from: '../dist-config.gradle'
  ```

> 具体的每个地方的配置，由于已经有接触并配置过，不再赘述

#### 签名配置

* 设置debug和release相同签名: (platforms/android/app/build.gradle)

  ```groovy
   buildTypes {
          release {
              minifyEnabled true
              zipAlignEnabled true  //压缩优化
              shrinkResources true  //移出无用资源
              proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
              signingConfig signingConfigs.moasign
          }
          debug {
              signingConfig signingConfigs.moasign
          }
  }
  ```

* 签名信息替换：(platforms/android/gradle.properties)(链动未提供其签名信息，所以我们自己生成了签名并替换链动的配置)

  ```groovy
  # keyAlias
  MOA_RELEASE_KEY_ALIAS=geostar-moa
  #keyPassword
  MOA_RELEASE_KEY_PASSWORD=a7cbf71f1019635fc794df0e1abc3e79
  #storeFile
  MOA_RELEASE_STORE_FILE=../geostar.moa.jks
  #storePassword
  MOA_RELEASE_STORE_PASSWORD=9b1d0e07ee4bdb03e2249bf57f6974a4
  ```

  

### 迁移到AndroidX

google最初发布了support库（如：v4，v7，design），之前很多控件都是位于这些库中的（如：RecyclerView，CardView等），后统一为androidx的库，旧的support库不再维护，为了能够避免后续开发功能时引入的某些库无法使用，故将项目其迁移到androidx。

迁移androidx的修改可以查看Gitlab上的提交：[migrate： 迁移到AndroidX (adc773ca) · 提交 · GeoPanel / 移动中心 / 移动平台-Android端 · GitLab](http://172.17.0.205/GeoPanel/MobileCenter/geopanel-android/-/commit/adc773ca06c807ec0cb271fb900e72bff48ae5ee)

迁移使用androidstudio提供的迁移命令，会自动将项目中的原先使用support库的部分替换为对应的androidx库的用法，同时在编译时也会对依赖库中jar里面使用的support库进行处理。

### UI界面样式调整

在MOA最初应用到南山项目时，按照南山的UI界面进行了一波界面调整。主要包括：

* 登录界面替换；
* 所有native页面的顶部样式；
* 基础小应用的顶部样式及界面样式；



### 扩展cordova插件

APP整体的架构如下：

<svg width="423px" height="345px" viewBox="0 0 423 345" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="移动中心APP架构" transform="translate(-219.000000, -162.000000)">
            <g id="架构图/带标题栏框" transform="translate(219.000000, 429.000000)">
                <g id="分组">
                    <rect id="边框栏" stroke="#FF9500" x="0.5" y="0.5" width="422" height="77"></rect>
                    <rect id="标题栏" fill="#FF9500" x="0" y="0" width="423" height="26"></rect>
                </g>
                <text id="标题" font-family="PingFangSC-Regular, PingFang SC" font-size="16" font-weight="normal" letter-spacing="0.0959999995" fill="#FFFFFF">
                    <tspan x="179.034036" y="17">系统能力</tspan>
                </text>
            </g>
            <g id="架构图/带标题栏框备份" transform="translate(219.000000, 340.000000)">
                <g id="分组">
                    <rect id="边框栏" stroke="#FF9500" x="0.5" y="0.5" width="422" height="77"></rect>
                    <rect id="标题栏" fill="#FF9500" x="0" y="0" width="423" height="26"></rect>
                </g>
                <text id="标题" font-family="PingFangSC-Regular, PingFang SC" font-size="16" font-weight="normal" letter-spacing="0.0959999995" fill="#FFFFFF">
                    <tspan x="179.458036" y="17">APP能力</tspan>
                </text>
            </g>
            <g id="架构图/带标题栏框备份-2" transform="translate(219.000000, 251.000000)">
                <g id="分组">
                    <rect id="边框栏" stroke="#FF9500" x="0.5" y="0.5" width="422" height="77"></rect>
                    <rect id="标题栏" fill="#FF9500" x="0" y="0" width="423" height="26"></rect>
                </g>
                <text id="标题" font-family="PingFangSC-Regular, PingFang SC" font-size="16" font-weight="normal" letter-spacing="0.0959999995" fill="#FFFFFF">
                    <tspan x="149.010036" y="17">cordova插件框架</tspan>
                </text>
            </g>
            <g id="架构图/带标题栏框备份-3" transform="translate(219.000000, 162.000000)">
                <g id="分组">
                    <rect id="边框栏" stroke="#FF9500" x="0.5" y="0.5" width="422" height="77"></rect>
                    <rect id="标题栏" fill="#FF9500" x="0" y="0" width="423" height="26"></rect>
                </g>
                <text id="标题" font-family="PingFangSC-Regular, PingFang SC" font-size="16" font-weight="normal" letter-spacing="0.0959999995" fill="#FFFFFF">
                    <tspan x="176.426036" y="17">H5小应用</tspan>
                </text>
            </g>
            <g id="架构图/单个模块" transform="translate(228.000000, 468.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="15.9717835" y="12">相机</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-6" transform="translate(228.000000, 379.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="10.4112835" y="12">通讯录</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-6" transform="translate(228.000000, 201.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="10.4112835" y="12">通讯录</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-16" transform="translate(294.000000, 201.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="15.9717835" y="12">日程</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-17" transform="translate(360.000000, 201.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="15.9717835" y="12">任务</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-18" transform="translate(426.000000, 201.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="10.4112835" y="12">工作台</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-12" transform="translate(228.000000, 290.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="402.608247" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="66.7353762" y="12">将系统能力及APP能力以JS接口的方式暴露给H5小应用</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-7" transform="translate(294.000000, 379.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="15.9717835" y="12">消息</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-14" transform="translate(491.000000, 201.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="4.8507835" y="12">应用市场</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-8" transform="translate(360.000000, 379.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="4.8507835" y="12">镜像管理</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-15" transform="translate(558.000000, 201.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="73.742268" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="9.82636597" y="12">其他小应用</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-9" transform="translate(426.000000, 379.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="69.7560137" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="7.81949312" y="12">数据库存储</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-10" transform="translate(509.000000, 379.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="69.7560137" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="13.3799931" y="12">文件存储</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-11" transform="translate(592.000000, 379.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="39.8591065" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="9.44944673" y="12">其他</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份" transform="translate(294.000000, 468.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="15.9717835" y="12">文件</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-2" transform="translate(360.000000, 468.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="69.7560137" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="7.81949312" y="12">方向传感器</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-3" transform="translate(443.000000, 468.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="52.814433" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="15.5702835" y="12">GPS</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-4" transform="translate(509.000000, 468.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="60.7869416" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="8.8645292" y="12">网络请求</tspan>
                </text>
            </g>
            <g id="架构图/单个模块备份-5" transform="translate(583.000000, 468.000000)">
                <rect id="矩形" stroke="#C0C0C0" fill="#EEEEEE" x="0.5" y="0.5" width="48.8281787" height="23"></rect>
                <text id="模块名称" font-family="PingFangSC-Semibold, PingFang SC" font-size="11" font-weight="500" letter-spacing="0.121000004" fill="#151515" fill-opacity="0.88378138">
                    <tspan x="13.9649106" y="12">其他</tspan>
                </text>
            </g>
        </g>
    </g>
</svg>

业务的开发主要以H5开发为主，为此APP需要将原生的能力提供为JS的API，链动提供了很多API接口，不过后续发现部分接口有BUG，或者项目上有新的需求，为此我们对cordova插件做了一些修改及扩展，主要包括如下内容：

* [二维码扫描](http://172.17.0.208:12345/moa-doc/api/barcode.html)功能扩展，支持更多自定义选项
* [设置](http://172.17.0.208:12345/moa-doc/api/private-settings.html)功能扩展，添加若干设置项API，包括清除IM消息，打开消息设置界面等
* [拍摄视频限制时长，视频选择添加时长及大小限制](http://172.17.0.208:12345/moa-doc/api/media.html#app-video-getvideo)
* [拍照支持添加水印](http://172.17.0.208:12345/moa-doc/api/photo.html#app-picture-camera)
* [增加附件查看接口](http://172.17.0.208:12345/moa-doc/api/filebrowser.html#文件浏览器)
* [添加手势密码保护相关设置](http://172.17.0.208:12345/moa-doc/api/private-settings.html#app-settings-opengestureunlocksetting-打开内置的手势解锁设置页面)
* [添加第三方分享接口](http://172.17.0.208:12345/moa-doc/api/third-share.html#分享接口-app-share)
* [添加打开微信小程序接口](http://172.17.0.208:12345/moa-doc/api/third-share.html#打开微信小程序-app-weixin-openminiprogram)
* [添加启用引导页面的接口](http://172.17.0.208:12345/moa-doc/api/private-settings.html#)

我方添加的接口都在 `cd plugins_dev/repo/cordova-plugin-moa-geo-app ` 目录中，具体细节也可以在git log中筛选 “H5”，或者针对此目录相关的文件查看历史修改记录，定位具体的commit进行了解。



关于插件开发的方式，之前已有接触，不在赘述，仅整理一些文档：

* https://shimo.im/docs/XRkgJOPwzmtrFbqM/ 《Cordova相关-README》，可复制链接后用石墨文档 App 或小程序打开
* https://shimo.im/docs/ne3VVlGLWQf8FB3b/ 《MOA中的Cordova插件开发 - 工作流程篇》，可复制链接后用石墨文档 App 或小程序打开
* [Gitlab-插件JS合并readme](http://172.17.0.205/GeoPanel/MobileCenter/geopanel-android/-/blob/geo-client-android/master/plugins_dev/jsMerge/README.md)

## 其他说明

由于最初规划是链动开发基础版本，后续由公司自行维护，故前期部分修改并未特别严格的考虑同链动的代码后续的合并。且我方代码只有非常少的部分同步到了链动，故后续合并代码时应该特别注意。==建议合并代码后再与合并前的代码进行对比，确认合并所产生的差异==。

